
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>IO Tools (Text, CSV, HDF5, ...) &#8212; pandas 0.19.2 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.19.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="pandas 0.19.2 documentation" href="index.html" />
    <link rel="next" title="pandas.read_sql_table" href="generated/pandas.read_sql_table.html" />
    <link rel="prev" title="Style" href="style.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="generated/pandas.read_sql_table.html" title="pandas.read_sql_table"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="style.html" title="Style"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pandas 0.19.2 documentation</a> &#187;</li> 
      </ul>
    </div>
<div class="content-wrapper">
    <div class="content">
        <div class="document">
            <div class="sphinxsidebar">
                <h3>Table Of Contents</h3>
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whatsnew.html">What&#8217;s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Package overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="10min.html">10 Minutes to pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsintro.html">Intro to Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Essential Basic Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="text.html">Working with Text Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="options.html">Options and Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexing.html">Indexing and Selecting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">MultiIndex / Advanced Indexing</a></li>
<li class="toctree-l1"><a class="reference internal" href="computation.html">Computational tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="missing_data.html">Working with missing data</a></li>
<li class="toctree-l1"><a class="reference internal" href="groupby.html">Group By: split-apply-combine</a></li>
<li class="toctree-l1"><a class="reference internal" href="merging.html">Merge, join, and concatenate</a></li>
<li class="toctree-l1"><a class="reference internal" href="reshaping.html">Reshaping and Pivot Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="timeseries.html">Time Series / Date functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="timedeltas.html">Time Deltas</a></li>
<li class="toctree-l1"><a class="reference internal" href="categorical.html">Categorical Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="style.html">Style</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">IO Tools (Text, CSV, HDF5, ...)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#csv-text-files">CSV &amp; Text files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parsing-options">Parsing options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#basic">Basic</a></li>
<li class="toctree-l4"><a class="reference internal" href="#column-and-index-locations-and-names">Column and Index Locations and Names</a></li>
<li class="toctree-l4"><a class="reference internal" href="#general-parsing-configuration">General Parsing Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#na-and-missing-data-handling">NA and Missing Data Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#datetime-handling">Datetime Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iteration">Iteration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#quoting-compression-and-file-format">Quoting, Compression, and File Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#specifying-column-data-types">Specifying column data types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#specifying-categorical-dtype">Specifying Categorical dtype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#naming-and-using-columns">Naming and Using Columns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#handling-column-names">Handling column names</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#duplicate-names-parsing">Duplicate names parsing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#filtering-columns-usecols">Filtering columns (<code class="docutils literal"><span class="pre">usecols</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#comments-and-empty-lines">Comments and Empty Lines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ignoring-line-comments-and-empty-lines">Ignoring line comments and empty lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="#comments">Comments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dealing-with-unicode-data">Dealing with Unicode Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#index-columns-and-trailing-delimiters">Index columns and trailing delimiters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#date-handling">Date Handling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#specifying-date-columns">Specifying Date Columns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#date-parsing-functions">Date Parsing Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inferring-datetime-format">Inferring Datetime Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#international-date-formats">International Date Formats</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#specifying-method-for-floating-point-conversion">Specifying method for floating-point conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#thousand-separators">Thousand Separators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#na-values">NA Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#infinity">Infinity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#returning-series">Returning Series</a></li>
<li class="toctree-l3"><a class="reference internal" href="#boolean-values">Boolean values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#handling-bad-lines">Handling &#8220;bad&#8221; lines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#quoting-and-escape-characters">Quoting and Escape Characters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#files-with-fixed-width-columns">Files with Fixed Width Columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#indexes">Indexes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#files-with-an-implicit-index-column">Files with an &#8220;implicit&#8221; index column</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reading-an-index-with-a-multiindex">Reading an index with a <code class="docutils literal"><span class="pre">MultiIndex</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#reading-columns-with-a-multiindex">Reading columns with a <code class="docutils literal"><span class="pre">MultiIndex</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#automatically-sniffing-the-delimiter">Automatically &#8220;sniffing&#8221; the delimiter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iterating-through-files-chunk-by-chunk">Iterating through files chunk by chunk</a></li>
<li class="toctree-l3"><a class="reference internal" href="#specifying-the-parser-engine">Specifying the parser engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="#writing-out-data">Writing out Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#writing-to-csv-format">Writing to CSV format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#writing-a-formatted-string">Writing a formatted string</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#json">JSON</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#writing-json">Writing JSON</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#orient-options">Orient Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">Date Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fallback-behavior">Fallback Behavior</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#reading-json">Reading JSON</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#data-conversion">Data Conversion</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-numpy-parameter">The Numpy Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#normalization">Normalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#line-delimited-json">Line delimited json</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#html">HTML</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reading-html-content">Reading HTML Content</a></li>
<li class="toctree-l3"><a class="reference internal" href="#writing-to-html-files">Writing to HTML files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#excel-files">Excel files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reading-excel-files">Reading Excel Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#excelfile-class"><code class="docutils literal"><span class="pre">ExcelFile</span></code> class</a></li>
<li class="toctree-l4"><a class="reference internal" href="#specifying-sheets">Specifying Sheets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reading-a-multiindex">Reading a <code class="docutils literal"><span class="pre">MultiIndex</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#parsing-specific-columns">Parsing Specific Columns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cell-converters">Cell Converters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#writing-excel-files">Writing Excel Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#writing-excel-files-to-disk">Writing Excel Files to Disk</a></li>
<li class="toctree-l4"><a class="reference internal" href="#writing-excel-files-to-memory">Writing Excel Files to Memory</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#excel-writer-engines">Excel writer engines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#clipboard">Clipboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pickling">Pickling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#msgpack-experimental">msgpack (experimental)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#read-write-api">Read/Write API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#hdf5-pytables">HDF5 (PyTables)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Read/Write API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fixed-format">Fixed Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#table-format">Table Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hierarchical-keys">Hierarchical Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="#storing-types">Storing Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#storing-mixed-types-in-a-table">Storing Mixed Types in a Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="#storing-multi-index-dataframes">Storing Multi-Index DataFrames</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#querying">Querying</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#querying-a-table">Querying a Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-timedelta64-ns">Using timedelta64[ns]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#indexing">Indexing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-via-data-columns">Query via Data Columns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iterator">Iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#advanced-queries">Advanced Queries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#multiple-table-queries">Multiple Table Queries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#delete-from-a-table">Delete from a Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#notes-caveats">Notes &amp; Caveats</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compression">Compression</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ptrepack">ptrepack</a></li>
<li class="toctree-l4"><a class="reference internal" href="#caveats">Caveats</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#datatypes">DataTypes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#categorical-data">Categorical Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#string-columns">String Columns</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#external-compatibility">External Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance">Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#experimental">Experimental</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sql-queries">SQL Queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="generated/pandas.read_sql_table.html">pandas.read_sql_table</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pandas.read_sql_query.html">pandas.read_sql_query</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pandas.read_sql.html">pandas.read_sql</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pandas.DataFrame.to_sql.html">pandas.DataFrame.to_sql</a></li>
<li class="toctree-l3"><a class="reference internal" href="#writing-dataframes">Writing DataFrames</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sql-data-types">SQL data types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#reading-tables">Reading Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#schema-support">Schema support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Querying</a></li>
<li class="toctree-l3"><a class="reference internal" href="#engine-connection-examples">Engine connection examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#advanced-sqlalchemy-queries">Advanced SQLAlchemy queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sqlite-fallback">Sqlite fallback</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#google-bigquery-experimental">Google BigQuery (Experimental)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="generated/pandas.io.gbq.read_gbq.html">pandas.io.gbq.read_gbq</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pandas.io.gbq.to_gbq.html">pandas.io.gbq.to_gbq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#authentication">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Querying</a></li>
<li class="toctree-l3"><a class="reference internal" href="#io-bigquery-writer">Writing DataFrames</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-bigquery-tables">Creating BigQuery Tables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#stata-format">Stata Format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#writing-to-stata-format">Writing to Stata format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reading-from-stata-format">Reading from Stata format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#io-stata-categorical">Categorical Data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sas-formats">SAS Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-file-formats">Other file formats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#netcdf">netCDF</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#performance-considerations">Performance Considerations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="remote_data.html">Remote Data Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="enhancingperf.html">Enhancing Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="sparse.html">Sparse data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="gotchas.html">Caveats and Gotchas</a></li>
<li class="toctree-l1"><a class="reference internal" href="r_interface.html">rpy2 / R interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="ecosystem.html">pandas Ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison_with_r.html">Comparison with R / R libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison_with_sql.html">Comparison with SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison_with_sas.html">Comparison with SAS</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Release Notes</a></li>
</ul>

                <h3 style="margin-top: 1.5em;">Search</h3>

                <form class="search" action="search.html" method="get">
                    <input type="text" name="q" size="18"/>
                    <input type="submit" value="Go"/>
                    <input type="hidden" name="check_keywords" value="yes"/>
                    <input type="hidden" name="area" value="default"/>
                </form>
                <p class="searchtip" style="font-size: 90%">
                    Enter search terms or a module, class or function name.
                </p>

            </div>
             
            <div class="documentwrapper">
                <div class="bodywrapper">
                    <div class="body">
                        
  <div class="section" id="io-tools-text-csv-hdf5">
<span id="io"></span><h1>IO Tools (Text, CSV, HDF5, ...)<a class="headerlink" href="#io-tools-text-csv-hdf5" title="Permalink to this headline">¶</a></h1>
<p>The pandas I/O API is a set of top level <code class="docutils literal"><span class="pre">reader</span></code> functions accessed like <code class="docutils literal"><span class="pre">pd.read_csv()</span></code> that generally return a <code class="docutils literal"><span class="pre">pandas</span></code>
object.</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#io-read-csv-table"><span class="std std-ref">read_csv</span></a></li>
<li><a class="reference internal" href="#io-excel-reader"><span class="std std-ref">read_excel</span></a></li>
<li><a class="reference internal" href="#io-hdf5"><span class="std std-ref">read_hdf</span></a></li>
<li><a class="reference internal" href="#io-sql"><span class="std std-ref">read_sql</span></a></li>
<li><a class="reference internal" href="#io-json-reader"><span class="std std-ref">read_json</span></a></li>
<li><a class="reference internal" href="#io-msgpack"><span class="std std-ref">read_msgpack</span></a> (experimental)</li>
<li><a class="reference internal" href="#io-read-html"><span class="std std-ref">read_html</span></a></li>
<li><a class="reference internal" href="#io-bigquery-reader"><span class="std std-ref">read_gbq</span></a> (experimental)</li>
<li><a class="reference internal" href="#io-stata-reader"><span class="std std-ref">read_stata</span></a></li>
<li><a class="reference internal" href="#io-sas-reader"><span class="std std-ref">read_sas</span></a></li>
<li><a class="reference internal" href="#io-clipboard"><span class="std std-ref">read_clipboard</span></a></li>
<li><a class="reference internal" href="#io-pickle"><span class="std std-ref">read_pickle</span></a></li>
</ul>
</div></blockquote>
<p>The corresponding <code class="docutils literal"><span class="pre">writer</span></code> functions are object methods that are accessed like <code class="docutils literal"><span class="pre">df.to_csv()</span></code></p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#io-store-in-csv"><span class="std std-ref">to_csv</span></a></li>
<li><a class="reference internal" href="#io-excel-writer"><span class="std std-ref">to_excel</span></a></li>
<li><a class="reference internal" href="#io-hdf5"><span class="std std-ref">to_hdf</span></a></li>
<li><a class="reference internal" href="#io-sql"><span class="std std-ref">to_sql</span></a></li>
<li><a class="reference internal" href="#io-json-writer"><span class="std std-ref">to_json</span></a></li>
<li><a class="reference internal" href="#io-msgpack"><span class="std std-ref">to_msgpack</span></a> (experimental)</li>
<li><a class="reference internal" href="#io-html"><span class="std std-ref">to_html</span></a></li>
<li><a class="reference internal" href="#io-bigquery-writer"><span class="std std-ref">to_gbq</span></a> (experimental)</li>
<li><a class="reference internal" href="#io-stata-writer"><span class="std std-ref">to_stata</span></a></li>
<li><a class="reference internal" href="#io-clipboard"><span class="std std-ref">to_clipboard</span></a></li>
<li><a class="reference internal" href="#io-pickle"><span class="std std-ref">to_pickle</span></a></li>
</ul>
</div></blockquote>
<p><a class="reference internal" href="#io-perf"><span class="std std-ref">Here</span></a> is an informal performance comparison for some of these IO methods.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For examples that use the <code class="docutils literal"><span class="pre">StringIO</span></code> class, make sure you import it
according to your Python version, i.e. <code class="docutils literal"><span class="pre">from</span> <span class="pre">StringIO</span> <span class="pre">import</span> <span class="pre">StringIO</span></code> for
Python 2 and <code class="docutils literal"><span class="pre">from</span> <span class="pre">io</span> <span class="pre">import</span> <span class="pre">StringIO</span></code> for Python 3.</p>
</div>
<div class="section" id="csv-text-files">
<span id="io-read-csv-table"></span><h2>CSV &amp; Text files<a class="headerlink" href="#csv-text-files" title="Permalink to this headline">¶</a></h2>
<p>The two workhorse functions for reading text files (a.k.a. flat files) are
<a class="reference internal" href="generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal"><span class="pre">read_csv()</span></code></a> and <a class="reference internal" href="generated/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal"><span class="pre">read_table()</span></code></a>. They both use the same parsing code to
intelligently convert tabular data into a DataFrame object. See the
<a class="reference internal" href="cookbook.html#cookbook-csv"><span class="std std-ref">cookbook</span></a> for some advanced strategies.</p>
<div class="section" id="parsing-options">
<h3>Parsing options<a class="headerlink" href="#parsing-options" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal"><span class="pre">read_csv()</span></code></a> and <a class="reference internal" href="generated/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal"><span class="pre">read_table()</span></code></a> accept the following arguments:</p>
<div class="section" id="basic">
<h4>Basic<a class="headerlink" href="#basic" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>filepath_or_buffer</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">various</span><dd>Either a path to a file (a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><code class="docutils literal"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.6)"><code class="docutils literal"><span class="pre">pathlib.Path</span></code></a>,
or <code class="xref py py-class docutils literal"><span class="pre">py._path.local.LocalPath</span></code>), URL (including http, ftp, and S3
locations), or any object with a <code class="docutils literal"><span class="pre">read()</span></code> method (such as an open file or
<a class="reference external" href="https://docs.python.org/3/library/io.html#io.StringIO" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">StringIO</span></code></a>).</dd>
<dt>sep</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">str, defaults to <code class="docutils literal"><span class="pre">','</span></code> for <a class="reference internal" href="generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal"><span class="pre">read_csv()</span></code></a>, <code class="docutils literal"><span class="pre">\t</span></code> for <a class="reference internal" href="generated/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal"><span class="pre">read_table()</span></code></a></span><dd>Delimiter to use. If sep is <code class="docutils literal"><span class="pre">None</span></code>,
will try to automatically determine this. Separators longer than 1 character
and different from <code class="docutils literal"><span class="pre">'\s+'</span></code> will be interpreted as regular expressions, will
force use of the python parsing engine and will ignore quotes in the data.
Regex example: <code class="docutils literal"><span class="pre">'\\r\\t'</span></code>.</dd>
<dt>delimiter</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">str, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Alternative argument name for sep.</dd>
<dt>delim_whitespace</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default False</span><dd><p class="first">Specifies whether or not whitespace (e.g. <code class="docutils literal"><span class="pre">'</span> <span class="pre">'</span></code> or <code class="docutils literal"><span class="pre">'\t'</span></code>)
will be used as the delimiter. Equivalent to setting <code class="docutils literal"><span class="pre">sep='\s+'</span></code>.
If this option is set to True, nothing should be passed in for the
<code class="docutils literal"><span class="pre">delimiter</span></code> parameter.</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 0.18.1: </span>support for the Python parser.</p>
</div>
</dd>
</dl>
</div>
<div class="section" id="column-and-index-locations-and-names">
<h4>Column and Index Locations and Names<a class="headerlink" href="#column-and-index-locations-and-names" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>header</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">int or list of ints, default <code class="docutils literal"><span class="pre">'infer'</span></code></span><dd>Row number(s) to use as the column names, and the start of the data. Default
behavior is as if <code class="docutils literal"><span class="pre">header=0</span></code> if no <code class="docutils literal"><span class="pre">names</span></code> passed, otherwise as if
<code class="docutils literal"><span class="pre">header=None</span></code>. Explicitly pass <code class="docutils literal"><span class="pre">header=0</span></code> to be able to replace existing
names. The header can be a list of ints that specify row locations for a
multi-index on the columns e.g. <code class="docutils literal"><span class="pre">[0,1,3]</span></code>. Intervening rows that are not
specified will be skipped (e.g. 2 in this example is skipped). Note that
this parameter ignores commented lines and empty lines if
<code class="docutils literal"><span class="pre">skip_blank_lines=True</span></code>, so header=0 denotes the first line of data
rather than the first line of the file.</dd>
<dt>names</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">array-like, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>List of column names to use. If file contains no header row, then you should
explicitly pass <code class="docutils literal"><span class="pre">header=None</span></code>. Duplicates in this list are not allowed unless
<code class="docutils literal"><span class="pre">mangle_dupe_cols=True</span></code>, which is the default.</dd>
<dt>index_col</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">int or sequence or <code class="docutils literal"><span class="pre">False</span></code>, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Column to use as the row labels of the DataFrame. If a sequence is given, a
MultiIndex is used. If you have a malformed file with delimiters at the end of
each line, you might consider <code class="docutils literal"><span class="pre">index_col=False</span></code> to force pandas to <em>not</em> use
the first column as the index (row names).</dd>
<dt>usecols</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">array-like, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Return a subset of the columns. All elements in this array must either
be positional (i.e. integer indices into the document columns) or strings
that correspond to column names provided either by the user in <cite>names</cite> or
inferred from the document header row(s). For example, a valid <cite>usecols</cite>
parameter would be [0, 1, 2] or [&#8216;foo&#8217;, &#8216;bar&#8217;, &#8216;baz&#8217;]. Using this parameter
results in much faster parsing time and lower memory usage.</dd>
<dt>as_recarray</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">False</span></code></span><dd><p class="first">DEPRECATED: this argument will be removed in a future version. Please call
<code class="docutils literal"><span class="pre">pd.read_csv(...).to_records()</span></code> instead.</p>
<p class="last">Return a NumPy recarray instead of a DataFrame after parsing the data. If
set to <code class="docutils literal"><span class="pre">True</span></code>, this option takes precedence over the <code class="docutils literal"><span class="pre">squeeze</span></code> parameter.
In addition, as row indices are not available in such a format, the <code class="docutils literal"><span class="pre">index_col</span></code>
parameter will be ignored.</p>
</dd>
<dt>squeeze</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">False</span></code></span><dd>If the parsed data only contains one column then return a Series.</dd>
<dt>prefix</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">str, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Prefix to add to column numbers when no header, e.g. &#8216;X&#8217; for X0, X1, ...</dd>
<dt>mangle_dupe_cols</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">True</span></code></span><dd>Duplicate columns will be specified as &#8216;X.0&#8217;...&#8217;X.N&#8217;, rather than &#8216;X&#8217;...&#8217;X&#8217;.
Passing in False will cause data to be overwritten if there are duplicate
names in the columns.</dd>
</dl>
</div>
<div class="section" id="general-parsing-configuration">
<h4>General Parsing Configuration<a class="headerlink" href="#general-parsing-configuration" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>dtype</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">Type name or dict of column -&gt; type, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Data type for data or columns. E.g. <code class="docutils literal"><span class="pre">{'a':</span> <span class="pre">np.float64,</span> <span class="pre">'b':</span> <span class="pre">np.int32}</span></code>
(unsupported with <code class="docutils literal"><span class="pre">engine='python'</span></code>). Use <cite>str</cite> or <cite>object</cite> to preserve and
not interpret dtype.</dd>
<dt>engine</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">{<code class="docutils literal"><span class="pre">'c'</span></code>, <code class="docutils literal"><span class="pre">'python'</span></code>}</span><dd>Parser engine to use. The C engine is faster while the python engine is
currently more feature-complete.</dd>
<dt>converters</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">dict, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Dict of functions for converting values in certain columns. Keys can either be
integers or column labels.</dd>
<dt>true_values</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">list, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Values to consider as <code class="docutils literal"><span class="pre">True</span></code>.</dd>
<dt>false_values</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">list, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Values to consider as <code class="docutils literal"><span class="pre">False</span></code>.</dd>
<dt>skipinitialspace</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">False</span></code></span><dd>Skip spaces after delimiter.</dd>
<dt>skiprows</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">list-like or integer, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Line numbers to skip (0-indexed) or number of lines to skip (int) at the start
of the file.</dd>
<dt>skipfooter</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">int, default <code class="docutils literal"><span class="pre">0</span></code></span><dd>Number of lines at bottom of file to skip (unsupported with engine=&#8217;c&#8217;).</dd>
<dt>skip_footer</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">int, default <code class="docutils literal"><span class="pre">0</span></code></span><dd>DEPRECATED: use the <code class="docutils literal"><span class="pre">skipfooter</span></code> parameter instead, as they are identical</dd>
<dt>nrows</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">int, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Number of rows of file to read. Useful for reading pieces of large files.</dd>
<dt>low_memory</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">True</span></code></span><dd>Internally process the file in chunks, resulting in lower memory use
while parsing, but possibly mixed type inference.  To ensure no mixed
types either set <code class="docutils literal"><span class="pre">False</span></code>, or specify the type with the <code class="docutils literal"><span class="pre">dtype</span></code> parameter.
Note that the entire file is read into a single DataFrame regardless,
use the <code class="docutils literal"><span class="pre">chunksize</span></code> or <code class="docutils literal"><span class="pre">iterator</span></code> parameter to return the data in chunks.
(Only valid with C parser)</dd>
<dt>buffer_lines</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">int, default None</span><dd>DEPRECATED: this argument will be removed in a future version because its
value is not respected by the parser</dd>
<dt>compact_ints</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default False</span><dd><p class="first">DEPRECATED: this argument will be removed in a future version</p>
<p class="last">If <code class="docutils literal"><span class="pre">compact_ints</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, then for any column that is of integer dtype, the
parser will attempt to cast it as the smallest integer <code class="docutils literal"><span class="pre">dtype</span></code> possible, either
signed or unsigned depending on the specification from the <code class="docutils literal"><span class="pre">use_unsigned</span></code> parameter.</p>
</dd>
<dt>use_unsigned</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default False</span><dd><p class="first">DEPRECATED: this argument will be removed in a future version</p>
<p class="last">If integer columns are being compacted (i.e. <code class="docutils literal"><span class="pre">compact_ints=True</span></code>), specify whether
the column should be compacted to the smallest signed or unsigned integer dtype.</p>
</dd>
<dt>memory_map</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default False</span><dd>If a filepath is provided for <code class="docutils literal"><span class="pre">filepath_or_buffer</span></code>, map the file object
directly onto memory and access the data directly from there. Using this
option can improve performance because there is no longer any I/O overhead.</dd>
</dl>
</div>
<div class="section" id="na-and-missing-data-handling">
<h4>NA and Missing Data Handling<a class="headerlink" href="#na-and-missing-data-handling" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>na_values</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">scalar, str, list-like, or dict, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Additional strings to recognize as NA/NaN. If dict passed, specific per-column
NA values. By default the following values are interpreted as NaN:
<code class="docutils literal"><span class="pre">'-1.#IND',</span> <span class="pre">'1.#QNAN',</span> <span class="pre">'1.#IND',</span> <span class="pre">'-1.#QNAN',</span> <span class="pre">'#N/A</span> <span class="pre">N/A',</span> <span class="pre">'#N/A',</span> <span class="pre">'N/A',</span> <span class="pre">'NA',</span>
<span class="pre">'#NA',</span> <span class="pre">'NULL',</span> <span class="pre">'NaN',</span> <span class="pre">'-NaN',</span> <span class="pre">'nan',</span> <span class="pre">'-nan',</span> <span class="pre">''</span></code>.</dd>
<dt>keep_default_na</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">True</span></code></span><dd>If na_values are specified and keep_default_na is <code class="docutils literal"><span class="pre">False</span></code> the default NaN
values are overridden, otherwise they&#8217;re appended to.</dd>
<dt>na_filter</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">True</span></code></span><dd>Detect missing value markers (empty strings and the value of na_values). In
data without any NAs, passing <code class="docutils literal"><span class="pre">na_filter=False</span></code> can improve the performance
of reading a large file.</dd>
<dt>verbose</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">False</span></code></span><dd>Indicate number of NA values placed in non-numeric columns.</dd>
<dt>skip_blank_lines</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">True</span></code></span><dd>If <code class="docutils literal"><span class="pre">True</span></code>, skip over blank lines rather than interpreting as NaN values.</dd>
</dl>
</div>
<div class="section" id="datetime-handling">
<h4>Datetime Handling<a class="headerlink" href="#datetime-handling" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>parse_dates</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean or list of ints or names or list of lists or dict, default <code class="docutils literal"><span class="pre">False</span></code>.</span><dd><ul class="first last simple">
<li>If <code class="docutils literal"><span class="pre">True</span></code> -&gt; try parsing the index.</li>
<li>If <code class="docutils literal"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code> -&gt;  try parsing columns 1, 2, 3 each as a separate date
column.</li>
<li>If <code class="docutils literal"><span class="pre">[[1,</span> <span class="pre">3]]</span></code> -&gt; combine columns 1 and 3 and parse as a single date
column.</li>
<li>If <code class="docutils literal"><span class="pre">{'foo'</span> <span class="pre">:</span> <span class="pre">[1,</span> <span class="pre">3]}</span></code> -&gt; parse columns 1, 3 as date and call result &#8216;foo&#8217;.
A fast-path exists for iso8601-formatted dates.</li>
</ul>
</dd>
<dt>infer_datetime_format</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">False</span></code></span><dd>If <code class="docutils literal"><span class="pre">True</span></code> and parse_dates is enabled for a column, attempt to infer the
datetime format to speed up the processing.</dd>
<dt>keep_date_col</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">False</span></code></span><dd>If <code class="docutils literal"><span class="pre">True</span></code> and parse_dates specifies combining multiple columns then keep the
original columns.</dd>
<dt>date_parser</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">function, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Function to use for converting a sequence of string columns to an array of
datetime instances. The default uses <code class="docutils literal"><span class="pre">dateutil.parser.parser</span></code> to do the
conversion. Pandas will try to call date_parser in three different ways,
advancing to the next if an exception occurs: 1) Pass one or more arrays (as
defined by parse_dates) as arguments; 2) concatenate (row-wise) the string
values from the columns defined by parse_dates into a single array and pass
that; and 3) call date_parser once for each row using one or more strings
(corresponding to the columns defined by parse_dates) as arguments.</dd>
<dt>dayfirst</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">False</span></code></span><dd>DD/MM format dates, international and European format.</dd>
</dl>
</div>
<div class="section" id="iteration">
<h4>Iteration<a class="headerlink" href="#iteration" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>iterator</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">False</span></code></span><dd>Return <cite>TextFileReader</cite> object for iteration or getting chunks with
<code class="docutils literal"><span class="pre">get_chunk()</span></code>.</dd>
<dt>chunksize</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">int, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Return <cite>TextFileReader</cite> object for iteration. See <a class="reference internal" href="#io-chunking"><span class="std std-ref">iterating and chunking</span></a> below.</dd>
</dl>
</div>
<div class="section" id="quoting-compression-and-file-format">
<h4>Quoting, Compression, and File Format<a class="headerlink" href="#quoting-compression-and-file-format" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>compression</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">{<code class="docutils literal"><span class="pre">'infer'</span></code>, <code class="docutils literal"><span class="pre">'gzip'</span></code>, <code class="docutils literal"><span class="pre">'bz2'</span></code>, <code class="docutils literal"><span class="pre">'zip'</span></code>, <code class="docutils literal"><span class="pre">'xz'</span></code>, <code class="docutils literal"><span class="pre">None</span></code>}, default <code class="docutils literal"><span class="pre">'infer'</span></code></span><dd><p class="first">For on-the-fly decompression of on-disk data. If &#8216;infer&#8217;, then use gzip,
bz2, zip, or xz if filepath_or_buffer is a string ending in &#8216;.gz&#8217;, &#8216;.bz2&#8217;,
&#8216;.zip&#8217;, or &#8216;.xz&#8217;, respectively, and no decompression otherwise. If using &#8216;zip&#8217;,
the ZIP file must contain only one data file to be read in.
Set to <code class="docutils literal"><span class="pre">None</span></code> for no decompression.</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 0.18.1: </span>support for &#8216;zip&#8217; and &#8216;xz&#8217; compression.</p>
</div>
</dd>
<dt>thousands</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">str, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Thousands separator.</dd>
<dt>decimal</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">str, default <code class="docutils literal"><span class="pre">'.'</span></code></span><dd>Character to recognize as decimal point. E.g. use <code class="docutils literal"><span class="pre">','</span></code> for European data.</dd>
<dt>float_precision</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string, default None</span><dd>Specifies which converter the C engine should use for floating-point values.
The options are <code class="docutils literal"><span class="pre">None</span></code> for the ordinary converter, <code class="docutils literal"><span class="pre">high</span></code> for the
high-precision converter, and <code class="docutils literal"><span class="pre">round_trip</span></code> for the round-trip converter.</dd>
<dt>lineterminator</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">str (length 1), default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Character to break file into lines. Only valid with C parser.</dd>
<dt>quotechar</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">str (length 1)</span><dd>The character used to denote the start and end of a quoted item. Quoted items
can include the delimiter and it will be ignored.</dd>
<dt>quoting</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">int or <code class="docutils literal"><span class="pre">csv.QUOTE_*</span></code> instance, default <code class="docutils literal"><span class="pre">0</span></code></span><dd>Control field quoting behavior per <code class="docutils literal"><span class="pre">csv.QUOTE_*</span></code> constants. Use one of
<code class="docutils literal"><span class="pre">QUOTE_MINIMAL</span></code> (0), <code class="docutils literal"><span class="pre">QUOTE_ALL</span></code> (1), <code class="docutils literal"><span class="pre">QUOTE_NONNUMERIC</span></code> (2) or
<code class="docutils literal"><span class="pre">QUOTE_NONE</span></code> (3).</dd>
<dt>doublequote</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">True</span></code></span><dd>When <code class="docutils literal"><span class="pre">quotechar</span></code> is specified and <code class="docutils literal"><span class="pre">quoting</span></code> is not <code class="docutils literal"><span class="pre">QUOTE_NONE</span></code>,
indicate whether or not to interpret two consecutive <code class="docutils literal"><span class="pre">quotechar</span></code> elements
<strong>inside</strong> a field as a single <code class="docutils literal"><span class="pre">quotechar</span></code> element.</dd>
<dt>escapechar</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">str (length 1), default <code class="docutils literal"><span class="pre">None</span></code></span><dd>One-character string used to escape delimiter when quoting is <code class="docutils literal"><span class="pre">QUOTE_NONE</span></code>.</dd>
<dt>comment</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">str, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Indicates remainder of line should not be parsed. If found at the beginning of
a line, the line will be ignored altogether. This parameter must be a single
character. Like empty lines (as long as <code class="docutils literal"><span class="pre">skip_blank_lines=True</span></code>), fully
commented lines are ignored by the parameter <cite>header</cite> but not by <cite>skiprows</cite>.
For example, if <code class="docutils literal"><span class="pre">comment='#'</span></code>, parsing &#8216;#empty\na,b,c\n1,2,3&#8217; with
<cite>header=0</cite> will result in &#8216;a,b,c&#8217; being treated as the header.</dd>
<dt>encoding</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">str, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>Encoding to use for UTF when reading/writing (e.g. <code class="docutils literal"><span class="pre">'utf-8'</span></code>). <a class="reference external" href="https://docs.python.org/3/library/codecs.html#standard-encodings">List of
Python standard encodings</a>.</dd>
<dt>dialect</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">str or <a class="reference external" href="https://docs.python.org/3/library/csv.html#csv.Dialect" title="(in Python v3.6)"><code class="docutils literal"><span class="pre">csv.Dialect</span></code></a> instance, default <code class="docutils literal"><span class="pre">None</span></code></span><dd>If <code class="docutils literal"><span class="pre">None</span></code> defaults to Excel dialect. Ignored if sep longer than 1 char. See
<a class="reference external" href="https://docs.python.org/3/library/csv.html#csv.Dialect" title="(in Python v3.6)"><code class="docutils literal"><span class="pre">csv.Dialect</span></code></a> documentation for more details.</dd>
<dt>tupleize_cols</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">False</span></code></span><dd>Leave a list of tuples on columns as is (default is to convert to a MultiIndex
on the columns).</dd>
</dl>
</div>
<div class="section" id="error-handling">
<h4>Error Handling<a class="headerlink" href="#error-handling" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>error_bad_lines</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">True</span></code></span><dd>Lines with too many fields (e.g. a csv line with too many commas) will by
default cause an exception to be raised, and no DataFrame will be returned. If
<code class="docutils literal"><span class="pre">False</span></code>, then these &#8220;bad lines&#8221; will dropped from the DataFrame that is
returned (only valid with C parser). See <a class="reference internal" href="#io-bad-lines"><span class="std std-ref">bad lines</span></a>
below.</dd>
<dt>warn_bad_lines</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, default <code class="docutils literal"><span class="pre">True</span></code></span><dd>If error_bad_lines is <code class="docutils literal"><span class="pre">False</span></code>, and warn_bad_lines is <code class="docutils literal"><span class="pre">True</span></code>, a warning for
each &#8220;bad line&#8221; will be output (only valid with C parser).</dd>
</dl>
<p>Consider a typical CSV file containing, in this case, some time series data:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;foo.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">date,A,B,C</span>
<span class="go">20090101,a,1,2</span>
<span class="go">20090102,b,3,4</span>
<span class="go">20090103,c,4,5</span>
</pre></div>
</div>
<p>The default for <cite>read_csv</cite> is to create a DataFrame with simple numbered rows:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;foo.csv&#39;</span><span class="p">)</span>
<span class="gr">Out[2]: </span>
<span class="go">       date  A  B  C</span>
<span class="go">0  20090101  a  1  2</span>
<span class="go">1  20090102  b  3  4</span>
<span class="go">2  20090103  c  4  5</span>
</pre></div>
</div>
<p>In the case of indexed data, you can pass the column number or column name you
wish to use as the index:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;foo.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gr">Out[3]: </span>
<span class="go">          A  B  C</span>
<span class="go">date             </span>
<span class="go">20090101  a  1  2</span>
<span class="go">20090102  b  3  4</span>
<span class="go">20090103  c  4  5</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;foo.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">)</span>
<span class="gr">Out[4]: </span>
<span class="go">          A  B  C</span>
<span class="go">date             </span>
<span class="go">20090101  a  1  2</span>
<span class="go">20090102  b  3  4</span>
<span class="go">20090103  c  4  5</span>
</pre></div>
</div>
<p>You can also use a list of columns to create a hierarchical index:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;foo.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">])</span>
<span class="gr">Out[5]: </span>
<span class="go">            B  C</span>
<span class="go">date     A      </span>
<span class="go">20090101 a  1  2</span>
<span class="go">20090102 b  3  4</span>
<span class="go">20090103 c  4  5</span>
</pre></div>
</div>
<p id="io-dialect">The <code class="docutils literal"><span class="pre">dialect</span></code> keyword gives greater flexibility in specifying the file format.
By default it uses the Excel dialect but you can specify either the dialect name
or a <a class="reference external" href="https://docs.python.org/3/library/csv.html#csv.Dialect" title="(in Python v3.6)"><code class="docutils literal"><span class="pre">csv.Dialect</span></code></a> instance.</p>
<p>Suppose you had data with unenclosed quotes:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">label1,label2,label3</span>
<span class="go">index1,&quot;a,c,e</span>
<span class="go">index2,b,d,f</span>
</pre></div>
</div>
<p>By default, <code class="docutils literal"><span class="pre">read_csv</span></code> uses the Excel dialect and treats the double quote as
the quote character, which causes it to fail when it finds a newline before it
finds the closing double quote.</p>
<p>We can get around this using <code class="docutils literal"><span class="pre">dialect</span></code></p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">dia</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">excel</span><span class="p">()</span>

<span class="gp">In [8]: </span><span class="n">dia</span><span class="o">.</span><span class="n">quoting</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONE</span>

<span class="gp">In [9]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dialect</span><span class="o">=</span><span class="n">dia</span><span class="p">)</span>
<span class="gr">Out[9]: </span>
<span class="go">       label1 label2 label3</span>
<span class="go">index1     &quot;a      c      e</span>
<span class="go">index2      b      d      f</span>
</pre></div>
</div>
<p>All of the dialect options can be specified separately by keyword arguments:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [10]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b,c~1,2,3~4,5,6&#39;</span>

<span class="gp">In [11]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">lineterminator</span><span class="o">=</span><span class="s1">&#39;~&#39;</span><span class="p">)</span>
<span class="gr">Out[11]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
</pre></div>
</div>
<p>Another common dialect option is <code class="docutils literal"><span class="pre">skipinitialspace</span></code>, to skip any whitespace
after a delimiter:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a, b, c</span><span class="se">\n</span><span class="s1">1, 2, 3</span><span class="se">\n</span><span class="s1">4, 5, 6&#39;</span>

<span class="gp">In [13]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a, b, c</span>
<span class="go">1, 2, 3</span>
<span class="go">4, 5, 6</span>

<span class="gp">In [14]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">skipinitialspace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gr">Out[14]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
</pre></div>
</div>
<p>The parsers make every attempt to &#8220;do the right thing&#8221; and not be very
fragile. Type inference is a pretty big deal. So if a column can be coerced to
integer dtype without altering the contents, it will do so. Any non-numeric
columns will come through as object dtype as with the rest of pandas objects.</p>
</div>
</div>
<div class="section" id="specifying-column-data-types">
<span id="io-dtypes"></span><h3>Specifying column data types<a class="headerlink" href="#specifying-column-data-types" title="Permalink to this headline">¶</a></h3>
<p>Starting with v0.10, you can indicate the data type for the whole DataFrame or
individual columns:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b,c</span><span class="se">\n</span><span class="s1">1,2,3</span><span class="se">\n</span><span class="s1">4,5,6</span><span class="se">\n</span><span class="s1">7,8,9&#39;</span>

<span class="gp">In [16]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">1,2,3</span>
<span class="go">4,5,6</span>
<span class="go">7,8,9</span>

<span class="gp">In [17]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>

<span class="gp">In [18]: </span><span class="n">df</span>
<span class="gr">Out[18]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
<span class="go">2  7  8  9</span>

<span class="gp">In [19]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="gr">Out[19]: </span><span class="s1">&#39;1&#39;</span>

<span class="gp">In [20]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">})</span>

<span class="gp">In [21]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gr">Out[21]: </span>
<span class="go">a      int64</span>
<span class="go">b     object</span>
<span class="go">c    float64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Fortunately, <code class="docutils literal"><span class="pre">pandas</span></code> offers more than one way to ensure that your column(s)
contain only one <code class="docutils literal"><span class="pre">dtype</span></code>. If you&#8217;re unfamiliar with these concepts, you can
see <a class="reference internal" href="basics.html#basics-dtypes"><span class="std std-ref">here</span></a> to learn more about dtypes, and
<a class="reference internal" href="basics.html#basics-object-conversion"><span class="std std-ref">here</span></a> to learn more about <code class="docutils literal"><span class="pre">object</span></code> conversion in
<code class="docutils literal"><span class="pre">pandas</span></code>.</p>
<p>For instance, you can use the <code class="docutils literal"><span class="pre">converters</span></code> argument
of <a class="reference internal" href="generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal"><span class="pre">read_csv()</span></code></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [22]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;col_1</span><span class="se">\n</span><span class="s2">1</span><span class="se">\n</span><span class="s2">2</span><span class="se">\n</span><span class="s2">&#39;A&#39;</span><span class="se">\n</span><span class="s2">4.22&quot;</span>

<span class="gp">In [23]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">converters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;col_1&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">})</span>

<span class="gp">In [24]: </span><span class="n">df</span>
<span class="gr">Out[24]: </span>
<span class="go">  col_1</span>
<span class="go">0     1</span>
<span class="go">1     2</span>
<span class="go">2   &#39;A&#39;</span>
<span class="go">3  4.22</span>

<span class="gp">In [25]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="gr">Out[25]: </span>
<span class="go">&lt;type &#39;str&#39;&gt;    4</span>
<span class="go">Name: col_1, dtype: int64</span>
</pre></div>
</div>
<p>Or you can use the <a class="reference internal" href="generated/pandas.to_numeric.html#pandas.to_numeric" title="pandas.to_numeric"><code class="xref py py-func docutils literal"><span class="pre">to_numeric()</span></code></a> function to coerce the
dtypes after reading in the data,</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [26]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

<span class="gp">In [27]: </span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;col_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;col_1&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>

<span class="gp">In [28]: </span><span class="n">df2</span>
<span class="gr">Out[28]: </span>
<span class="go">   col_1</span>
<span class="go">0   1.00</span>
<span class="go">1   2.00</span>
<span class="go">2    NaN</span>
<span class="go">3   4.22</span>

<span class="gp">In [29]: </span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;col_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="gr">Out[29]: </span>
<span class="go">&lt;type &#39;float&#39;&gt;    4</span>
<span class="go">Name: col_1, dtype: int64</span>
</pre></div>
</div>
<p>which would convert all valid parsing to floats, leaving the invalid parsing
as <code class="docutils literal"><span class="pre">NaN</span></code>.</p>
<p>Ultimately, how you deal with reading in columns containing mixed dtypes
depends on your specific needs. In the case above, if you wanted to <code class="docutils literal"><span class="pre">NaN</span></code> out
the data anomalies, then <a class="reference internal" href="generated/pandas.to_numeric.html#pandas.to_numeric" title="pandas.to_numeric"><code class="xref py py-func docutils literal"><span class="pre">to_numeric()</span></code></a> is probably your best option.
However, if you wanted for all the data to be coerced, no matter the type, then
using the <code class="docutils literal"><span class="pre">converters</span></code> argument of <a class="reference internal" href="generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal"><span class="pre">read_csv()</span></code></a> would certainly be
worth trying.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">dtype</span></code> option is currently only supported by the C engine.
Specifying <code class="docutils literal"><span class="pre">dtype</span></code> with <code class="docutils literal"><span class="pre">engine</span></code> other than &#8216;c&#8217; raises a
<code class="docutils literal"><span class="pre">ValueError</span></code>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In some cases, reading in abnormal data with columns containing mixed dtypes
will result in an inconsistent dataset. If you rely on pandas to infer the
dtypes of your columns, the parsing engine will go and infer the dtypes for
different chunks of the data, rather than the whole dataset at once. Consequently,
you can end up with column(s) with mixed dtypes. For example,</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [30]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col_1&#39;</span><span class="p">:</span><span class="nb">range</span><span class="p">(</span><span class="mi">500000</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="nb">range</span><span class="p">(</span><span class="mi">500000</span><span class="p">)})</span>

<span class="gp">In [31]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>

<span class="gp">In [32]: </span><span class="n">mixed_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>

<span class="gp">In [33]: </span><span class="n">mixed_df</span><span class="p">[</span><span class="s1">&#39;col_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="gr">Out[33]: </span>
<span class="go">&lt;type &#39;int&#39;&gt;    737858</span>
<span class="go">&lt;type &#39;str&#39;&gt;    262144</span>
<span class="go">Name: col_1, dtype: int64</span>

<span class="gp">In [34]: </span><span class="n">mixed_df</span><span class="p">[</span><span class="s1">&#39;col_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span>
<span class="gr">Out[34]: </span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;O&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="last">will result with <cite>mixed_df</cite> containing an <code class="docutils literal"><span class="pre">int</span></code> dtype for certain chunks
of the column, and <code class="docutils literal"><span class="pre">str</span></code> for others due to the mixed dtypes from the
data that was read in. It is important to note that the overall column will be
marked with a <code class="docutils literal"><span class="pre">dtype</span></code> of <code class="docutils literal"><span class="pre">object</span></code>, which is used for columns with mixed dtypes.</p>
</div>
</div>
<div class="section" id="specifying-categorical-dtype">
<span id="io-categorical"></span><h3>Specifying Categorical dtype<a class="headerlink" href="#specifying-categorical-dtype" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.19.0.</span></p>
</div>
<p><code class="docutils literal"><span class="pre">Categorical</span></code> columns can be parsed directly by specifying <code class="docutils literal"><span class="pre">dtype='category'</span></code></p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [35]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;col1,col2,col3</span><span class="se">\n</span><span class="s1">a,b,1</span><span class="se">\n</span><span class="s1">a,b,2</span><span class="se">\n</span><span class="s1">c,d,3&#39;</span>

<span class="gp">In [36]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gr">Out[36]: </span>
<span class="go">  col1 col2  col3</span>
<span class="go">0    a    b     1</span>
<span class="go">1    a    b     2</span>
<span class="go">2    c    d     3</span>

<span class="gp">In [37]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gr">Out[37]: </span>
<span class="go">col1    object</span>
<span class="go">col2    object</span>
<span class="go">col3     int64</span>
<span class="go">dtype: object</span>

<span class="gp">In [38]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gr">Out[38]: </span>
<span class="go">col1    category</span>
<span class="go">col2    category</span>
<span class="go">col3    category</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Individual columns can be parsed as a <code class="docutils literal"><span class="pre">Categorical</span></code> using a dict specification</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [39]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span> <span class="s1">&#39;category&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gr">Out[39]: </span>
<span class="go">col1    category</span>
<span class="go">col2      object</span>
<span class="go">col3       int64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The resulting categories will always be parsed as strings (object dtype).
If the categories are numeric they can be converted using the
<a class="reference internal" href="generated/pandas.to_numeric.html#pandas.to_numeric" title="pandas.to_numeric"><code class="xref py py-func docutils literal"><span class="pre">to_numeric()</span></code></a> function, or as appropriate, another converter
such as <a class="reference internal" href="generated/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal"><span class="pre">to_datetime()</span></code></a>.</p>
<div class="last highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [40]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>

<span class="gp">In [41]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gr">Out[41]: </span>
<span class="go">col1    category</span>
<span class="go">col2    category</span>
<span class="go">col3    category</span>
<span class="go">dtype: object</span>

<span class="gp">In [42]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col3&#39;</span><span class="p">]</span>
<span class="gr">Out[42]: </span>
<span class="go">0    1</span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">Name: col3, dtype: category</span>
<span class="go">Categories (3, object): [1, 2, 3]</span>

<span class="gp">In [43]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col3&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">categories</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col3&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">categories</span><span class="p">)</span>

<span class="gp">In [44]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col3&#39;</span><span class="p">]</span>
<span class="gr">Out[44]: </span>
<span class="go">0    1</span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">Name: col3, dtype: category</span>
<span class="go">Categories (3, int64): [1, 2, 3]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="naming-and-using-columns">
<h3>Naming and Using Columns<a class="headerlink" href="#naming-and-using-columns" title="Permalink to this headline">¶</a></h3>
<div class="section" id="handling-column-names">
<span id="io-headers"></span><h4>Handling column names<a class="headerlink" href="#handling-column-names" title="Permalink to this headline">¶</a></h4>
<p>A file may or may not have a header row. pandas assumes the first row should be
used as the column names:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [45]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b,c</span><span class="se">\n</span><span class="s1">1,2,3</span><span class="se">\n</span><span class="s1">4,5,6</span><span class="se">\n</span><span class="s1">7,8,9&#39;</span>

<span class="gp">In [46]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">1,2,3</span>
<span class="go">4,5,6</span>
<span class="go">7,8,9</span>

<span class="gp">In [47]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gr">Out[47]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
<span class="go">2  7  8  9</span>
</pre></div>
</div>
<p>By specifying the <code class="docutils literal"><span class="pre">names</span></code> argument in conjunction with <code class="docutils literal"><span class="pre">header</span></code> you can
indicate other names to use and whether or not to throw away the header row (if
any):</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [48]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">1,2,3</span>
<span class="go">4,5,6</span>
<span class="go">7,8,9</span>

<span class="gp">In [49]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">],</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gr">Out[49]: </span>
<span class="go">   foo  bar  baz</span>
<span class="go">0    1    2    3</span>
<span class="go">1    4    5    6</span>
<span class="go">2    7    8    9</span>

<span class="gp">In [50]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">],</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="gr">Out[50]: </span>
<span class="go">  foo bar baz</span>
<span class="go">0   a   b   c</span>
<span class="go">1   1   2   3</span>
<span class="go">2   4   5   6</span>
<span class="go">3   7   8   9</span>
</pre></div>
</div>
<p>If the header is in a row other than the first, pass the row number to
<code class="docutils literal"><span class="pre">header</span></code>. This will skip the preceding rows:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [51]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;skip this skip it</span><span class="se">\n</span><span class="s1">a,b,c</span><span class="se">\n</span><span class="s1">1,2,3</span><span class="se">\n</span><span class="s1">4,5,6</span><span class="se">\n</span><span class="s1">7,8,9&#39;</span>

<span class="gp">In [52]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gr">Out[52]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
<span class="go">2  7  8  9</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="duplicate-names-parsing">
<span id="io-dupe-names"></span><h3>Duplicate names parsing<a class="headerlink" href="#duplicate-names-parsing" title="Permalink to this headline">¶</a></h3>
<p>If the file or header contains duplicate names, pandas by default will deduplicate
these names so as to prevent data overwrite:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [53]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b,a</span><span class="se">\n</span><span class="s1">0,1,2</span><span class="se">\n</span><span class="s1">3,4,5&#39;</span>

<span class="gp">In [54]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gr">Out[54]: </span>
<span class="go">   a  b  a.1</span>
<span class="go">0  0  1    2</span>
<span class="go">1  3  4    5</span>
</pre></div>
</div>
<p>There is no more duplicate data because <code class="docutils literal"><span class="pre">mangle_dupe_cols=True</span></code> by default, which modifies
a series of duplicate columns &#8216;X&#8217;...&#8217;X&#8217; to become &#8216;X.0&#8217;...&#8217;X.N&#8217;.  If <code class="docutils literal"><span class="pre">mangle_dupe_cols</span>
<span class="pre">=False</span></code>, duplicate data can arise:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b,a</span><span class="se">\n</span><span class="s1">0,1,2</span><span class="se">\n</span><span class="s1">3,4,5&#39;</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">mangle_dupe_cols</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
   <span class="n">a</span>  <span class="n">b</span>  <span class="n">a</span>
<span class="mi">0</span>  <span class="mi">2</span>  <span class="mi">1</span>  <span class="mi">2</span>
<span class="mi">1</span>  <span class="mi">5</span>  <span class="mi">4</span>  <span class="mi">5</span>
</pre></div>
</div>
<p>To prevent users from encountering this problem with duplicate data, a <code class="docutils literal"><span class="pre">ValueError</span></code>
exception is raised if <code class="docutils literal"><span class="pre">mangle_dupe_cols</span> <span class="pre">!=</span> <span class="pre">True</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b,a</span><span class="se">\n</span><span class="s1">0,1,2</span><span class="se">\n</span><span class="s1">3,4,5&#39;</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">mangle_dupe_cols</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="o">...</span>
<span class="ne">ValueError</span><span class="p">:</span> <span class="n">Setting</span> <span class="n">mangle_dupe_cols</span><span class="o">=</span><span class="bp">False</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">supported</span> <span class="n">yet</span>
</pre></div>
</div>
<div class="section" id="filtering-columns-usecols">
<span id="io-usecols"></span><h4>Filtering columns (<code class="docutils literal"><span class="pre">usecols</span></code>)<a class="headerlink" href="#filtering-columns-usecols" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">usecols</span></code> argument allows you to select any subset of the columns in a
file, either using the column names or position numbers:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [55]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b,c,d</span><span class="se">\n</span><span class="s1">1,2,3,foo</span><span class="se">\n</span><span class="s1">4,5,6,bar</span><span class="se">\n</span><span class="s1">7,8,9,baz&#39;</span>

<span class="gp">In [56]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gr">Out[56]: </span>
<span class="go">   a  b  c    d</span>
<span class="go">0  1  2  3  foo</span>
<span class="go">1  4  5  6  bar</span>
<span class="go">2  7  8  9  baz</span>

<span class="gp">In [57]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])</span>
<span class="gr">Out[57]: </span>
<span class="go">   b    d</span>
<span class="go">0  2  foo</span>
<span class="go">1  5  bar</span>
<span class="go">2  8  baz</span>

<span class="gp">In [58]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gr">Out[58]: </span>
<span class="go">   a  c    d</span>
<span class="go">0  1  3  foo</span>
<span class="go">1  4  6  bar</span>
<span class="go">2  7  9  baz</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="comments-and-empty-lines">
<h3>Comments and Empty Lines<a class="headerlink" href="#comments-and-empty-lines" title="Permalink to this headline">¶</a></h3>
<div class="section" id="ignoring-line-comments-and-empty-lines">
<span id="io-skiplines"></span><h4>Ignoring line comments and empty lines<a class="headerlink" href="#ignoring-line-comments-and-empty-lines" title="Permalink to this headline">¶</a></h4>
<p>If the <code class="docutils literal"><span class="pre">comment</span></code> parameter is specified, then completely commented lines will
be ignored. By default, completely blank lines will be ignored as well. Both of
these are API changes introduced in version 0.15.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [59]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">a,b,c</span><span class="se">\n</span><span class="s1">  </span><span class="se">\n</span><span class="s1"># commented line</span><span class="se">\n</span><span class="s1">1,2,3</span><span class="se">\n\n</span><span class="s1">4,5,6&#39;</span>

<span class="gp">In [60]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="go">a,b,c</span>
<span class="go">  </span>
<span class="go">1,2,3</span>

<span class="go">4,5,6</span>

<span class="c"># commented line</span>
<span class="gp">In [61]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;#&#39;</span><span class="p">)</span>
<span class="gr">Out[61]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
</pre></div>
</div>
<p>If <code class="docutils literal"><span class="pre">skip_blank_lines=False</span></code>, then <code class="docutils literal"><span class="pre">read_csv</span></code> will not ignore blank lines:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [62]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b,c</span><span class="se">\n\n</span><span class="s1">1,2,3</span><span class="se">\n\n\n</span><span class="s1">4,5,6&#39;</span>

<span class="gp">In [63]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">skip_blank_lines</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gr">Out[63]: </span>
<span class="go">     a    b    c</span>
<span class="go">0  NaN  NaN  NaN</span>
<span class="go">1  1.0  2.0  3.0</span>
<span class="go">2  NaN  NaN  NaN</span>
<span class="go">3  NaN  NaN  NaN</span>
<span class="go">4  4.0  5.0  6.0</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>The presence of ignored lines might create ambiguities involving line numbers;
the parameter <code class="docutils literal"><span class="pre">header</span></code> uses row numbers (ignoring commented/empty
lines), while <code class="docutils literal"><span class="pre">skiprows</span></code> uses line numbers (including commented/empty lines):</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [64]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;#comment</span><span class="se">\n</span><span class="s1">a,b,c</span><span class="se">\n</span><span class="s1">A,B,C</span><span class="se">\n</span><span class="s1">1,2,3&#39;</span>

<span class="gp">In [65]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gr">Out[65]: </span>
<span class="go">   A  B  C</span>
<span class="go">0  1  2  3</span>

<span class="gp">In [66]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;A,B,C</span><span class="se">\n</span><span class="s1">#comment</span><span class="se">\n</span><span class="s1">a,b,c</span><span class="se">\n</span><span class="s1">1,2,3&#39;</span>

<span class="gp">In [67]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gr">Out[67]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
</pre></div>
</div>
<p>If both <code class="docutils literal"><span class="pre">header</span></code> and <code class="docutils literal"><span class="pre">skiprows</span></code> are specified, <code class="docutils literal"><span class="pre">header</span></code> will be
relative to the end of <code class="docutils literal"><span class="pre">skiprows</span></code>. For example:</p>
<div class="last highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [68]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;# empty</span><span class="se">\n</span><span class="s1"># second empty line</span><span class="se">\n</span><span class="s1"># third empty&#39;</span> \

<span class="gp">In [68]: </span><span class="s1">&#39;line</span><span class="se">\n</span><span class="s1">X,Y,Z</span><span class="se">\n</span><span class="s1">1,2,3</span><span class="se">\n</span><span class="s1">A,B,C</span><span class="se">\n</span><span class="s1">1,2.,4.</span><span class="se">\n</span><span class="s1">5.,NaN,10.0&#39;</span>

<span class="gp">In [69]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="c"># empty</span>
<span class="c"># second empty line</span>
<span class="c"># third emptyline</span>
<span class="go">X,Y,Z</span>
<span class="go">1,2,3</span>
<span class="go">A,B,C</span>
<span class="go">1,2.,4.</span>
<span class="go">5.,NaN,10.0</span>

<span class="gp">In [70]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gr">Out[70]: </span>
<span class="go">     A    B     C</span>
<span class="go">0  1.0  2.0   4.0</span>
<span class="go">1  5.0  NaN  10.0</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="comments">
<span id="io-comments"></span><h4>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h4>
<p>Sometimes comments or meta data may be included in a file:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [71]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">ID,level,category</span>
<span class="go">Patient1,123000,x # really unpleasant</span>
<span class="go">Patient2,23000,y # wouldn&#39;t take his medicine</span>
<span class="go">Patient3,1234018,z # awesome</span>
</pre></div>
</div>
<p>By default, the parser includes the comments in the output:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [72]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">)</span>

<span class="gp">In [73]: </span><span class="n">df</span>
<span class="gr">Out[73]: </span>
<span class="go">         ID    level                        category</span>
<span class="go">0  Patient1   123000           x # really unpleasant</span>
<span class="go">1  Patient2    23000  y # wouldn&#39;t take his medicine</span>
<span class="go">2  Patient3  1234018                     z # awesome</span>
</pre></div>
</div>
<p>We can suppress the comments using the <code class="docutils literal"><span class="pre">comment</span></code> keyword:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [74]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;#&#39;</span><span class="p">)</span>

<span class="gp">In [75]: </span><span class="n">df</span>
<span class="gr">Out[75]: </span>
<span class="go">         ID    level category</span>
<span class="go">0  Patient1   123000       x </span>
<span class="go">1  Patient2    23000       y </span>
<span class="go">2  Patient3  1234018       z </span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="dealing-with-unicode-data">
<span id="io-unicode"></span><h3>Dealing with Unicode Data<a class="headerlink" href="#dealing-with-unicode-data" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">encoding</span></code> argument should be used for encoded unicode data, which will
result in byte strings being decoded to unicode in the result:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [76]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">b</span><span class="s1">&#39;word,length</span><span class="se">\n</span><span class="s1">Tr</span><span class="se">\xc3\xa4</span><span class="s1">umen,7</span><span class="se">\n</span><span class="s1">Gr</span><span class="se">\xc3\xbc\xc3\x9f</span><span class="s1">e,5&#39;</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;latin-1&#39;</span><span class="p">)</span>

<span class="gp">In [77]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;latin-1&#39;</span><span class="p">)</span>

<span class="gp">In [78]: </span><span class="n">df</span>
<span class="gr">Out[78]: </span>
<span class="go">      word  length</span>
<span class="go">0  Träumen       7</span>
<span class="go">1    Grüße       5</span>

<span class="gp">In [79]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;word&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="gr">Out[79]: </span><span class="s1">u&#39;Gr</span><span class="se">\xfc\xdf</span><span class="s1">e&#39;</span>
</pre></div>
</div>
<p>Some formats which encode all characters as multiple bytes, like UTF-16, won&#8217;t
parse correctly at all without specifying the encoding. <a class="reference external" href="https://docs.python.org/3/library/codecs.html#standard-encodings">Full list of Python
standard encodings</a></p>
</div>
<div class="section" id="index-columns-and-trailing-delimiters">
<span id="io-index-col"></span><h3>Index columns and trailing delimiters<a class="headerlink" href="#index-columns-and-trailing-delimiters" title="Permalink to this headline">¶</a></h3>
<p>If a file has one more column of data than the number of column names, the
first column will be used as the DataFrame&#8217;s row names:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [80]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b,c</span><span class="se">\n</span><span class="s1">4,apple,bat,5.7</span><span class="se">\n</span><span class="s1">8,orange,cow,10&#39;</span>

<span class="gp">In [81]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gr">Out[81]: </span>
<span class="go">        a    b     c</span>
<span class="go">4   apple  bat   5.7</span>
<span class="go">8  orange  cow  10.0</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [82]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;index,a,b,c</span><span class="se">\n</span><span class="s1">4,apple,bat,5.7</span><span class="se">\n</span><span class="s1">8,orange,cow,10&#39;</span>

<span class="gp">In [83]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gr">Out[83]: </span>
<span class="go">            a    b     c</span>
<span class="go">index                   </span>
<span class="go">4       apple  bat   5.7</span>
<span class="go">8      orange  cow  10.0</span>
</pre></div>
</div>
<p>Ordinarily, you can achieve this behavior using the <code class="docutils literal"><span class="pre">index_col</span></code> option.</p>
<p>There are some exception cases when a file has been prepared with delimiters at
the end of each data line, confusing the parser. To explicitly disable the
index column inference and discard the last column, pass <code class="docutils literal"><span class="pre">index_col=False</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [84]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b,c</span><span class="se">\n</span><span class="s1">4,apple,bat,</span><span class="se">\n</span><span class="s1">8,orange,cow,&#39;</span>

<span class="gp">In [85]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">4,apple,bat,</span>
<span class="go">8,orange,cow,</span>

<span class="gp">In [86]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gr">Out[86]: </span>
<span class="go">        a    b   c</span>
<span class="go">4   apple  bat NaN</span>
<span class="go">8  orange  cow NaN</span>

<span class="gp">In [87]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gr">Out[87]: </span>
<span class="go">   a       b    c</span>
<span class="go">0  4   apple  bat</span>
<span class="go">1  8  orange  cow</span>
</pre></div>
</div>
</div>
<div class="section" id="date-handling">
<span id="io-parse-dates"></span><h3>Date Handling<a class="headerlink" href="#date-handling" title="Permalink to this headline">¶</a></h3>
<div class="section" id="specifying-date-columns">
<h4>Specifying Date Columns<a class="headerlink" href="#specifying-date-columns" title="Permalink to this headline">¶</a></h4>
<p>To better facilitate working with datetime data, <a class="reference internal" href="generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal"><span class="pre">read_csv()</span></code></a> and
<a class="reference internal" href="generated/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal"><span class="pre">read_table()</span></code></a> use the keyword arguments <code class="docutils literal"><span class="pre">parse_dates</span></code> and <code class="docutils literal"><span class="pre">date_parser</span></code>
to allow users to specify a variety of columns and date/time formats to turn the
input text data into <code class="docutils literal"><span class="pre">datetime</span></code> objects.</p>
<p>The simplest case is to just pass in <code class="docutils literal"><span class="pre">parse_dates=True</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="c"># Use a column as an index, and parse it as dates.</span>
<span class="gp">In [88]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;foo.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [89]: </span><span class="n">df</span>
<span class="gr">Out[89]: </span>
<span class="go">            A  B  C</span>
<span class="go">date               </span>
<span class="go">2009-01-01  a  1  2</span>
<span class="go">2009-01-02  b  3  4</span>
<span class="go">2009-01-03  c  4  5</span>

<span class="c"># These are python datetime objects</span>
<span class="gp">In [90]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span>
<span class="gr">Out[90]: </span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2009-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2009-01-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2009-01-03&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;datetime64[ns]&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">u&#39;date&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<p>It is often the case that we may want to store date and time data separately,
or store various date fields separately. the <code class="docutils literal"><span class="pre">parse_dates</span></code> keyword can be
used to specify a combination of columns to parse the dates and/or times from.</p>
<p>You can specify a list of column lists to <code class="docutils literal"><span class="pre">parse_dates</span></code>, the resulting date
columns will be prepended to the output (so as to not affect the existing column
order) and the new column names will be the concatenation of the component
column names:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [91]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">KORD,19990127, 19:00:00, 18:56:00, 0.8100</span>
<span class="go">KORD,19990127, 20:00:00, 19:56:00, 0.0100</span>
<span class="go">KORD,19990127, 21:00:00, 20:56:00, -0.5900</span>
<span class="go">KORD,19990127, 21:00:00, 21:18:00, -0.9900</span>
<span class="go">KORD,19990127, 22:00:00, 21:56:00, -0.5900</span>
<span class="go">KORD,19990127, 23:00:00, 22:56:00, -0.5900</span>

<span class="gp">In [92]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>

<span class="gp">In [93]: </span><span class="n">df</span>
<span class="gr">Out[93]: </span>
<span class="go">                  1_2                 1_3     0     4</span>
<span class="go">0 1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  0.81</span>
<span class="go">1 1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  0.01</span>
<span class="go">2 1999-01-27 21:00:00 1999-01-27 20:56:00  KORD -0.59</span>
<span class="go">3 1999-01-27 21:00:00 1999-01-27 21:18:00  KORD -0.99</span>
<span class="go">4 1999-01-27 22:00:00 1999-01-27 21:56:00  KORD -0.59</span>
<span class="go">5 1999-01-27 23:00:00 1999-01-27 22:56:00  KORD -0.59</span>
</pre></div>
</div>
<p>By default the parser removes the component date columns, but you can choose
to retain them via the <code class="docutils literal"><span class="pre">keep_date_col</span></code> keyword:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [94]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span>
<span class="gp">   ....:</span>                  <span class="n">keep_date_col</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">   ....:</span> 

<span class="gp">In [95]: </span><span class="n">df</span>
<span class="gr">Out[95]: </span>
<span class="go">                  1_2                 1_3     0         1          2  \</span>
<span class="go">0 1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  19990127   19:00:00   </span>
<span class="go">1 1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  19990127   20:00:00   </span>
<span class="go">2 1999-01-27 21:00:00 1999-01-27 20:56:00  KORD  19990127   21:00:00   </span>
<span class="go">3 1999-01-27 21:00:00 1999-01-27 21:18:00  KORD  19990127   21:00:00   </span>
<span class="go">4 1999-01-27 22:00:00 1999-01-27 21:56:00  KORD  19990127   22:00:00   </span>
<span class="go">5 1999-01-27 23:00:00 1999-01-27 22:56:00  KORD  19990127   23:00:00   </span>

<span class="go">           3     4  </span>
<span class="go">0   18:56:00  0.81  </span>
<span class="go">1   19:56:00  0.01  </span>
<span class="go">2   20:56:00 -0.59  </span>
<span class="go">3   21:18:00 -0.99  </span>
<span class="go">4   21:56:00 -0.59  </span>
<span class="go">5   22:56:00 -0.59  </span>
</pre></div>
</div>
<p>Note that if you wish to combine multiple columns into a single date column, a
nested list must be used. In other words, <code class="docutils literal"><span class="pre">parse_dates=[1,</span> <span class="pre">2]</span></code> indicates that
the second and third columns should each be parsed as separate date columns
while <code class="docutils literal"><span class="pre">parse_dates=[[1,</span> <span class="pre">2]]</span></code> means the two columns should be parsed into a
single column.</p>
<p>You can also use a dict to specify custom name columns:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [96]: </span><span class="n">date_spec</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;nominal&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;actual&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>

<span class="gp">In [97]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="n">date_spec</span><span class="p">)</span>

<span class="gp">In [98]: </span><span class="n">df</span>
<span class="gr">Out[98]: </span>
<span class="go">              nominal              actual     0     4</span>
<span class="go">0 1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  0.81</span>
<span class="go">1 1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  0.01</span>
<span class="go">2 1999-01-27 21:00:00 1999-01-27 20:56:00  KORD -0.59</span>
<span class="go">3 1999-01-27 21:00:00 1999-01-27 21:18:00  KORD -0.99</span>
<span class="go">4 1999-01-27 22:00:00 1999-01-27 21:56:00  KORD -0.59</span>
<span class="go">5 1999-01-27 23:00:00 1999-01-27 22:56:00  KORD -0.59</span>
</pre></div>
</div>
<p>It is important to remember that if multiple text columns are to be parsed into
a single date column, then a new column is prepended to the data. The <cite>index_col</cite>
specification is based off of this new set of columns rather than the original
data columns:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [99]: </span><span class="n">date_spec</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;nominal&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;actual&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>

<span class="gp">In [100]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="n">date_spec</span><span class="p">,</span>
<span class="gp">   .....:</span>                  <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1">#index is the nominal column</span>
<span class="gp">   .....:</span> 

<span class="gp">In [101]: </span><span class="n">df</span>
<span class="gr">Out[101]: </span>
<span class="go">                                 actual     0     4</span>
<span class="go">nominal                                            </span>
<span class="go">1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  0.81</span>
<span class="go">1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  0.01</span>
<span class="go">1999-01-27 21:00:00 1999-01-27 20:56:00  KORD -0.59</span>
<span class="go">1999-01-27 21:00:00 1999-01-27 21:18:00  KORD -0.99</span>
<span class="go">1999-01-27 22:00:00 1999-01-27 21:56:00  KORD -0.59</span>
<span class="go">1999-01-27 23:00:00 1999-01-27 22:56:00  KORD -0.59</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">read_csv has a fast_path for parsing datetime strings in iso8601 format,
e.g &#8220;2000-01-01T00:01:02+00:00&#8221; and similar variations. If you can arrange
for your data to store datetimes in this format, load times will be
significantly faster, ~20x has been observed.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When passing a dict as the <cite>parse_dates</cite> argument, the order of
the columns prepended is not guaranteed, because <cite>dict</cite> objects do not impose
an ordering on their keys. On Python 2.7+ you may use <cite>collections.OrderedDict</cite>
instead of a regular <cite>dict</cite> if this matters to you. Because of this, when using a
dict for &#8216;parse_dates&#8217; in conjunction with the <cite>index_col</cite> argument, it&#8217;s best to
specify <cite>index_col</cite> as a column label rather then as an index on the resulting frame.</p>
</div>
</div>
<div class="section" id="date-parsing-functions">
<h4>Date Parsing Functions<a class="headerlink" href="#date-parsing-functions" title="Permalink to this headline">¶</a></h4>
<p>Finally, the parser allows you to specify a custom <code class="docutils literal"><span class="pre">date_parser</span></code> function to
take full advantage of the flexibility of the date parsing API:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [102]: </span><span class="kn">import</span> <span class="nn">pandas.io.date_converters</span> <span class="kn">as</span> <span class="nn">conv</span>

<span class="gp">In [103]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="n">date_spec</span><span class="p">,</span>
<span class="gp">   .....:</span>                  <span class="n">date_parser</span><span class="o">=</span><span class="n">conv</span><span class="o">.</span><span class="n">parse_date_time</span><span class="p">)</span>
<span class="gp">   .....:</span> 

<span class="gp">In [104]: </span><span class="n">df</span>
<span class="gr">Out[104]: </span>
<span class="go">              nominal              actual     0     4</span>
<span class="go">0 1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  0.81</span>
<span class="go">1 1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  0.01</span>
<span class="go">2 1999-01-27 21:00:00 1999-01-27 20:56:00  KORD -0.59</span>
<span class="go">3 1999-01-27 21:00:00 1999-01-27 21:18:00  KORD -0.99</span>
<span class="go">4 1999-01-27 22:00:00 1999-01-27 21:56:00  KORD -0.59</span>
<span class="go">5 1999-01-27 23:00:00 1999-01-27 22:56:00  KORD -0.59</span>
</pre></div>
</div>
<p>Pandas will try to call the <code class="docutils literal"><span class="pre">date_parser</span></code> function in three different ways. If
an exception is raised, the next one is tried:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">date_parser</span></code> is first called with one or more arrays as arguments,
as defined using <cite>parse_dates</cite> (e.g., <code class="docutils literal"><span class="pre">date_parser(['2013',</span> <span class="pre">'2013'],</span> <span class="pre">['1',</span> <span class="pre">'2'])</span></code>)</li>
<li>If #1 fails, <code class="docutils literal"><span class="pre">date_parser</span></code> is called with all the columns
concatenated row-wise into a single array (e.g., <code class="docutils literal"><span class="pre">date_parser(['2013</span> <span class="pre">1',</span> <span class="pre">'2013</span> <span class="pre">2'])</span></code>)</li>
<li>If #2 fails, <code class="docutils literal"><span class="pre">date_parser</span></code> is called once for every row with one or more
string arguments from the columns indicated with <cite>parse_dates</cite>
(e.g., <code class="docutils literal"><span class="pre">date_parser('2013',</span> <span class="pre">'1')</span></code> for the first row, <code class="docutils literal"><span class="pre">date_parser('2013',</span> <span class="pre">'2')</span></code>
for the second, etc.)</li>
</ol>
<p>Note that performance-wise, you should try these methods of parsing dates in order:</p>
<ol class="arabic simple">
<li>Try to infer the format using <code class="docutils literal"><span class="pre">infer_datetime_format=True</span></code> (see section below)</li>
<li>If you know the format, use <code class="docutils literal"><span class="pre">pd.to_datetime()</span></code>:
<code class="docutils literal"><span class="pre">date_parser=lambda</span> <span class="pre">x:</span> <span class="pre">pd.to_datetime(x,</span> <span class="pre">format=...)</span></code></li>
<li>If you have a really non-standard format, use a custom <code class="docutils literal"><span class="pre">date_parser</span></code> function.
For optimal performance, this should be vectorized, i.e., it should accept arrays
as arguments.</li>
</ol>
<p>You can explore the date parsing functionality in <code class="docutils literal"><span class="pre">date_converters.py</span></code> and
add your own. We would love to turn this module into a community supported set
of date/time parsers. To get you started, <code class="docutils literal"><span class="pre">date_converters.py</span></code> contains
functions to parse dual date and time columns, year/month/day columns,
and year/month/day/hour/minute/second columns. It also contains a
<code class="docutils literal"><span class="pre">generic_parser</span></code> function so you can curry it with a function that deals with
a single date rather than the entire array.</p>
</div>
<div class="section" id="inferring-datetime-format">
<span id="io-dayfirst"></span><h4>Inferring Datetime Format<a class="headerlink" href="#inferring-datetime-format" title="Permalink to this headline">¶</a></h4>
<p>If you have <code class="docutils literal"><span class="pre">parse_dates</span></code> enabled for some or all of your columns, and your
datetime strings are all formatted the same way, you may get a large speed
up by setting <code class="docutils literal"><span class="pre">infer_datetime_format=True</span></code>.  If set, pandas will attempt
to guess the format of your datetime strings, and then use a faster means
of parsing the strings.  5-10x parsing speeds have been observed.  pandas
will fallback to the usual parsing if either the format cannot be guessed
or the format that was guessed cannot properly parse the entire column
of strings.  So in general, <code class="docutils literal"><span class="pre">infer_datetime_format</span></code> should not have any
negative consequences if enabled.</p>
<p>Here are some examples of datetime strings that can be guessed (All
representing December 30th, 2011 at 00:00:00)</p>
<ul class="simple">
<li>&#8220;20111230&#8221;</li>
<li>&#8220;2011/12/30&#8221;</li>
<li>&#8220;20111230 00:00:00&#8221;</li>
<li>&#8220;12/30/2011 00:00:00&#8221;</li>
<li>&#8220;30/Dec/2011 00:00:00&#8221;</li>
<li>&#8220;30/December/2011 00:00:00&#8221;</li>
</ul>
<p><code class="docutils literal"><span class="pre">infer_datetime_format</span></code> is sensitive to <code class="docutils literal"><span class="pre">dayfirst</span></code>.  With
<code class="docutils literal"><span class="pre">dayfirst=True</span></code>, it will guess &#8220;01/12/2011&#8221; to be December 1st. With
<code class="docutils literal"><span class="pre">dayfirst=False</span></code> (default) it will guess &#8220;01/12/2011&#8221; to be January 12th.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="c"># Try to infer the format for the index column</span>
<span class="gp">In [105]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;foo.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="gp">   .....:</span>                  <span class="n">infer_datetime_format</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">   .....:</span> 

<span class="gp">In [106]: </span><span class="n">df</span>
<span class="gr">Out[106]: </span>
<span class="go">            A  B  C</span>
<span class="go">date               </span>
<span class="go">2009-01-01  a  1  2</span>
<span class="go">2009-01-02  b  3  4</span>
<span class="go">2009-01-03  c  4  5</span>
</pre></div>
</div>
</div>
<div class="section" id="international-date-formats">
<h4>International Date Formats<a class="headerlink" href="#international-date-formats" title="Permalink to this headline">¶</a></h4>
<p>While US date formats tend to be MM/DD/YYYY, many international formats use
DD/MM/YYYY instead. For convenience, a <code class="docutils literal"><span class="pre">dayfirst</span></code> keyword is provided:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [107]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">date,value,cat</span>
<span class="go">1/6/2000,5,a</span>
<span class="go">2/6/2000,10,b</span>
<span class="go">3/6/2000,15,c</span>

<span class="gp">In [108]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gr">Out[108]: </span>
<span class="go">        date  value cat</span>
<span class="go">0 2000-01-06      5   a</span>
<span class="go">1 2000-02-06     10   b</span>
<span class="go">2 2000-03-06     15   c</span>

<span class="gp">In [109]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">dayfirst</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gr">Out[109]: </span>
<span class="go">        date  value cat</span>
<span class="go">0 2000-06-01      5   a</span>
<span class="go">1 2000-06-02     10   b</span>
<span class="go">2 2000-06-03     15   c</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="specifying-method-for-floating-point-conversion">
<span id="io-float-precision"></span><h3>Specifying method for floating-point conversion<a class="headerlink" href="#specifying-method-for-floating-point-conversion" title="Permalink to this headline">¶</a></h3>
<p>The parameter <code class="docutils literal"><span class="pre">float_precision</span></code> can be specified in order to use
a specific floating-point converter during parsing with the C engine.
The options are the ordinary converter, the high-precision converter, and
the round-trip converter (which is guaranteed to round-trip values after
writing to a file). For example:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [110]: </span><span class="n">val</span> <span class="o">=</span> <span class="s1">&#39;0.3066101993807095471566981359501369297504425048828125&#39;</span>

<span class="gp">In [111]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b,c</span><span class="se">\n</span><span class="s1">1,2,{0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<span class="gp">In [112]: </span><span class="nb">abs</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="n">float_precision</span><span class="o">=</span><span class="bp">None</span><span class="p">)[</span><span class="s1">&#39;c&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
<span class="gr">Out[112]: </span><span class="mf">1.1102230246251565e-16</span>

<span class="gp">In [113]: </span><span class="nb">abs</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="n">float_precision</span><span class="o">=</span><span class="s1">&#39;high&#39;</span><span class="p">)[</span><span class="s1">&#39;c&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
<span class="gr">Out[113]: </span><span class="mf">5.5511151231257827e-17</span>

<span class="gp">In [114]: </span><span class="nb">abs</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="n">float_precision</span><span class="o">=</span><span class="s1">&#39;round_trip&#39;</span><span class="p">)[</span><span class="s1">&#39;c&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
<span class="gr">Out[114]: </span><span class="mf">0.0</span>
</pre></div>
</div>
</div>
<div class="section" id="thousand-separators">
<span id="io-thousands"></span><h3>Thousand Separators<a class="headerlink" href="#thousand-separators" title="Permalink to this headline">¶</a></h3>
<p>For large numbers that have been written with a thousands separator, you can
set the <code class="docutils literal"><span class="pre">thousands</span></code> keyword to a string of length 1 so that integers will be parsed
correctly:</p>
<p>By default, numbers with a thousands separator will be parsed as strings</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [115]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">ID|level|category</span>
<span class="go">Patient1|123,000|x</span>
<span class="go">Patient2|23,000|y</span>
<span class="go">Patient3|1,234,018|z</span>

<span class="gp">In [116]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;|&#39;</span><span class="p">)</span>

<span class="gp">In [117]: </span><span class="n">df</span>
<span class="gr">Out[117]: </span>
<span class="go">         ID      level category</span>
<span class="go">0  Patient1    123,000        x</span>
<span class="go">1  Patient2     23,000        y</span>
<span class="go">2  Patient3  1,234,018        z</span>

<span class="gp">In [118]: </span><span class="n">df</span><span class="o">.</span><span class="n">level</span><span class="o">.</span><span class="n">dtype</span>
<span class="gr">Out[118]: </span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;O&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">thousands</span></code> keyword allows integers to be parsed correctly</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [119]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">ID|level|category</span>
<span class="go">Patient1|123,000|x</span>
<span class="go">Patient2|23,000|y</span>
<span class="go">Patient3|1,234,018|z</span>

<span class="gp">In [120]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;|&#39;</span><span class="p">,</span> <span class="n">thousands</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

<span class="gp">In [121]: </span><span class="n">df</span>
<span class="gr">Out[121]: </span>
<span class="go">         ID    level category</span>
<span class="go">0  Patient1   123000        x</span>
<span class="go">1  Patient2    23000        y</span>
<span class="go">2  Patient3  1234018        z</span>

<span class="gp">In [122]: </span><span class="n">df</span><span class="o">.</span><span class="n">level</span><span class="o">.</span><span class="n">dtype</span>
<span class="gr">Out[122]: </span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;int64&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="na-values">
<span id="io-na-values"></span><h3>NA Values<a class="headerlink" href="#na-values" title="Permalink to this headline">¶</a></h3>
<p>To control which values are parsed as missing values (which are signified by <code class="docutils literal"><span class="pre">NaN</span></code>), specifiy a
string in <code class="docutils literal"><span class="pre">na_values</span></code>. If you specify a list of strings, then all values in
it are considered to be missing values. If you specify a number (a <code class="docutils literal"><span class="pre">float</span></code>, like <code class="docutils literal"><span class="pre">5.0</span></code> or an <code class="docutils literal"><span class="pre">integer</span></code> like <code class="docutils literal"><span class="pre">5</span></code>),
the corresponding equivalent values will also imply a missing value (in this case effectively
<code class="docutils literal"><span class="pre">[5.0,5]</span></code> are recognized as <code class="docutils literal"><span class="pre">NaN</span></code>.</p>
<p>To completely override the default values that are recognized as missing, specify <code class="docutils literal"><span class="pre">keep_default_na=False</span></code>.
The default <code class="docutils literal"><span class="pre">NaN</span></code> recognized values are <code class="docutils literal"><span class="pre">['-1.#IND',</span> <span class="pre">'1.#QNAN',</span> <span class="pre">'1.#IND',</span> <span class="pre">'-1.#QNAN',</span> <span class="pre">'#N/A','N/A',</span> <span class="pre">'NA',</span>
<span class="pre">'#NA',</span> <span class="pre">'NULL',</span> <span class="pre">'NaN',</span> <span class="pre">'-NaN',</span> <span class="pre">'nan',</span> <span class="pre">'-nan']</span></code>. Although a 0-length string
<code class="docutils literal"><span class="pre">''</span></code> is not included in the default <code class="docutils literal"><span class="pre">NaN</span></code> values list, it is still treated
as a missing value.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<p>the default values, in addition to <code class="docutils literal"><span class="pre">5</span></code> , <code class="docutils literal"><span class="pre">5.0</span></code> when interpreted as numbers are recognized as <code class="docutils literal"><span class="pre">NaN</span></code></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">keep_default_na</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>only an empty field will be <code class="docutils literal"><span class="pre">NaN</span></code></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">keep_default_na</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;NA&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>only <code class="docutils literal"><span class="pre">NA</span></code> and <code class="docutils literal"><span class="pre">0</span></code> as strings are <code class="docutils literal"><span class="pre">NaN</span></code></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Nope&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>the default values, in addition to the string <code class="docutils literal"><span class="pre">&quot;Nope&quot;</span></code> are recognized as <code class="docutils literal"><span class="pre">NaN</span></code></p>
</div>
<div class="section" id="infinity">
<span id="io-infinity"></span><h3>Infinity<a class="headerlink" href="#infinity" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">inf</span></code> like values will be parsed as <code class="docutils literal"><span class="pre">np.inf</span></code> (positive infinity), and <code class="docutils literal"><span class="pre">-inf</span></code> as <code class="docutils literal"><span class="pre">-np.inf</span></code> (negative infinity).
These will ignore the case of the value, meaning <code class="docutils literal"><span class="pre">Inf</span></code>, will also be parsed as <code class="docutils literal"><span class="pre">np.inf</span></code>.</p>
</div>
<div class="section" id="returning-series">
<h3>Returning Series<a class="headerlink" href="#returning-series" title="Permalink to this headline">¶</a></h3>
<p>Using the <code class="docutils literal"><span class="pre">squeeze</span></code> keyword, the parser will return output with a single column
as a <code class="docutils literal"><span class="pre">Series</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [123]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">level</span>
<span class="go">Patient1,123000</span>
<span class="go">Patient2,23000</span>
<span class="go">Patient3,1234018</span>

<span class="gp">In [124]: </span><span class="n">output</span> <span class="o">=</span>  <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">squeeze</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [125]: </span><span class="n">output</span>
<span class="gr">Out[125]: </span>
<span class="go">Patient1     123000</span>
<span class="go">Patient2      23000</span>
<span class="go">Patient3    1234018</span>
<span class="go">Name: level, dtype: int64</span>

<span class="gp">In [126]: </span><span class="nb">type</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
<span class="gr">Out[126]: </span><span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span>
</pre></div>
</div>
</div>
<div class="section" id="boolean-values">
<span id="io-boolean"></span><h3>Boolean values<a class="headerlink" href="#boolean-values" title="Permalink to this headline">¶</a></h3>
<p>The common values <code class="docutils literal"><span class="pre">True</span></code>, <code class="docutils literal"><span class="pre">False</span></code>, <code class="docutils literal"><span class="pre">TRUE</span></code>, and <code class="docutils literal"><span class="pre">FALSE</span></code> are all
recognized as boolean. Sometime you would want to recognize some other values
as being boolean. To do this use the <code class="docutils literal"><span class="pre">true_values</span></code> and <code class="docutils literal"><span class="pre">false_values</span></code>
options:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [127]: </span><span class="n">data</span><span class="o">=</span> <span class="s1">&#39;a,b,c</span><span class="se">\n</span><span class="s1">1,Yes,2</span><span class="se">\n</span><span class="s1">3,No,4&#39;</span>

<span class="gp">In [128]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">1,Yes,2</span>
<span class="go">3,No,4</span>

<span class="gp">In [129]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gr">Out[129]: </span>
<span class="go">   a    b  c</span>
<span class="go">0  1  Yes  2</span>
<span class="go">1  3   No  4</span>

<span class="gp">In [130]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">true_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Yes&#39;</span><span class="p">],</span> <span class="n">false_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;No&#39;</span><span class="p">])</span>
<span class="gr">Out[130]: </span>
<span class="go">   a      b  c</span>
<span class="go">0  1   True  2</span>
<span class="go">1  3  False  4</span>
</pre></div>
</div>
</div>
<div class="section" id="handling-bad-lines">
<span id="io-bad-lines"></span><h3>Handling &#8220;bad&#8221; lines<a class="headerlink" href="#handling-bad-lines" title="Permalink to this headline">¶</a></h3>
<p>Some files may have malformed lines with too few fields or too many. Lines with
too few fields will have NA values filled in the trailing fields. Lines with
too many will cause an error by default:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [27]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b,c</span><span class="se">\n</span><span class="s1">1,2,3</span><span class="se">\n</span><span class="s1">4,5,6,7</span><span class="se">\n</span><span class="s1">8,9,10&#39;</span>

<span class="gp">In [28]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="go">---------------------------------------------------------------------------</span>
<span class="go">CParserError                              Traceback (most recent call last)</span>
<span class="go">CParserError: Error tokenizing data. C error: Expected 3 fields in line 3, saw 4</span>
</pre></div>
</div>
<p>You can elect to skip bad lines:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [29]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">error_bad_lines</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">Skipping line 3: expected 3 fields, saw 4</span>

<span class="go">Out[29]:</span>
<span class="go">   a  b   c</span>
<span class="go">0  1  2   3</span>
<span class="go">1  8  9  10</span>
</pre></div>
</div>
</div>
<div class="section" id="quoting-and-escape-characters">
<span id="io-quoting"></span><h3>Quoting and Escape Characters<a class="headerlink" href="#quoting-and-escape-characters" title="Permalink to this headline">¶</a></h3>
<p>Quotes (and other escape characters) in embedded fields can be handled in any
number of ways. One way is to use backslashes; to properly parse this data, you
should pass the <code class="docutils literal"><span class="pre">escapechar</span></code> option:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [131]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b</span><span class="se">\n</span><span class="s1">&quot;hello, </span><span class="se">\\</span><span class="s1">&quot;Bob</span><span class="se">\\</span><span class="s1">&quot;, nice to see you&quot;,5&#39;</span>

<span class="gp">In [132]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b</span>
<span class="go">&quot;hello, \&quot;Bob\&quot;, nice to see you&quot;,5</span>

<span class="gp">In [133]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">escapechar</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gr">Out[133]: </span>
<span class="go">                               a  b</span>
<span class="go">0  hello, &quot;Bob&quot;, nice to see you  5</span>
</pre></div>
</div>
</div>
<div class="section" id="files-with-fixed-width-columns">
<span id="io-fwf"></span><h3>Files with Fixed Width Columns<a class="headerlink" href="#files-with-fixed-width-columns" title="Permalink to this headline">¶</a></h3>
<p>While <code class="docutils literal"><span class="pre">read_csv</span></code> reads delimited data, the <a class="reference internal" href="generated/pandas.read_fwf.html#pandas.read_fwf" title="pandas.read_fwf"><code class="xref py py-func docutils literal"><span class="pre">read_fwf()</span></code></a> function works
with data files that have known and fixed column widths. The function parameters
to <code class="docutils literal"><span class="pre">read_fwf</span></code> are largely the same as <cite>read_csv</cite> with two extra parameters:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">colspecs</span></code>: A list of pairs (tuples) giving the extents of the
fixed-width fields of each line as half-open intervals (i.e.,  [from, to[ ).
String value &#8216;infer&#8217; can be used to instruct the parser to try detecting
the column specifications from the first 100 rows of the data. Default
behaviour, if not specified, is to infer.</li>
<li><code class="docutils literal"><span class="pre">widths</span></code>: A list of field widths which can be used instead of &#8216;colspecs&#8217;
if the intervals are contiguous.</li>
</ul>
</div></blockquote>
<p>Consider a typical fixed-width data file:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [134]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;bar.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">id8141    360.242940   149.910199   11950.7</span>
<span class="go">id1594    444.953632   166.985655   11788.4</span>
<span class="go">id1849    364.136849   183.628767   11806.2</span>
<span class="go">id1230    413.836124   184.375703   11916.8</span>
<span class="go">id1948    502.953953   173.237159   12468.3</span>
</pre></div>
</div>
<p>In order to parse this file into a DataFrame, we simply need to supply the
column specifications to the <cite>read_fwf</cite> function along with the file name:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="c">#Column specifications are a list of half-intervals</span>
<span class="gp">In [135]: </span><span class="n">colspecs</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="mi">33</span><span class="p">),</span> <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">43</span><span class="p">)]</span>

<span class="gp">In [136]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="s1">&#39;bar.csv&#39;</span><span class="p">,</span> <span class="n">colspecs</span><span class="o">=</span><span class="n">colspecs</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="gp">In [137]: </span><span class="n">df</span>
<span class="gr">Out[137]: </span>
<span class="go">                 1           2        3</span>
<span class="go">0                                      </span>
<span class="go">id8141  360.242940  149.910199  11950.7</span>
<span class="go">id1594  444.953632  166.985655  11788.4</span>
<span class="go">id1849  364.136849  183.628767  11806.2</span>
<span class="go">id1230  413.836124  184.375703  11916.8</span>
<span class="go">id1948  502.953953  173.237159  12468.3</span>
</pre></div>
</div>
<p>Note how the parser automatically picks column names X.&lt;column number&gt; when
<code class="docutils literal"><span class="pre">header=None</span></code> argument is specified. Alternatively, you can supply just the
column widths for contiguous columns:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="c">#Widths are a list of integers</span>
<span class="gp">In [138]: </span><span class="n">widths</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="gp">In [139]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="s1">&#39;bar.csv&#39;</span><span class="p">,</span> <span class="n">widths</span><span class="o">=</span><span class="n">widths</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="gp">In [140]: </span><span class="n">df</span>
<span class="gr">Out[140]: </span>
<span class="go">        0           1           2        3</span>
<span class="go">0  id8141  360.242940  149.910199  11950.7</span>
<span class="go">1  id1594  444.953632  166.985655  11788.4</span>
<span class="go">2  id1849  364.136849  183.628767  11806.2</span>
<span class="go">3  id1230  413.836124  184.375703  11916.8</span>
<span class="go">4  id1948  502.953953  173.237159  12468.3</span>
</pre></div>
</div>
<p>The parser will take care of extra white spaces around the columns
so it&#8217;s ok to have extra separation between the columns in the file.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.13.0.</span></p>
</div>
<p>By default, <code class="docutils literal"><span class="pre">read_fwf</span></code> will try to infer the file&#8217;s <code class="docutils literal"><span class="pre">colspecs</span></code> by using the
first 100 rows of the file. It can do it only in cases when the columns are
aligned and correctly separated by the provided <code class="docutils literal"><span class="pre">delimiter</span></code> (default delimiter
is whitespace).</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [141]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="s1">&#39;bar.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="gp">In [142]: </span><span class="n">df</span>
<span class="gr">Out[142]: </span>
<span class="go">                 1           2        3</span>
<span class="go">0                                      </span>
<span class="go">id8141  360.242940  149.910199  11950.7</span>
<span class="go">id1594  444.953632  166.985655  11788.4</span>
<span class="go">id1849  364.136849  183.628767  11806.2</span>
<span class="go">id1230  413.836124  184.375703  11916.8</span>
<span class="go">id1948  502.953953  173.237159  12468.3</span>
</pre></div>
</div>
</div>
<div class="section" id="indexes">
<h3>Indexes<a class="headerlink" href="#indexes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="files-with-an-implicit-index-column">
<h4>Files with an &#8220;implicit&#8221; index column<a class="headerlink" href="#files-with-an-implicit-index-column" title="Permalink to this headline">¶</a></h4>
<p>Consider a file with one less entry in the header than the number of data
column:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [143]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;foo.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">A,B,C</span>
<span class="go">20090101,a,1,2</span>
<span class="go">20090102,b,3,4</span>
<span class="go">20090103,c,4,5</span>
</pre></div>
</div>
<p>In this special case, <code class="docutils literal"><span class="pre">read_csv</span></code> assumes that the first column is to be used
as the index of the DataFrame:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [144]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;foo.csv&#39;</span><span class="p">)</span>
<span class="gr">Out[144]: </span>
<span class="go">          A  B  C</span>
<span class="go">20090101  a  1  2</span>
<span class="go">20090102  b  3  4</span>
<span class="go">20090103  c  4  5</span>
</pre></div>
</div>
<p>Note that the dates weren&#8217;t automatically parsed. In that case you would need
to do as before:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [145]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;foo.csv&#39;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [146]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span>
<span class="gr">Out[146]: </span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2009-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2009-01-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2009-01-03&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;datetime64[ns]&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="reading-an-index-with-a-multiindex">
<h4>Reading an index with a <code class="docutils literal"><span class="pre">MultiIndex</span></code><a class="headerlink" href="#reading-an-index-with-a-multiindex" title="Permalink to this headline">¶</a></h4>
<p id="io-csv-multiindex">Suppose you have data indexed by two columns:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [147]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data/mindex_ex.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">year,indiv,zit,xit</span>
<span class="go">1977,&quot;A&quot;,1.2,.6</span>
<span class="go">1977,&quot;B&quot;,1.5,.5</span>
<span class="go">1977,&quot;C&quot;,1.7,.8</span>
<span class="go">1978,&quot;A&quot;,.2,.06</span>
<span class="go">1978,&quot;B&quot;,.7,.2</span>
<span class="go">1978,&quot;C&quot;,.8,.3</span>
<span class="go">1978,&quot;D&quot;,.9,.5</span>
<span class="go">1978,&quot;E&quot;,1.4,.9</span>
<span class="go">1979,&quot;C&quot;,.2,.15</span>
<span class="go">1979,&quot;D&quot;,.14,.05</span>
<span class="go">1979,&quot;E&quot;,.5,.15</span>
<span class="go">1979,&quot;F&quot;,1.2,.5</span>
<span class="go">1979,&quot;G&quot;,3.4,1.9</span>
<span class="go">1979,&quot;H&quot;,5.4,2.7</span>
<span class="go">1979,&quot;I&quot;,6.4,1.2</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">index_col</span></code> argument to <code class="docutils literal"><span class="pre">read_csv</span></code> and <code class="docutils literal"><span class="pre">read_table</span></code> can take a list of
column numbers to turn multiple columns into a <code class="docutils literal"><span class="pre">MultiIndex</span></code> for the index of the
returned object:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [148]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;data/mindex_ex.csv&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

<span class="gp">In [149]: </span><span class="n">df</span>
<span class="gr">Out[149]: </span>
<span class="go">             zit   xit</span>
<span class="go">year indiv            </span>
<span class="go">1977 A      1.20  0.60</span>
<span class="go">     B      1.50  0.50</span>
<span class="go">     C      1.70  0.80</span>
<span class="go">1978 A      0.20  0.06</span>
<span class="go">     B      0.70  0.20</span>
<span class="go">     C      0.80  0.30</span>
<span class="go">     D      0.90  0.50</span>
<span class="go">     E      1.40  0.90</span>
<span class="go">1979 C      0.20  0.15</span>
<span class="go">     D      0.14  0.05</span>
<span class="go">     E      0.50  0.15</span>
<span class="go">     F      1.20  0.50</span>
<span class="go">     G      3.40  1.90</span>
<span class="go">     H      5.40  2.70</span>
<span class="go">     I      6.40  1.20</span>

<span class="gp">In [150]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">1978</span><span class="p">]</span>
<span class="gr">Out[150]: </span>
<span class="go">       zit   xit</span>
<span class="go">indiv           </span>
<span class="go">A      0.2  0.06</span>
<span class="go">B      0.7  0.20</span>
<span class="go">C      0.8  0.30</span>
<span class="go">D      0.9  0.50</span>
<span class="go">E      1.4  0.90</span>
</pre></div>
</div>
</div>
<div class="section" id="reading-columns-with-a-multiindex">
<span id="io-multi-index-columns"></span><h4>Reading columns with a <code class="docutils literal"><span class="pre">MultiIndex</span></code><a class="headerlink" href="#reading-columns-with-a-multiindex" title="Permalink to this headline">¶</a></h4>
<p>By specifying list of row locations for the <code class="docutils literal"><span class="pre">header</span></code> argument, you
can read in a <code class="docutils literal"><span class="pre">MultiIndex</span></code> for the columns. Specifying non-consecutive
rows will skip the intervening rows. In order to have the pre-0.13 behavior
of tupleizing columns, specify <code class="docutils literal"><span class="pre">tupleize_cols=True</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [151]: </span><span class="kn">from</span> <span class="nn">pandas.util.testing</span> <span class="kn">import</span> <span class="n">makeCustomDataframe</span> <span class="k">as</span> <span class="n">mkdf</span>

<span class="gp">In [152]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">mkdf</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">r_idx_nlevels</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">c_idx_nlevels</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="gp">In [153]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;mi.csv&#39;</span><span class="p">)</span>

<span class="gp">In [154]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;mi.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">C0,,C_l0_g0,C_l0_g1,C_l0_g2</span>
<span class="go">C1,,C_l1_g0,C_l1_g1,C_l1_g2</span>
<span class="go">C2,,C_l2_g0,C_l2_g1,C_l2_g2</span>
<span class="go">C3,,C_l3_g0,C_l3_g1,C_l3_g2</span>
<span class="go">R0,R1,,,</span>
<span class="go">R_l0_g0,R_l1_g0,R0C0,R0C1,R0C2</span>
<span class="go">R_l0_g1,R_l1_g1,R1C0,R1C1,R1C2</span>
<span class="go">R_l0_g2,R_l1_g2,R2C0,R2C1,R2C2</span>
<span class="go">R_l0_g3,R_l1_g3,R3C0,R3C1,R3C2</span>
<span class="go">R_l0_g4,R_l1_g4,R4C0,R4C1,R4C2</span>


<span class="gp">In [155]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;mi.csv&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gr">Out[155]: </span>
<span class="go">C0              C_l0_g0 C_l0_g1 C_l0_g2</span>
<span class="go">C1              C_l1_g0 C_l1_g1 C_l1_g2</span>
<span class="go">C2              C_l2_g0 C_l2_g1 C_l2_g2</span>
<span class="go">C3              C_l3_g0 C_l3_g1 C_l3_g2</span>
<span class="go">R0      R1                             </span>
<span class="go">R_l0_g0 R_l1_g0    R0C0    R0C1    R0C2</span>
<span class="go">R_l0_g1 R_l1_g1    R1C0    R1C1    R1C2</span>
<span class="go">R_l0_g2 R_l1_g2    R2C0    R2C1    R2C2</span>
<span class="go">R_l0_g3 R_l1_g3    R3C0    R3C1    R3C2</span>
<span class="go">R_l0_g4 R_l1_g4    R4C0    R4C1    R4C2</span>
</pre></div>
</div>
<p>Starting in 0.13.0, <code class="docutils literal"><span class="pre">read_csv</span></code> will be able to interpret a more common format
of multi-columns indices.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [156]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;mi2.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">,a,a,a,b,c,c</span>
<span class="go">,q,r,s,t,u,v</span>
<span class="go">one,1,2,3,4,5,6</span>
<span class="go">two,7,8,9,10,11,12</span>

<span class="gp">In [157]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;mi2.csv&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gr">Out[157]: </span>
<span class="go">     a         b   c    </span>
<span class="go">     q  r  s   t   u   v</span>
<span class="go">one  1  2  3   4   5   6</span>
<span class="go">two  7  8  9  10  11  12</span>
</pre></div>
</div>
<p>Note: If an <code class="docutils literal"><span class="pre">index_col</span></code> is not specified (e.g. you don&#8217;t have an index, or wrote it
with <code class="docutils literal"><span class="pre">df.to_csv(...,</span> <span class="pre">index=False</span></code>), then any <code class="docutils literal"><span class="pre">names</span></code> on the columns index will be <em>lost</em>.</p>
</div>
</div>
<div class="section" id="automatically-sniffing-the-delimiter">
<span id="io-sniff"></span><h3>Automatically &#8220;sniffing&#8221; the delimiter<a class="headerlink" href="#automatically-sniffing-the-delimiter" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">read_csv</span></code> is capable of inferring delimited (not necessarily
comma-separated) files, as pandas uses the <a class="reference external" href="https://docs.python.org/3/library/csv.html#csv.Sniffer" title="(in Python v3.6)"><code class="docutils literal"><span class="pre">csv.Sniffer</span></code></a>
class of the csv module. For this, you have to specify <code class="docutils literal"><span class="pre">sep=None</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [158]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;tmp2.sv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">:0:1:2:3</span>
<span class="go">0:0.469112299907:-0.282863344329:-1.50905850317:-1.13563237102</span>
<span class="go">1:1.21211202502:-0.173214649053:0.119208711297:-1.04423596628</span>
<span class="go">2:-0.861848963348:-2.10456921889:-0.494929274069:1.07180380704</span>
<span class="go">3:0.721555162244:-0.70677113363:-1.03957498511:0.271859885543</span>
<span class="go">4:-0.424972329789:0.567020349794:0.276232019278:-1.08740069129</span>
<span class="go">5:-0.673689708088:0.113648409689:-1.47842655244:0.524987667115</span>
<span class="go">6:0.40470521868:0.57704598592:-1.71500201611:-1.03926848351</span>
<span class="go">7:-0.370646858236:-1.15789225064:-1.34431181273:0.844885141425</span>
<span class="go">8:1.07576978372:-0.10904997528:1.64356307036:-1.46938795954</span>
<span class="go">9:0.357020564133:-0.67460010373:-1.77690371697:-0.968913812447</span>


<span class="gp">In [159]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;tmp2.sv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="p">)</span>
<span class="gr">Out[159]: </span>
<span class="go">   Unnamed: 0         0         1         2         3</span>
<span class="go">0           0  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="go">1           1  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="go">2           2 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="go">3           3  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="go">4           4 -0.424972  0.567020  0.276232 -1.087401</span>
<span class="go">5           5 -0.673690  0.113648 -1.478427  0.524988</span>
<span class="go">6           6  0.404705  0.577046 -1.715002 -1.039268</span>
<span class="go">7           7 -0.370647 -1.157892 -1.344312  0.844885</span>
<span class="go">8           8  1.075770 -0.109050  1.643563 -1.469388</span>
<span class="go">9           9  0.357021 -0.674600 -1.776904 -0.968914</span>
</pre></div>
</div>
</div>
<div class="section" id="iterating-through-files-chunk-by-chunk">
<span id="io-chunking"></span><h3>Iterating through files chunk by chunk<a class="headerlink" href="#iterating-through-files-chunk-by-chunk" title="Permalink to this headline">¶</a></h3>
<p>Suppose you wish to iterate through a (potentially very large) file lazily
rather than reading the entire file into memory, such as the following:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [160]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;tmp.sv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">|0|1|2|3</span>
<span class="go">0|0.469112299907|-0.282863344329|-1.50905850317|-1.13563237102</span>
<span class="go">1|1.21211202502|-0.173214649053|0.119208711297|-1.04423596628</span>
<span class="go">2|-0.861848963348|-2.10456921889|-0.494929274069|1.07180380704</span>
<span class="go">3|0.721555162244|-0.70677113363|-1.03957498511|0.271859885543</span>
<span class="go">4|-0.424972329789|0.567020349794|0.276232019278|-1.08740069129</span>
<span class="go">5|-0.673689708088|0.113648409689|-1.47842655244|0.524987667115</span>
<span class="go">6|0.40470521868|0.57704598592|-1.71500201611|-1.03926848351</span>
<span class="go">7|-0.370646858236|-1.15789225064|-1.34431181273|0.844885141425</span>
<span class="go">8|1.07576978372|-0.10904997528|1.64356307036|-1.46938795954</span>
<span class="go">9|0.357020564133|-0.67460010373|-1.77690371697|-0.968913812447</span>


<span class="gp">In [161]: </span><span class="n">table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;tmp.sv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;|&#39;</span><span class="p">)</span>

<span class="gp">In [162]: </span><span class="n">table</span>
<span class="gr">Out[162]: </span>
<span class="go">   Unnamed: 0         0         1         2         3</span>
<span class="go">0           0  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="go">1           1  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="go">2           2 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="go">3           3  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="go">4           4 -0.424972  0.567020  0.276232 -1.087401</span>
<span class="go">5           5 -0.673690  0.113648 -1.478427  0.524988</span>
<span class="go">6           6  0.404705  0.577046 -1.715002 -1.039268</span>
<span class="go">7           7 -0.370647 -1.157892 -1.344312  0.844885</span>
<span class="go">8           8  1.075770 -0.109050  1.643563 -1.469388</span>
<span class="go">9           9  0.357021 -0.674600 -1.776904 -0.968914</span>
</pre></div>
</div>
<p>By specifying a <code class="docutils literal"><span class="pre">chunksize</span></code> to <code class="docutils literal"><span class="pre">read_csv</span></code> or <code class="docutils literal"><span class="pre">read_table</span></code>, the return
value will be an iterable object of type <code class="docutils literal"><span class="pre">TextFileReader</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [163]: </span><span class="n">reader</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;tmp.sv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;|&#39;</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="gp">In [164]: </span><span class="n">reader</span>
<span class="gr">Out[164]: </span><span class="o">&lt;</span><span class="n">pandas</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">parsers</span><span class="o">.</span><span class="n">TextFileReader</span> <span class="n">at</span> <span class="mh">0x7ff27e15a450</span><span class="o">&gt;</span>

<span class="gp">In [165]: </span><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
<span class="gp">   .....:</span>     <span class="k">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
<span class="gp">   .....:</span> 
<span class="go">   Unnamed: 0         0         1         2         3</span>
<span class="go">0           0  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="go">1           1  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="go">2           2 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="go">3           3  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="go">   Unnamed: 0         0         1         2         3</span>
<span class="go">4           4 -0.424972  0.567020  0.276232 -1.087401</span>
<span class="go">5           5 -0.673690  0.113648 -1.478427  0.524988</span>
<span class="go">6           6  0.404705  0.577046 -1.715002 -1.039268</span>
<span class="go">7           7 -0.370647 -1.157892 -1.344312  0.844885</span>
<span class="go">   Unnamed: 0         0        1         2         3</span>
<span class="go">8           8  1.075770 -0.10905  1.643563 -1.469388</span>
<span class="go">9           9  0.357021 -0.67460 -1.776904 -0.968914</span>
</pre></div>
</div>
<p>Specifying <code class="docutils literal"><span class="pre">iterator=True</span></code> will also return the <code class="docutils literal"><span class="pre">TextFileReader</span></code> object:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [166]: </span><span class="n">reader</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;tmp.sv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;|&#39;</span><span class="p">,</span> <span class="n">iterator</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [167]: </span><span class="n">reader</span><span class="o">.</span><span class="n">get_chunk</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gr">Out[167]: </span>
<span class="go">   Unnamed: 0         0         1         2         3</span>
<span class="go">0           0  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="go">1           1  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="go">2           2 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="go">3           3  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="go">4           4 -0.424972  0.567020  0.276232 -1.087401</span>
</pre></div>
</div>
</div>
<div class="section" id="specifying-the-parser-engine">
<h3>Specifying the parser engine<a class="headerlink" href="#specifying-the-parser-engine" title="Permalink to this headline">¶</a></h3>
<p>Under the hood pandas uses a fast and efficient parser implemented in C as well
as a python implementation which is currently more feature-complete. Where
possible pandas uses the C parser (specified as <code class="docutils literal"><span class="pre">engine='c'</span></code>), but may fall
back to python if C-unsupported options are specified. Currently, C-unsupported
options include:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">sep</span></code> other than a single character (e.g. regex separators)</li>
<li><code class="docutils literal"><span class="pre">skipfooter</span></code></li>
<li><code class="docutils literal"><span class="pre">sep=None</span></code> with <code class="docutils literal"><span class="pre">delim_whitespace=False</span></code></li>
</ul>
<p>Specifying any of the above options will produce a <code class="docutils literal"><span class="pre">ParserWarning</span></code> unless the
python engine is selected explicitly using <code class="docutils literal"><span class="pre">engine='python'</span></code>.</p>
</div>
<div class="section" id="writing-out-data">
<h3>Writing out Data<a class="headerlink" href="#writing-out-data" title="Permalink to this headline">¶</a></h3>
<div class="section" id="writing-to-csv-format">
<span id="io-store-in-csv"></span><h4>Writing to CSV format<a class="headerlink" href="#writing-to-csv-format" title="Permalink to this headline">¶</a></h4>
<p>The Series and DataFrame objects have an instance method <code class="docutils literal"><span class="pre">to_csv</span></code> which
allows storing the contents of the object as a comma-separated-values file. The
function takes a number of arguments. Only the first is required.</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">path_or_buf</span></code>: A string path to the file to write or a StringIO</li>
<li><code class="docutils literal"><span class="pre">sep</span></code> : Field delimiter for the output file (default &#8221;,&#8221;)</li>
<li><code class="docutils literal"><span class="pre">na_rep</span></code>: A string representation of a missing value (default &#8216;&#8217;)</li>
<li><code class="docutils literal"><span class="pre">float_format</span></code>: Format string for floating point numbers</li>
<li><code class="docutils literal"><span class="pre">cols</span></code>: Columns to write (default None)</li>
<li><code class="docutils literal"><span class="pre">header</span></code>: Whether to write out the column names (default True)</li>
<li><code class="docutils literal"><span class="pre">index</span></code>: whether to write row (index) names (default True)</li>
<li><code class="docutils literal"><span class="pre">index_label</span></code>: Column label(s) for index column(s) if desired. If None
(default), and <cite>header</cite> and <cite>index</cite> are True, then the index names are
used. (A sequence should be given if the DataFrame uses MultiIndex).</li>
<li><code class="docutils literal"><span class="pre">mode</span></code> : Python write mode, default &#8216;w&#8217;</li>
<li><code class="docutils literal"><span class="pre">encoding</span></code>: a string representing the encoding to use if the contents are
non-ASCII, for python versions prior to 3</li>
<li><code class="docutils literal"><span class="pre">line_terminator</span></code>: Character sequence denoting line end (default &#8216;\n&#8217;)</li>
<li><code class="docutils literal"><span class="pre">quoting</span></code>: Set quoting rules as in csv module (default csv.QUOTE_MINIMAL). Note that if you have set a <cite>float_format</cite> then floats are converted to strings and csv.QUOTE_NONNUMERIC will treat them as non-numeric</li>
<li><code class="docutils literal"><span class="pre">quotechar</span></code>: Character used to quote fields (default &#8216;&#8221;&#8217;)</li>
<li><code class="docutils literal"><span class="pre">doublequote</span></code>: Control quoting of <code class="docutils literal"><span class="pre">quotechar</span></code> in fields (default True)</li>
<li><code class="docutils literal"><span class="pre">escapechar</span></code>: Character used to escape <code class="docutils literal"><span class="pre">sep</span></code> and <code class="docutils literal"><span class="pre">quotechar</span></code> when
appropriate (default None)</li>
<li><code class="docutils literal"><span class="pre">chunksize</span></code>: Number of rows to write at a time</li>
<li><code class="docutils literal"><span class="pre">tupleize_cols</span></code>: If False (default), write as a list of tuples, otherwise
write in an expanded line format suitable for <code class="docutils literal"><span class="pre">read_csv</span></code></li>
<li><code class="docutils literal"><span class="pre">date_format</span></code>: Format string for datetime objects</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="writing-a-formatted-string">
<h4>Writing a formatted string<a class="headerlink" href="#writing-a-formatted-string" title="Permalink to this headline">¶</a></h4>
<p id="io-formatting">The DataFrame object has an instance method <code class="docutils literal"><span class="pre">to_string</span></code> which allows control
over the string representation of the object. All arguments are optional:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">buf</span></code> default None, for example a StringIO object</li>
<li><code class="docutils literal"><span class="pre">columns</span></code> default None, which columns to write</li>
<li><code class="docutils literal"><span class="pre">col_space</span></code> default None, minimum width of each column.</li>
<li><code class="docutils literal"><span class="pre">na_rep</span></code> default <code class="docutils literal"><span class="pre">NaN</span></code>, representation of NA value</li>
<li><code class="docutils literal"><span class="pre">formatters</span></code> default None, a dictionary (by column) of functions each of
which takes a single argument and returns a formatted string</li>
<li><code class="docutils literal"><span class="pre">float_format</span></code> default None, a function which takes a single (float)
argument and returns a formatted string; to be applied to floats in the
DataFrame.</li>
<li><code class="docutils literal"><span class="pre">sparsify</span></code> default True, set to False for a DataFrame with a hierarchical
index to print every multiindex key at each row.</li>
<li><code class="docutils literal"><span class="pre">index_names</span></code> default True, will print the names of the indices</li>
<li><code class="docutils literal"><span class="pre">index</span></code> default True, will print the index (ie, row labels)</li>
<li><code class="docutils literal"><span class="pre">header</span></code> default True, will print the column labels</li>
<li><code class="docutils literal"><span class="pre">justify</span></code> default <code class="docutils literal"><span class="pre">left</span></code>, will print column headers left- or
right-justified</li>
</ul>
</div></blockquote>
<p>The Series object also has a <code class="docutils literal"><span class="pre">to_string</span></code> method, but with only the <code class="docutils literal"><span class="pre">buf</span></code>,
<code class="docutils literal"><span class="pre">na_rep</span></code>, <code class="docutils literal"><span class="pre">float_format</span></code> arguments. There is also a <code class="docutils literal"><span class="pre">length</span></code> argument
which, if set to <code class="docutils literal"><span class="pre">True</span></code>, will additionally output the length of the Series.</p>
</div>
</div>
</div>
<div class="section" id="json">
<span id="io-json"></span><h2>JSON<a class="headerlink" href="#json" title="Permalink to this headline">¶</a></h2>
<p>Read and write <code class="docutils literal"><span class="pre">JSON</span></code> format files and strings.</p>
<div class="section" id="writing-json">
<span id="io-json-writer"></span><h3>Writing JSON<a class="headerlink" href="#writing-json" title="Permalink to this headline">¶</a></h3>
<p>A <code class="docutils literal"><span class="pre">Series</span></code> or <code class="docutils literal"><span class="pre">DataFrame</span></code> can be converted to a valid JSON string. Use <code class="docutils literal"><span class="pre">to_json</span></code>
with optional parameters:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">path_or_buf</span></code> : the pathname or buffer to write the output
This can be <code class="docutils literal"><span class="pre">None</span></code> in which case a JSON string is returned</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">orient</span></code> :</p>
<dl class="docutils">
<dt>Series :</dt>
<dd><ul class="first last simple">
<li>default is <code class="docutils literal"><span class="pre">index</span></code></li>
<li>allowed values are {<code class="docutils literal"><span class="pre">split</span></code>, <code class="docutils literal"><span class="pre">records</span></code>, <code class="docutils literal"><span class="pre">index</span></code>}</li>
</ul>
</dd>
<dt>DataFrame</dt>
<dd><ul class="first last simple">
<li>default is <code class="docutils literal"><span class="pre">columns</span></code></li>
<li>allowed values are {<code class="docutils literal"><span class="pre">split</span></code>, <code class="docutils literal"><span class="pre">records</span></code>, <code class="docutils literal"><span class="pre">index</span></code>, <code class="docutils literal"><span class="pre">columns</span></code>, <code class="docutils literal"><span class="pre">values</span></code>}</li>
</ul>
</dd>
</dl>
<p>The format of the JSON string</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">split</span></code></td>
<td>dict like {index -&gt; [index], columns -&gt; [columns], data -&gt; [values]}</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">records</span></code></td>
<td>list like [{column -&gt; value}, ... , {column -&gt; value}]</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">index</span></code></td>
<td>dict like {index -&gt; {column -&gt; value}}</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">columns</span></code></td>
<td>dict like {column -&gt; {index -&gt; value}}</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">values</span></code></td>
<td>just the values array</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">date_format</span></code> : string, type of date conversion, &#8216;epoch&#8217; for timestamp, &#8216;iso&#8217; for ISO8601.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">double_precision</span></code> : The number of decimal places to use when encoding floating point values, default 10.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">force_ascii</span></code> : force encoded string to be ASCII, default True.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">date_unit</span></code> : The time unit to encode to, governs timestamp and ISO8601 precision. One of &#8216;s&#8217;, &#8216;ms&#8217;, &#8216;us&#8217; or &#8216;ns&#8217; for seconds, milliseconds, microseconds and nanoseconds respectively. Default &#8216;ms&#8217;.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">default_handler</span></code> : The handler to call if an object cannot otherwise be converted to a suitable format for JSON. Takes a single argument, which is the object to convert, and returns a serializable object.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">lines</span></code> : If <code class="docutils literal"><span class="pre">records</span></code> orient, then will write each record per line as json.</p>
</li>
</ul>
<p>Note <code class="docutils literal"><span class="pre">NaN</span></code>&#8216;s, <code class="docutils literal"><span class="pre">NaT</span></code>&#8216;s and <code class="docutils literal"><span class="pre">None</span></code> will be converted to <code class="docutils literal"><span class="pre">null</span></code> and <code class="docutils literal"><span class="pre">datetime</span></code> objects will be converted based on the <code class="docutils literal"><span class="pre">date_format</span></code> and <code class="docutils literal"><span class="pre">date_unit</span></code> parameters.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [168]: </span><span class="n">dfj</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;AB&#39;</span><span class="p">))</span>

<span class="gp">In [169]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfj</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>

<span class="gp">In [170]: </span><span class="n">json</span>
<span class="gr">Out[170]: </span><span class="s1">&#39;{&quot;A&quot;:{&quot;0&quot;:-1.2945235903,&quot;1&quot;:0.2766617129,&quot;2&quot;:-0.0139597524,&quot;3&quot;:-0.0061535699,&quot;4&quot;:0.8957173022},&quot;B&quot;:{&quot;0&quot;:0.4137381054,&quot;1&quot;:-0.472034511,&quot;2&quot;:-0.3625429925,&quot;3&quot;:-0.923060654,&quot;4&quot;:0.8052440254}}&#39;</span>
</pre></div>
</div>
<div class="section" id="orient-options">
<h4>Orient Options<a class="headerlink" href="#orient-options" title="Permalink to this headline">¶</a></h4>
<p>There are a number of different options for the format of the resulting JSON
file / string. Consider the following DataFrame and Series:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [171]: </span><span class="n">dfjo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">B</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">C</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">)),</span>
<span class="gp">   .....:</span>                     <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;xyz&#39;</span><span class="p">))</span>
<span class="gp">   .....:</span> 

<span class="gp">In [172]: </span><span class="n">dfjo</span>
<span class="gr">Out[172]: </span>
<span class="go">   A  B  C</span>
<span class="go">x  1  4  7</span>
<span class="go">y  2  5  8</span>
<span class="go">z  3  6  9</span>

<span class="gp">In [173]: </span><span class="n">sjo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">17</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>

<span class="gp">In [174]: </span><span class="n">sjo</span>
<span class="gr">Out[174]: </span>
<span class="go">x    15</span>
<span class="go">y    16</span>
<span class="go">z    17</span>
<span class="go">Name: D, dtype: int64</span>
</pre></div>
</div>
<p><strong>Column oriented</strong> (the default for <code class="docutils literal"><span class="pre">DataFrame</span></code>) serializes the data as
nested JSON objects with column labels acting as the primary index:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [175]: </span><span class="n">dfjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;columns&quot;</span><span class="p">)</span>
<span class="gr">Out[175]: </span><span class="s1">&#39;{&quot;A&quot;:{&quot;x&quot;:1,&quot;y&quot;:2,&quot;z&quot;:3},&quot;B&quot;:{&quot;x&quot;:4,&quot;y&quot;:5,&quot;z&quot;:6},&quot;C&quot;:{&quot;x&quot;:7,&quot;y&quot;:8,&quot;z&quot;:9}}&#39;</span>

</pre></div>
</div>
<p><strong>Index oriented</strong> (the default for <code class="docutils literal"><span class="pre">Series</span></code>) similar to column oriented
but the index labels are now primary:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [176]: </span><span class="n">dfjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>
<span class="gr">Out[176]: </span><span class="s1">&#39;{&quot;x&quot;:{&quot;A&quot;:1,&quot;B&quot;:4,&quot;C&quot;:7},&quot;y&quot;:{&quot;A&quot;:2,&quot;B&quot;:5,&quot;C&quot;:8},&quot;z&quot;:{&quot;A&quot;:3,&quot;B&quot;:6,&quot;C&quot;:9}}&#39;</span>

<span class="gp">In [177]: </span><span class="n">sjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>
<span class="gr">Out[177]: </span><span class="s1">&#39;{&quot;x&quot;:15,&quot;y&quot;:16,&quot;z&quot;:17}&#39;</span>
</pre></div>
</div>
<p><strong>Record oriented</strong> serializes the data to a JSON array of column -&gt; value records,
index labels are not included. This is useful for passing DataFrame data to plotting
libraries, for example the JavaScript library d3.js:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [178]: </span><span class="n">dfjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;records&quot;</span><span class="p">)</span>
<span class="gr">Out[178]: </span><span class="s1">&#39;[{&quot;A&quot;:1,&quot;B&quot;:4,&quot;C&quot;:7},{&quot;A&quot;:2,&quot;B&quot;:5,&quot;C&quot;:8},{&quot;A&quot;:3,&quot;B&quot;:6,&quot;C&quot;:9}]&#39;</span>

<span class="gp">In [179]: </span><span class="n">sjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;records&quot;</span><span class="p">)</span>
<span class="gr">Out[179]: </span><span class="s1">&#39;[15,16,17]&#39;</span>
</pre></div>
</div>
<p><strong>Value oriented</strong> is a bare-bones option which serializes to nested JSON arrays of
values only, column and index labels are not included:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [180]: </span><span class="n">dfjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;values&quot;</span><span class="p">)</span>
<span class="gr">Out[180]: </span><span class="s1">&#39;[[1,4,7],[2,5,8],[3,6,9]]&#39;</span>

</pre></div>
</div>
<p><strong>Split oriented</strong> serializes to a JSON object containing separate entries for
values, index and columns. Name is also included for <code class="docutils literal"><span class="pre">Series</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [181]: </span><span class="n">dfjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;split&quot;</span><span class="p">)</span>
<span class="gr">Out[181]: </span><span class="s1">&#39;{&quot;columns&quot;:[&quot;A&quot;,&quot;B&quot;,&quot;C&quot;],&quot;index&quot;:[&quot;x&quot;,&quot;y&quot;,&quot;z&quot;],&quot;data&quot;:[[1,4,7],[2,5,8],[3,6,9]]}&#39;</span>

<span class="gp">In [182]: </span><span class="n">sjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;split&quot;</span><span class="p">)</span>
<span class="gr">Out[182]: </span><span class="s1">&#39;{&quot;name&quot;:&quot;D&quot;,&quot;index&quot;:[&quot;x&quot;,&quot;y&quot;,&quot;z&quot;],&quot;data&quot;:[15,16,17]}&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Any orient option that encodes to a JSON object will not preserve the ordering of
index and column labels during round-trip serialization. If you wish to preserve
label ordering use the <cite>split</cite> option as it uses ordered containers.</p>
</div>
</div>
<div class="section" id="id1">
<h4>Date Handling<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>Writing in ISO date format</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [183]: </span><span class="n">dfd</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;AB&#39;</span><span class="p">))</span>

<span class="gp">In [184]: </span><span class="n">dfd</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">)</span>

<span class="gp">In [185]: </span><span class="n">dfd</span> <span class="o">=</span> <span class="n">dfd</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="gp">In [186]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfd</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;iso&#39;</span><span class="p">)</span>

<span class="gp">In [187]: </span><span class="n">json</span>
<span class="gr">Out[187]: </span><span class="s1">&#39;{&quot;date&quot;:{&quot;0&quot;:&quot;2013-01-01T00:00:00.000Z&quot;,&quot;1&quot;:&quot;2013-01-01T00:00:00.000Z&quot;,&quot;2&quot;:&quot;2013-01-01T00:00:00.000Z&quot;,&quot;3&quot;:&quot;2013-01-01T00:00:00.000Z&quot;,&quot;4&quot;:&quot;2013-01-01T00:00:00.000Z&quot;},&quot;B&quot;:{&quot;0&quot;:2.5656459463,&quot;1&quot;:1.3403088498,&quot;2&quot;:-0.2261692849,&quot;3&quot;:0.8138502857,&quot;4&quot;:-0.8273169356},&quot;A&quot;:{&quot;0&quot;:-1.2064117817,&quot;1&quot;:1.4312559863,&quot;2&quot;:-1.1702987971,&quot;3&quot;:0.4108345112,&quot;4&quot;:0.1320031703}}&#39;</span>
</pre></div>
</div>
<p>Writing in ISO date format, with microseconds</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [188]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfd</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;iso&#39;</span><span class="p">,</span> <span class="n">date_unit</span><span class="o">=</span><span class="s1">&#39;us&#39;</span><span class="p">)</span>

<span class="gp">In [189]: </span><span class="n">json</span>
<span class="gr">Out[189]: </span><span class="s1">&#39;{&quot;date&quot;:{&quot;0&quot;:&quot;2013-01-01T00:00:00.000000Z&quot;,&quot;1&quot;:&quot;2013-01-01T00:00:00.000000Z&quot;,&quot;2&quot;:&quot;2013-01-01T00:00:00.000000Z&quot;,&quot;3&quot;:&quot;2013-01-01T00:00:00.000000Z&quot;,&quot;4&quot;:&quot;2013-01-01T00:00:00.000000Z&quot;},&quot;B&quot;:{&quot;0&quot;:2.5656459463,&quot;1&quot;:1.3403088498,&quot;2&quot;:-0.2261692849,&quot;3&quot;:0.8138502857,&quot;4&quot;:-0.8273169356},&quot;A&quot;:{&quot;0&quot;:-1.2064117817,&quot;1&quot;:1.4312559863,&quot;2&quot;:-1.1702987971,&quot;3&quot;:0.4108345112,&quot;4&quot;:0.1320031703}}&#39;</span>
</pre></div>
</div>
<p>Epoch timestamps, in seconds</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [190]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfd</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;epoch&#39;</span><span class="p">,</span> <span class="n">date_unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>

<span class="gp">In [191]: </span><span class="n">json</span>
<span class="gr">Out[191]: </span><span class="s1">&#39;{&quot;date&quot;:{&quot;0&quot;:1356998400,&quot;1&quot;:1356998400,&quot;2&quot;:1356998400,&quot;3&quot;:1356998400,&quot;4&quot;:1356998400},&quot;B&quot;:{&quot;0&quot;:2.5656459463,&quot;1&quot;:1.3403088498,&quot;2&quot;:-0.2261692849,&quot;3&quot;:0.8138502857,&quot;4&quot;:-0.8273169356},&quot;A&quot;:{&quot;0&quot;:-1.2064117817,&quot;1&quot;:1.4312559863,&quot;2&quot;:-1.1702987971,&quot;3&quot;:0.4108345112,&quot;4&quot;:0.1320031703}}&#39;</span>
</pre></div>
</div>
<p>Writing to a file, with a date index and a date column</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [192]: </span><span class="n">dfj2</span> <span class="o">=</span> <span class="n">dfj</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [193]: </span><span class="n">dfj2</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">)</span>

<span class="gp">In [194]: </span><span class="n">dfj2</span><span class="p">[</span><span class="s1">&#39;ints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

<span class="gp">In [195]: </span><span class="n">dfj2</span><span class="p">[</span><span class="s1">&#39;bools&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>

<span class="gp">In [196]: </span><span class="n">dfj2</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="gp">In [197]: </span><span class="n">dfj2</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s1">&#39;test.json&#39;</span><span class="p">)</span>

<span class="gp">In [198]: </span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.json&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gr">Out[198]: </span><span class="s1">&#39;{&quot;A&quot;:{&quot;1356998400000&quot;:-1.2945235903,&quot;1357084800000&quot;:0.2766617129,&quot;1357171200000&quot;:-0.0139597524,&quot;1357257600000&quot;:-0.0061535699,&quot;1357344000000&quot;:0.8957173022},&quot;B&quot;:{&quot;1356998400000&quot;:0.4137381054,&quot;1357084800000&quot;:-0.472034511,&quot;1357171200000&quot;:-0.3625429925,&quot;1357257600000&quot;:-0.923060654,&quot;1357344000000&quot;:0.8052440254},&quot;date&quot;:{&quot;1356998400000&quot;:1356998400000,&quot;1357084800000&quot;:1356998400000,&quot;1357171200000&quot;:1356998400000,&quot;1357257600000&quot;:1356998400000,&quot;1357344000000&quot;:1356998400000},&quot;ints&quot;:{&quot;1356998400000&quot;:0,&quot;1357084800000&quot;:1,&quot;1357171200000&quot;:2,&quot;1357257600000&quot;:3,&quot;1357344000000&quot;:4},&quot;bools&quot;:{&quot;1356998400000&quot;:true,&quot;1357084800000&quot;:true,&quot;1357171200000&quot;:true,&quot;1357257600000&quot;:true,&quot;1357344000000&quot;:true}}&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="fallback-behavior">
<h4>Fallback Behavior<a class="headerlink" href="#fallback-behavior" title="Permalink to this headline">¶</a></h4>
<p>If the JSON serializer cannot handle the container contents directly it will fallback in the following manner:</p>
<ul class="simple">
<li>if the dtype is unsupported (e.g. <code class="docutils literal"><span class="pre">np.complex</span></code>) then the <code class="docutils literal"><span class="pre">default_handler</span></code>, if provided, will be called
for each value, otherwise an exception is raised.</li>
<li>if an object is unsupported it will attempt the following:<ul>
<li>check if the object has defined a <code class="docutils literal"><span class="pre">toDict</span></code> method and call it.
A <code class="docutils literal"><span class="pre">toDict</span></code> method should return a <code class="docutils literal"><span class="pre">dict</span></code> which will then be JSON serialized.</li>
<li>invoke the <code class="docutils literal"><span class="pre">default_handler</span></code> if one was provided.</li>
<li>convert the object to a <code class="docutils literal"><span class="pre">dict</span></code> by traversing its contents. However this will often fail
with an <code class="docutils literal"><span class="pre">OverflowError</span></code> or give unexpected results.</li>
</ul>
</li>
</ul>
<p>In general the best approach for unsupported objects or dtypes is to provide a <code class="docutils literal"><span class="pre">default_handler</span></code>.
For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">DataFrame</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="nb">complex</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)])</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>  <span class="c1"># raises</span>

<span class="ne">RuntimeError</span><span class="p">:</span> <span class="n">Unhandled</span> <span class="n">numpy</span> <span class="n">dtype</span> <span class="mi">15</span>
</pre></div>
</div>
<p>can be dealt with by specifying a simple <code class="docutils literal"><span class="pre">default_handler</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [199]: </span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="nb">complex</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)])</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">default_handler</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
<span class="gr">Out[199]: </span><span class="s1">&#39;{&quot;0&quot;:{&quot;0&quot;:&quot;(1+0j)&quot;,&quot;1&quot;:&quot;(2+0j)&quot;,&quot;2&quot;:&quot;(1+2j)&quot;}}&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="reading-json">
<span id="io-json-reader"></span><h3>Reading JSON<a class="headerlink" href="#reading-json" title="Permalink to this headline">¶</a></h3>
<p>Reading a JSON string to pandas object can take a number of parameters.
The parser will try to parse a <code class="docutils literal"><span class="pre">DataFrame</span></code> if <code class="docutils literal"><span class="pre">typ</span></code> is not supplied or
is <code class="docutils literal"><span class="pre">None</span></code>. To explicitly force <code class="docutils literal"><span class="pre">Series</span></code> parsing, pass <code class="docutils literal"><span class="pre">typ=series</span></code></p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">filepath_or_buffer</span></code> : a <strong>VALID</strong> JSON string or file handle / StringIO. The string could be
a URL. Valid URL schemes include http, ftp, S3, and file. For file URLs, a host
is expected. For instance, a local file could be
file ://localhost/path/to/table.json</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">typ</span></code>    : type of object to recover (series or frame), default &#8216;frame&#8217;</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">orient</span></code> :</p>
<dl class="docutils">
<dt>Series :</dt>
<dd><ul class="first last simple">
<li>default is <code class="docutils literal"><span class="pre">index</span></code></li>
<li>allowed values are {<code class="docutils literal"><span class="pre">split</span></code>, <code class="docutils literal"><span class="pre">records</span></code>, <code class="docutils literal"><span class="pre">index</span></code>}</li>
</ul>
</dd>
<dt>DataFrame</dt>
<dd><ul class="first last simple">
<li>default is <code class="docutils literal"><span class="pre">columns</span></code></li>
<li>allowed values are {<code class="docutils literal"><span class="pre">split</span></code>, <code class="docutils literal"><span class="pre">records</span></code>, <code class="docutils literal"><span class="pre">index</span></code>, <code class="docutils literal"><span class="pre">columns</span></code>, <code class="docutils literal"><span class="pre">values</span></code>}</li>
</ul>
</dd>
</dl>
<p>The format of the JSON string</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">split</span></code></td>
<td>dict like {index -&gt; [index], columns -&gt; [columns], data -&gt; [values]}</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">records</span></code></td>
<td>list like [{column -&gt; value}, ... , {column -&gt; value}]</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">index</span></code></td>
<td>dict like {index -&gt; {column -&gt; value}}</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">columns</span></code></td>
<td>dict like {column -&gt; {index -&gt; value}}</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">values</span></code></td>
<td>just the values array</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">dtype</span></code> : if True, infer dtypes, if a dict of column to dtype, then use those, if False, then don&#8217;t infer dtypes at all, default is True, apply only to the data</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">convert_axes</span></code> : boolean, try to convert the axes to the proper dtypes, default is True</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">convert_dates</span></code> : a list of columns to parse for dates; If True, then try to parse date-like columns, default is True</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">keep_default_dates</span></code> : boolean, default True. If parsing dates, then parse the default date-like columns</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">numpy</span></code> : direct decoding to numpy arrays. default is False;
Supports numeric data only, although labels may be non-numeric. Also note that the JSON ordering <strong>MUST</strong> be the same for each term if <code class="docutils literal"><span class="pre">numpy=True</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">precise_float</span></code> : boolean, default <code class="docutils literal"><span class="pre">False</span></code>. Set to enable usage of higher precision (strtod) function when decoding string to double values. Default (<code class="docutils literal"><span class="pre">False</span></code>) is to use fast but less precise builtin functionality</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">date_unit</span></code> : string, the timestamp unit to detect if converting dates. Default
None. By default the timestamp precision will be detected, if this is not desired
then pass one of &#8216;s&#8217;, &#8216;ms&#8217;, &#8216;us&#8217; or &#8216;ns&#8217; to force timestamp precision to
seconds, milliseconds, microseconds or nanoseconds respectively.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">lines</span></code> : reads file as one json object per line.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">encoding</span></code> : The encoding to use to decode py3 bytes.</p>
</li>
</ul>
<p>The parser will raise one of <code class="docutils literal"><span class="pre">ValueError/TypeError/AssertionError</span></code> if the JSON is not parseable.</p>
<p>If a non-default <code class="docutils literal"><span class="pre">orient</span></code> was used when encoding to JSON be sure to pass the same
option here so that decoding produces sensible results, see <a class="reference internal" href="#orient-options">Orient Options</a> for an
overview.</p>
<div class="section" id="data-conversion">
<h4>Data Conversion<a class="headerlink" href="#data-conversion" title="Permalink to this headline">¶</a></h4>
<p>The default of <code class="docutils literal"><span class="pre">convert_axes=True</span></code>, <code class="docutils literal"><span class="pre">dtype=True</span></code>, and <code class="docutils literal"><span class="pre">convert_dates=True</span></code> will try to parse the axes, and all of the data
into appropriate types, including dates. If you need to override specific dtypes, pass a dict to <code class="docutils literal"><span class="pre">dtype</span></code>. <code class="docutils literal"><span class="pre">convert_axes</span></code> should only
be set to <code class="docutils literal"><span class="pre">False</span></code> if you need to preserve string-like numbers (e.g. &#8216;1&#8217;, &#8216;2&#8217;) in an axes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Large integer values may be converted to dates if <code class="docutils literal"><span class="pre">convert_dates=True</span></code> and the data and / or column labels appear &#8216;date-like&#8217;. The exact threshold depends on the <code class="docutils literal"><span class="pre">date_unit</span></code> specified. &#8216;date-like&#8217; means that the column label meets one of the following criteria:</p>
<blockquote class="last">
<div><ul class="simple">
<li>it ends with <code class="docutils literal"><span class="pre">'_at'</span></code></li>
<li>it ends with <code class="docutils literal"><span class="pre">'_time'</span></code></li>
<li>it begins with <code class="docutils literal"><span class="pre">'timestamp'</span></code></li>
<li>it is <code class="docutils literal"><span class="pre">'modified'</span></code></li>
<li>it is <code class="docutils literal"><span class="pre">'date'</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When reading JSON data, automatic coercing into dtypes has some quirks:</p>
<blockquote>
<div><ul class="simple">
<li>an index can be reconstructed in a different order from serialization, that is, the returned order is not guaranteed to be the same as before serialization</li>
<li>a column that was <code class="docutils literal"><span class="pre">float</span></code> data will be converted to <code class="docutils literal"><span class="pre">integer</span></code> if it can be done safely, e.g. a column of <code class="docutils literal"><span class="pre">1.</span></code></li>
<li>bool columns will be converted to <code class="docutils literal"><span class="pre">integer</span></code> on reconstruction</li>
</ul>
</div></blockquote>
<p class="last">Thus there are times where you may want to specify specific dtypes via the <code class="docutils literal"><span class="pre">dtype</span></code> keyword argument.</p>
</div>
<p>Reading from a JSON string:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [200]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">)</span>
<span class="gr">Out[200]: </span>
<span class="go">          A         B       date</span>
<span class="go">0 -1.206412  2.565646 2013-01-01</span>
<span class="go">1  1.431256  1.340309 2013-01-01</span>
<span class="go">2 -1.170299 -0.226169 2013-01-01</span>
<span class="go">3  0.410835  0.813850 2013-01-01</span>
<span class="go">4  0.132003 -0.827317 2013-01-01</span>
</pre></div>
</div>
<p>Reading from a file:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [201]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s1">&#39;test.json&#39;</span><span class="p">)</span>
<span class="gr">Out[201]: </span>
<span class="go">                   A         B bools       date  ints</span>
<span class="go">2013-01-01 -1.294524  0.413738  True 2013-01-01     0</span>
<span class="go">2013-01-02  0.276662 -0.472035  True 2013-01-01     1</span>
<span class="go">2013-01-03 -0.013960 -0.362543  True 2013-01-01     2</span>
<span class="go">2013-01-04 -0.006154 -0.923061  True 2013-01-01     3</span>
<span class="go">2013-01-05  0.895717  0.805244  True 2013-01-01     4</span>
</pre></div>
</div>
<p>Don&#8217;t convert any data (but still convert axes and dates):</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [202]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s1">&#39;test.json&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gr">Out[202]: </span>
<span class="go">A        object</span>
<span class="go">B        object</span>
<span class="go">bools    object</span>
<span class="go">date     object</span>
<span class="go">ints     object</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Specify dtypes for conversion:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [203]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s1">&#39;test.json&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;A&#39;</span> <span class="p">:</span> <span class="s1">&#39;float32&#39;</span><span class="p">,</span> <span class="s1">&#39;bools&#39;</span> <span class="p">:</span> <span class="s1">&#39;int8&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gr">Out[203]: </span>
<span class="go">A               float32</span>
<span class="go">B               float64</span>
<span class="go">bools              int8</span>
<span class="go">date     datetime64[ns]</span>
<span class="go">ints              int64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Preserve string indices:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [204]: </span><span class="n">si</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">   .....:</span>          <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)),</span>
<span class="gp">   .....:</span>          <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [205]: </span><span class="n">si</span>
<span class="gr">Out[205]: </span>
<span class="go">     0    1    2    3</span>
<span class="go">0  0.0  0.0  0.0  0.0</span>
<span class="go">1  0.0  0.0  0.0  0.0</span>
<span class="go">2  0.0  0.0  0.0  0.0</span>
<span class="go">3  0.0  0.0  0.0  0.0</span>

<span class="gp">In [206]: </span><span class="n">si</span><span class="o">.</span><span class="n">index</span>
<span class="gr">Out[206]: </span><span class="n">Index</span><span class="p">([</span><span class="s1">u&#39;0&#39;</span><span class="p">,</span> <span class="s1">u&#39;1&#39;</span><span class="p">,</span> <span class="s1">u&#39;2&#39;</span><span class="p">,</span> <span class="s1">u&#39;3&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>

<span class="gp">In [207]: </span><span class="n">si</span><span class="o">.</span><span class="n">columns</span>
<span class="gr">Out[207]: </span><span class="n">Int64Index</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int64&#39;</span><span class="p">)</span>

<span class="gp">In [208]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">si</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>

<span class="gp">In [209]: </span><span class="n">sij</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">convert_axes</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="gp">In [210]: </span><span class="n">sij</span>
<span class="gr">Out[210]: </span>
<span class="go">   0  1  2  3</span>
<span class="go">0  0  0  0  0</span>
<span class="go">1  0  0  0  0</span>
<span class="go">2  0  0  0  0</span>
<span class="go">3  0  0  0  0</span>

<span class="gp">In [211]: </span><span class="n">sij</span><span class="o">.</span><span class="n">index</span>
<span class="gr">Out[211]: </span><span class="n">Index</span><span class="p">([</span><span class="s1">u&#39;0&#39;</span><span class="p">,</span> <span class="s1">u&#39;1&#39;</span><span class="p">,</span> <span class="s1">u&#39;2&#39;</span><span class="p">,</span> <span class="s1">u&#39;3&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>

<span class="gp">In [212]: </span><span class="n">sij</span><span class="o">.</span><span class="n">columns</span>
<span class="gr">Out[212]: </span><span class="n">Index</span><span class="p">([</span><span class="s1">u&#39;0&#39;</span><span class="p">,</span> <span class="s1">u&#39;1&#39;</span><span class="p">,</span> <span class="s1">u&#39;2&#39;</span><span class="p">,</span> <span class="s1">u&#39;3&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Dates written in nanoseconds need to be read back in nanoseconds:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [213]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfj2</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_unit</span><span class="o">=</span><span class="s1">&#39;ns&#39;</span><span class="p">)</span>

<span class="c"># Try to parse timestamps as millseconds -&gt; Won&#39;t Work</span>
<span class="gp">In [214]: </span><span class="n">dfju</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">date_unit</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span>

<span class="gp">In [215]: </span><span class="n">dfju</span>
<span class="gr">Out[215]: </span>
<span class="go">                            A         B bools                 date  ints</span>
<span class="go">1356998400000000000 -1.294524  0.413738  True  1356998400000000000     0</span>
<span class="go">1357084800000000000  0.276662 -0.472035  True  1356998400000000000     1</span>
<span class="go">1357171200000000000 -0.013960 -0.362543  True  1356998400000000000     2</span>
<span class="go">1357257600000000000 -0.006154 -0.923061  True  1356998400000000000     3</span>
<span class="go">1357344000000000000  0.895717  0.805244  True  1356998400000000000     4</span>

<span class="c"># Let pandas detect the correct precision</span>
<span class="gp">In [216]: </span><span class="n">dfju</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">)</span>

<span class="gp">In [217]: </span><span class="n">dfju</span>
<span class="gr">Out[217]: </span>
<span class="go">                   A         B bools       date  ints</span>
<span class="go">2013-01-01 -1.294524  0.413738  True 2013-01-01     0</span>
<span class="go">2013-01-02  0.276662 -0.472035  True 2013-01-01     1</span>
<span class="go">2013-01-03 -0.013960 -0.362543  True 2013-01-01     2</span>
<span class="go">2013-01-04 -0.006154 -0.923061  True 2013-01-01     3</span>
<span class="go">2013-01-05  0.895717  0.805244  True 2013-01-01     4</span>

<span class="c"># Or specify that all timestamps are in nanoseconds</span>
<span class="gp">In [218]: </span><span class="n">dfju</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">date_unit</span><span class="o">=</span><span class="s1">&#39;ns&#39;</span><span class="p">)</span>

<span class="gp">In [219]: </span><span class="n">dfju</span>
<span class="gr">Out[219]: </span>
<span class="go">                   A         B bools       date  ints</span>
<span class="go">2013-01-01 -1.294524  0.413738  True 2013-01-01     0</span>
<span class="go">2013-01-02  0.276662 -0.472035  True 2013-01-01     1</span>
<span class="go">2013-01-03 -0.013960 -0.362543  True 2013-01-01     2</span>
<span class="go">2013-01-04 -0.006154 -0.923061  True 2013-01-01     3</span>
<span class="go">2013-01-05  0.895717  0.805244  True 2013-01-01     4</span>
</pre></div>
</div>
</div>
<div class="section" id="the-numpy-parameter">
<h4>The Numpy Parameter<a class="headerlink" href="#the-numpy-parameter" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This supports numeric data only. Index and columns labels may be non-numeric, e.g. strings, dates etc.</p>
</div>
<p>If <code class="docutils literal"><span class="pre">numpy=True</span></code> is passed to <code class="docutils literal"><span class="pre">read_json</span></code> an attempt will be made to sniff
an appropriate dtype during deserialization and to subsequently decode directly
to numpy arrays, bypassing the need for intermediate Python objects.</p>
<p>This can provide speedups if you are deserialising a large amount of numeric
data:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [220]: </span><span class="n">randfloats</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>

<span class="gp">In [221]: </span><span class="n">randfloats</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="gp">In [222]: </span><span class="n">dffloats</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randfloats</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABCDEFGHIJ&#39;</span><span class="p">))</span>

<span class="gp">In [223]: </span><span class="n">jsonfloats</span> <span class="o">=</span> <span class="n">dffloats</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [224]: </span><span class="n">timeit</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">jsonfloats</span><span class="p">)</span>
<span class="go">100 loops, best of 3: 12.2 ms per loop</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [225]: </span><span class="n">timeit</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">jsonfloats</span><span class="p">,</span> <span class="n">numpy</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">100 loops, best of 3: 7.35 ms per loop</span>
</pre></div>
</div>
<p>The speedup is less noticeable for smaller datasets:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [226]: </span><span class="n">jsonfloats</span> <span class="o">=</span> <span class="n">dffloats</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [227]: </span><span class="n">timeit</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">jsonfloats</span><span class="p">)</span>
<span class="go">100 loops, best of 3: 5.72 ms per loop</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [228]: </span><span class="n">timeit</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">jsonfloats</span><span class="p">,</span> <span class="n">numpy</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">100 loops, best of 3: 4.94 ms per loop</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Direct numpy decoding makes a number of assumptions and may fail or produce
unexpected output if these assumptions are not satisfied:</p>
<blockquote class="last">
<div><ul class="simple">
<li>data is numeric.</li>
<li>data is uniform. The dtype is sniffed from the first value decoded.
A <code class="docutils literal"><span class="pre">ValueError</span></code> may be raised, or incorrect output may be produced
if this condition is not satisfied.</li>
<li>labels are ordered. Labels are only read from the first container, it is assumed
that each subsequent row / column has been encoded in the same order. This should be satisfied if the
data was encoded using <code class="docutils literal"><span class="pre">to_json</span></code> but may not be the case if the JSON
is from another source.</li>
</ul>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="normalization">
<span id="io-json-normalize"></span><h3>Normalization<a class="headerlink" href="#normalization" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.13.0.</span></p>
</div>
<p>pandas provides a utility function to take a dict or list of dicts and <em>normalize</em> this semi-structured data
into a flat table.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [229]: </span><span class="kn">from</span> <span class="nn">pandas.io.json</span> <span class="kn">import</span> <span class="n">json_normalize</span>

<span class="gp">In [230]: </span><span class="n">data</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;Florida&#39;</span><span class="p">,</span>
<span class="gp">   .....:</span>           <span class="s1">&#39;shortname&#39;</span><span class="p">:</span> <span class="s1">&#39;FL&#39;</span><span class="p">,</span>
<span class="gp">   .....:</span>           <span class="s1">&#39;info&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">   .....:</span>                <span class="s1">&#39;governor&#39;</span><span class="p">:</span> <span class="s1">&#39;Rick Scott&#39;</span>
<span class="gp">   .....:</span>           <span class="p">},</span>
<span class="gp">   .....:</span>           <span class="s1">&#39;counties&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Dade&#39;</span><span class="p">,</span> <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="mi">12345</span><span class="p">},</span>
<span class="gp">   .....:</span>                       <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Broward&#39;</span><span class="p">,</span> <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="mi">40000</span><span class="p">},</span>
<span class="gp">   .....:</span>                       <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Palm Beach&#39;</span><span class="p">,</span> <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="mi">60000</span><span class="p">}]},</span>
<span class="gp">   .....:</span>          <span class="p">{</span><span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;Ohio&#39;</span><span class="p">,</span>
<span class="gp">   .....:</span>           <span class="s1">&#39;shortname&#39;</span><span class="p">:</span> <span class="s1">&#39;OH&#39;</span><span class="p">,</span>
<span class="gp">   .....:</span>           <span class="s1">&#39;info&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">   .....:</span>                <span class="s1">&#39;governor&#39;</span><span class="p">:</span> <span class="s1">&#39;John Kasich&#39;</span>
<span class="gp">   .....:</span>           <span class="p">},</span>
<span class="gp">   .....:</span>           <span class="s1">&#39;counties&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Summit&#39;</span><span class="p">,</span> <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="mi">1234</span><span class="p">},</span>
<span class="gp">   .....:</span>                        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Cuyahoga&#39;</span><span class="p">,</span> <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="mi">1337</span><span class="p">}]}]</span>
<span class="gp">   .....:</span> 

<span class="gp">In [231]: </span><span class="n">json_normalize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;counties&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="s1">&#39;shortname&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;governor&#39;</span><span class="p">]])</span>
<span class="gr">Out[231]: </span>
<span class="go">         name  population info.governor    state shortname</span>
<span class="go">0        Dade       12345    Rick Scott  Florida        FL</span>
<span class="go">1     Broward       40000    Rick Scott  Florida        FL</span>
<span class="go">2  Palm Beach       60000    Rick Scott  Florida        FL</span>
<span class="go">3      Summit        1234   John Kasich     Ohio        OH</span>
<span class="go">4    Cuyahoga        1337   John Kasich     Ohio        OH</span>
</pre></div>
</div>
</div>
<div class="section" id="line-delimited-json">
<span id="io-jsonl"></span><h3>Line delimited json<a class="headerlink" href="#line-delimited-json" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.19.0.</span></p>
</div>
<p>pandas is able to read and write line-delimited json files that are common in data processing pipelines
using Hadoop or Spark.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [232]: </span><span class="n">jsonl</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="gp">   .....:</span><span class="s1">     {&quot;a&quot;:1,&quot;b&quot;:2}</span>
<span class="gp">   .....:</span><span class="s1">     {&quot;a&quot;:3,&quot;b&quot;:4}</span>
<span class="gp">   .....:</span><span class="s1"> &#39;&#39;&#39;</span>
<span class="gp">   .....:</span> 

<span class="gp">In [233]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">jsonl</span><span class="p">,</span> <span class="n">lines</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [234]: </span><span class="n">df</span>
<span class="gr">Out[234]: </span>
<span class="go">   a  b</span>
<span class="go">0  1  2</span>
<span class="go">1  3  4</span>

<span class="gp">In [235]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">,</span> <span class="n">lines</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gr">Out[235]: </span><span class="s1">u&#39;{&quot;a&quot;:1,&quot;b&quot;:2}</span><span class="se">\n</span><span class="s1">{&quot;a&quot;:3,&quot;b&quot;:4}&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="html">
<h2>HTML<a class="headerlink" href="#html" title="Permalink to this headline">¶</a></h2>
<div class="section" id="reading-html-content">
<span id="io-read-html"></span><h3>Reading HTML Content<a class="headerlink" href="#reading-html-content" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">We <strong>highly encourage</strong> you to read the <a class="reference internal" href="gotchas.html#html-gotchas"><span class="std std-ref">HTML parsing gotchas</span></a> regarding the issues surrounding the
BeautifulSoup4/html5lib/lxml parsers.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.12.0.</span></p>
</div>
<p>The top-level <code class="xref py py-func docutils literal"><span class="pre">read_html()</span></code> function can accept an HTML
string/file/URL and will parse HTML tables into list of pandas DataFrames.
Let&#8217;s look at a few examples.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">read_html</span></code> returns a <code class="docutils literal"><span class="pre">list</span></code> of <code class="docutils literal"><span class="pre">DataFrame</span></code> objects, even if there is
only a single table contained in the HTML content</p>
</div>
<p>Read a URL with no options</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [236]: </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://www.fdic.gov/bank/individual/failed/banklist.html&#39;</span>

<span class="gp">In [237]: </span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="gp">In [238]: </span><span class="n">dfs</span>
<span class="gr">Out[238]: </span>
<span class="go">[                             Bank Name             City  ST   CERT  \</span>
<span class="go"> 0                          Allied Bank         Mulberry  AR     91   </span>
<span class="go"> 1         The Woodbury Banking Company         Woodbury  GA  11297   </span>
<span class="go"> 2               First CornerStone Bank  King of Prussia  PA  35312   </span>
<span class="go"> 3                   Trust Company Bank          Memphis  TN   9956   </span>
<span class="go"> 4           North Milwaukee State Bank        Milwaukee  WI  20364   </span>
<span class="go"> 5               Hometown National Bank         Longview  WA  35156   </span>
<span class="go"> 6                  The Bank of Georgia   Peachtree City  GA  35259   </span>
<span class="go"> ..                                 ...              ...  ..    ...   </span>
<span class="go"> 540      Hamilton Bank, NA  En Espanol            Miami  FL  24382   </span>
<span class="go"> 541             Sinclair National Bank         Gravette  AR  34248   </span>
<span class="go"> 542                 Superior Bank, FSB         Hinsdale  IL  32646   </span>
<span class="go"> 543                Malta National Bank            Malta  OH   6629   </span>
<span class="go"> 544    First Alliance Bank &amp; Trust Co.       Manchester  NH  34264   </span>
<span class="go"> 545  National State Bank of Metropolis       Metropolis  IL   3815   </span>
<span class="go"> 546                   Bank of Honolulu         Honolulu  HI  21029   </span>
<span class="go"> </span>
<span class="go">                    Acquiring Institution        Closing Date  \</span>
<span class="go"> 0                           Today&#39;s Bank  September 23, 2016   </span>
<span class="go"> 1                            United Bank     August 19, 2016   </span>
<span class="go"> 2    First-Citizens Bank &amp; Trust Company         May 6, 2016   </span>
<span class="go"> 3             The Bank of Fayette County      April 29, 2016   </span>
<span class="go"> 4    First-Citizens Bank &amp; Trust Company      March 11, 2016   </span>
<span class="go"> 5                         Twin City Bank     October 2, 2015   </span>
<span class="go"> 6                          Fidelity Bank     October 2, 2015   </span>
<span class="go"> ..                                   ...                 ...   </span>
<span class="go"> 540     Israel Discount Bank of New York    January 11, 2002   </span>
<span class="go"> 541                   Delta Trust &amp; Bank   September 7, 2001   </span>
<span class="go"> 542                Superior Federal, FSB       July 27, 2001   </span>
<span class="go"> 543                    North Valley Bank         May 3, 2001   </span>
<span class="go"> 544  Southern New Hampshire Bank &amp; Trust    February 2, 2001   </span>
<span class="go"> 545              Banterra Bank of Marion   December 14, 2000   </span>
<span class="go"> 546                   Bank of the Orient    October 13, 2000   </span>
<span class="go"> </span>
<span class="go">            Updated Date  </span>
<span class="go"> 0     November 17, 2016  </span>
<span class="go"> 1     November 17, 2016  </span>
<span class="go"> 2     September 6, 2016  </span>
<span class="go"> 3     September 6, 2016  </span>
<span class="go"> 4         June 16, 2016  </span>
<span class="go"> 5        April 13, 2016  </span>
<span class="go"> 6      October 24, 2016  </span>
<span class="go"> ..                  ...  </span>
<span class="go"> 540  September 21, 2015  </span>
<span class="go"> 541   February 10, 2004  </span>
<span class="go"> 542     August 19, 2014  </span>
<span class="go"> 543   November 18, 2002  </span>
<span class="go"> 544   February 18, 2003  </span>
<span class="go"> 545      March 17, 2005  </span>
<span class="go"> 546      March 17, 2005  </span>
<span class="go"> </span>
<span class="go"> [547 rows x 7 columns]]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The data from the above URL changes every Monday so the resulting data above
and the data below may be slightly different.</p>
</div>
<p>Read in the content of the file from the above URL and pass it to <code class="docutils literal"><span class="pre">read_html</span></code>
as a string</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [239]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   .....:</span>     <span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gp">   .....:</span> 

<span class="gp">In [240]: </span><span class="n">dfs</span>
<span class="gr">Out[240]: </span>
<span class="go">[                                    Bank Name          City  ST   CERT  \</span>
<span class="go"> 0    Banks of Wisconsin d/b/a Bank of Kenosha       Kenosha  WI  35386   </span>
<span class="go"> 1                        Central Arizona Bank    Scottsdale  AZ  34527   </span>
<span class="go"> 2                                Sunrise Bank      Valdosta  GA  58185   </span>
<span class="go"> 3                       Pisgah Community Bank     Asheville  NC  58701   </span>
<span class="go"> 4                         Douglas County Bank  Douglasville  GA  21649   </span>
<span class="go"> 5                                Parkway Bank        Lenoir  NC  57158   </span>
<span class="go"> 6                      Chipola Community Bank      Marianna  FL  58034   </span>
<span class="go"> ..                                        ...           ...  ..    ...   </span>
<span class="go"> 499               Hamilton Bank, NAEn Espanol         Miami  FL  24382   </span>
<span class="go"> 500                    Sinclair National Bank      Gravette  AR  34248   </span>
<span class="go"> 501                        Superior Bank, FSB      Hinsdale  IL  32646   </span>
<span class="go"> 502                       Malta National Bank         Malta  OH   6629   </span>
<span class="go"> 503           First Alliance Bank &amp; Trust Co.    Manchester  NH  34264   </span>
<span class="go"> 504         National State Bank of Metropolis    Metropolis  IL   3815   </span>
<span class="go"> 505                          Bank of Honolulu      Honolulu  HI  21029   </span>
<span class="go"> </span>
<span class="go">                    Acquiring Institution       Closing Date       Updated Date  </span>
<span class="go"> 0                  North Shore Bank, FSB       May 31, 2013       May 31, 2013  </span>
<span class="go"> 1                     Western State Bank       May 14, 2013       May 20, 2013  </span>
<span class="go"> 2                           Synovus Bank       May 10, 2013       May 21, 2013  </span>
<span class="go"> 3                     Capital Bank, N.A.       May 10, 2013       May 14, 2013  </span>
<span class="go"> 4                    Hamilton State Bank     April 26, 2013       May 16, 2013  </span>
<span class="go"> 5       CertusBank, National Association     April 26, 2013       May 17, 2013  </span>
<span class="go"> 6          First Federal Bank of Florida     April 19, 2013       May 16, 2013  </span>
<span class="go"> ..                                   ...                ...                ...  </span>
<span class="go"> 499     Israel Discount Bank of New York   January 11, 2002       June 5, 2012  </span>
<span class="go"> 500                   Delta Trust &amp; Bank  September 7, 2001  February 10, 2004  </span>
<span class="go"> 501                Superior Federal, FSB      July 27, 2001       June 5, 2012  </span>
<span class="go"> 502                    North Valley Bank        May 3, 2001  November 18, 2002  </span>
<span class="go"> 503  Southern New Hampshire Bank &amp; Trust   February 2, 2001  February 18, 2003  </span>
<span class="go"> 504              Banterra Bank of Marion  December 14, 2000     March 17, 2005  </span>
<span class="go"> 505                   Bank of the Orient   October 13, 2000     March 17, 2005  </span>
<span class="go"> </span>
<span class="go"> [506 rows x 7 columns]]</span>
</pre></div>
</div>
<p>You can even pass in an instance of <code class="docutils literal"><span class="pre">StringIO</span></code> if you so desire</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [241]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   .....:</span>     <span class="n">sio</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gp">   .....:</span> 

<span class="gp">In [242]: </span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">sio</span><span class="p">)</span>

<span class="gp">In [243]: </span><span class="n">dfs</span>
<span class="gr">Out[243]: </span>
<span class="go">[                                    Bank Name          City  ST   CERT  \</span>
<span class="go"> 0    Banks of Wisconsin d/b/a Bank of Kenosha       Kenosha  WI  35386   </span>
<span class="go"> 1                        Central Arizona Bank    Scottsdale  AZ  34527   </span>
<span class="go"> 2                                Sunrise Bank      Valdosta  GA  58185   </span>
<span class="go"> 3                       Pisgah Community Bank     Asheville  NC  58701   </span>
<span class="go"> 4                         Douglas County Bank  Douglasville  GA  21649   </span>
<span class="go"> 5                                Parkway Bank        Lenoir  NC  57158   </span>
<span class="go"> 6                      Chipola Community Bank      Marianna  FL  58034   </span>
<span class="go"> ..                                        ...           ...  ..    ...   </span>
<span class="go"> 499               Hamilton Bank, NAEn Espanol         Miami  FL  24382   </span>
<span class="go"> 500                    Sinclair National Bank      Gravette  AR  34248   </span>
<span class="go"> 501                        Superior Bank, FSB      Hinsdale  IL  32646   </span>
<span class="go"> 502                       Malta National Bank         Malta  OH   6629   </span>
<span class="go"> 503           First Alliance Bank &amp; Trust Co.    Manchester  NH  34264   </span>
<span class="go"> 504         National State Bank of Metropolis    Metropolis  IL   3815   </span>
<span class="go"> 505                          Bank of Honolulu      Honolulu  HI  21029   </span>
<span class="go"> </span>
<span class="go">                    Acquiring Institution       Closing Date       Updated Date  </span>
<span class="go"> 0                  North Shore Bank, FSB       May 31, 2013       May 31, 2013  </span>
<span class="go"> 1                     Western State Bank       May 14, 2013       May 20, 2013  </span>
<span class="go"> 2                           Synovus Bank       May 10, 2013       May 21, 2013  </span>
<span class="go"> 3                     Capital Bank, N.A.       May 10, 2013       May 14, 2013  </span>
<span class="go"> 4                    Hamilton State Bank     April 26, 2013       May 16, 2013  </span>
<span class="go"> 5       CertusBank, National Association     April 26, 2013       May 17, 2013  </span>
<span class="go"> 6          First Federal Bank of Florida     April 19, 2013       May 16, 2013  </span>
<span class="go"> ..                                   ...                ...                ...  </span>
<span class="go"> 499     Israel Discount Bank of New York   January 11, 2002       June 5, 2012  </span>
<span class="go"> 500                   Delta Trust &amp; Bank  September 7, 2001  February 10, 2004  </span>
<span class="go"> 501                Superior Federal, FSB      July 27, 2001       June 5, 2012  </span>
<span class="go"> 502                    North Valley Bank        May 3, 2001  November 18, 2002  </span>
<span class="go"> 503  Southern New Hampshire Bank &amp; Trust   February 2, 2001  February 18, 2003  </span>
<span class="go"> 504              Banterra Bank of Marion  December 14, 2000     March 17, 2005  </span>
<span class="go"> 505                   Bank of the Orient   October 13, 2000     March 17, 2005  </span>
<span class="go"> </span>
<span class="go"> [506 rows x 7 columns]]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The following examples are not run by the IPython evaluator due to the fact
that having so many network-accessing functions slows down the documentation
build. If you spot an error or an example that doesn&#8217;t run, please do not
hesitate to report it over on <a class="reference external" href="http://www.github.com/pandas-dev/pandas/issues">pandas GitHub issues page</a>.</p>
</div>
<p>Read a URL and match a table that contains specific text</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="s1">&#39;Metcalf Bank&#39;</span>
<span class="n">df_list</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">match</span><span class="p">)</span>
</pre></div>
</div>
<p>Specify a header row (by default <code class="docutils literal"><span class="pre">&lt;th&gt;</span></code> elements are used to form the column
index); if specified, the header row is taken from the data minus the parsed
header elements (<code class="docutils literal"><span class="pre">&lt;th&gt;</span></code> elements).</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Specify an index column</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Specify a number of rows to skip</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Specify a number of rows to skip using a list (<code class="docutils literal"><span class="pre">xrange</span></code> (Python 2 only) works
as well)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>Specify an HTML attribute</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dfs1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;table&#39;</span><span class="p">})</span>
<span class="n">dfs2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;sortable&#39;</span><span class="p">})</span>
<span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">dfs1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">dfs2</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>  <span class="c1"># Should be True</span>
</pre></div>
</div>
<p>Specify values that should be converted to NaN</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;No Acquirer&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.19.</span></p>
</div>
<p>Specify whether to keep the default set of NaN values</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">keep_default_na</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.19.</span></p>
</div>
<p>Specify converters for columns. This is useful for numerical text data that has
leading zeros.  By default columns that are numerical are cast to numeric
types and the leading zeros are lost.  To avoid this, we can convert these
columns to strings.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">url_mcc</span> <span class="o">=</span> <span class="s1">&#39;https://en.wikipedia.org/wiki/Mobile_country_code&#39;</span>
<span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url_mcc</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s1">&#39;Telekom Albania&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">converters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;MNC&#39;</span><span class="p">:</span>
<span class="nb">str</span><span class="p">})</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.19.</span></p>
</div>
<p>Use some combination of the above</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s1">&#39;Metcalf Bank&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Read in pandas <code class="docutils literal"><span class="pre">to_html</span></code> output (with some loss of floating point precision)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">float_format</span><span class="o">=</span><span class="s1">&#39;{0:.40g}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">)</span>
<span class="n">dfin</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">lxml</span></code> backend will raise an error on a failed parse if that is the only
parser you provide (if you only have a single parser you can provide just a
string, but it is considered good practice to pass a list with one string if,
for example, the function expects a sequence of strings)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s1">&#39;Metcalf Bank&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">flavor</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lxml&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s1">&#39;Metcalf Bank&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">flavor</span><span class="o">=</span><span class="s1">&#39;lxml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>However, if you have bs4 and html5lib installed and pass <code class="docutils literal"><span class="pre">None</span></code> or <code class="docutils literal"><span class="pre">['lxml',</span>
<span class="pre">'bs4']</span></code> then the parse will most likely succeed. Note that <em>as soon as a parse
succeeds, the function will return</em>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s1">&#39;Metcalf Bank&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">flavor</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lxml&#39;</span><span class="p">,</span> <span class="s1">&#39;bs4&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-to-html-files">
<span id="io-html"></span><h3>Writing to HTML files<a class="headerlink" href="#writing-to-html-files" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">DataFrame</span></code> objects have an instance method <code class="docutils literal"><span class="pre">to_html</span></code> which renders the
contents of the <code class="docutils literal"><span class="pre">DataFrame</span></code> as an HTML table. The function arguments are as
in the method <code class="docutils literal"><span class="pre">to_string</span></code> described above.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Not all of the possible options for <code class="docutils literal"><span class="pre">DataFrame.to_html</span></code> are shown here for
brevity&#8217;s sake. See <code class="xref py py-func docutils literal"><span class="pre">to_html()</span></code> for the
full set of options.</p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [244]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

<span class="gp">In [245]: </span><span class="n">df</span>
<span class="gr">Out[245]: </span>
<span class="go">          0         1</span>
<span class="go">0 -0.184744  0.496971</span>
<span class="go">1 -0.856240  1.857977</span>

<span class="gp">In [246]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">())</span>  <span class="c1"># raw html</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;-0.184744&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;0.496971&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;-0.856240&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;1.857977&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<p>HTML:</p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.184744</td>
      <td>0.496971</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.856240</td>
      <td>1.857977</td>
    </tr>
  </tbody>
</table><p>The <code class="docutils literal"><span class="pre">columns</span></code> argument will limit the columns shown</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [247]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;-0.184744&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;-0.856240&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<p>HTML:</p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.184744</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.856240</td>
    </tr>
  </tbody>
</table><p><code class="docutils literal"><span class="pre">float_format</span></code> takes a Python callable to control the precision of floating
point values</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [248]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">float_format</span><span class="o">=</span><span class="s1">&#39;{0:.10f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">))</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;-0.1847438576&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;0.4969711327&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;-0.8562396763&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;1.8579766508&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<p>HTML:</p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.1847438576</td>
      <td>0.4969711327</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.8562396763</td>
      <td>1.8579766508</td>
    </tr>
  </tbody>
</table><p><code class="docutils literal"><span class="pre">bold_rows</span></code> will make the row labels bold by default, but you can turn that
off</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [249]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">bold_rows</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;td&gt;0&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-0.184744&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;0.496971&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;td&gt;1&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-0.856240&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;1.857977&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>-0.184744</td>
      <td>0.496971</td>
    </tr>
    <tr>
      <td>1</td>
      <td>-0.856240</td>
      <td>1.857977</td>
    </tr>
  </tbody>
</table><p>The <code class="docutils literal"><span class="pre">classes</span></code> argument provides the ability to give the resulting HTML
table CSS classes. Note that these classes are <em>appended</em> to the existing
<code class="docutils literal"><span class="pre">'dataframe'</span></code> class.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [250]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;awesome_table_class&#39;</span><span class="p">,</span> <span class="s1">&#39;even_more_awesome_class&#39;</span><span class="p">]))</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe awesome_table_class even_more_awesome_class&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;-0.184744&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;0.496971&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;-0.856240&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;1.857977&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<p>Finally, the <code class="docutils literal"><span class="pre">escape</span></code> argument allows you to control whether the
&#8220;&lt;&#8221;, &#8220;&gt;&#8221; and &#8220;&amp;&#8221; characters escaped in the resulting HTML (by default it is
<code class="docutils literal"><span class="pre">True</span></code>). So to get the HTML without escaped characters pass <code class="docutils literal"><span class="pre">escape=False</span></code></p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [251]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;&amp;&lt;&gt;&#39;</span><span class="p">),</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">)})</span>
</pre></div>
</div>
<p>Escaped:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [252]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">())</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;a&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;b&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;&amp;amp;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-0.474063&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;&amp;lt;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-0.230305&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;2&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;&amp;gt;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-0.400654&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>&amp;</td>
      <td>-0.474063</td>
    </tr>
    <tr>
      <th>1</th>
      <td>&lt;</td>
      <td>-0.230305</td>
    </tr>
    <tr>
      <th>2</th>
      <td>&gt;</td>
      <td>-0.400654</td>
    </tr>
  </tbody>
</table><p>Not escaped:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [253]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">escape</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;a&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;b&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;&amp;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-0.474063&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;&lt;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-0.230305&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;2&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;&gt;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-0.400654&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>&</td>
      <td>-0.474063</td>
    </tr>
    <tr>
      <th>1</th>
      <td><</td>
      <td>-0.230305</td>
    </tr>
    <tr>
      <th>2</th>
      <td>></td>
      <td>-0.400654</td>
    </tr>
  </tbody>
</table><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some browsers may not show a difference in the rendering of the previous two
HTML tables.</p>
</div>
</div>
</div>
<div class="section" id="excel-files">
<span id="io-excel"></span><h2>Excel files<a class="headerlink" href="#excel-files" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="generated/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal"><span class="pre">read_excel()</span></code></a> method can read Excel 2003 (<code class="docutils literal"><span class="pre">.xls</span></code>) and
Excel 2007+ (<code class="docutils literal"><span class="pre">.xlsx</span></code>) files using the <code class="docutils literal"><span class="pre">xlrd</span></code> Python
module.  The <a class="reference internal" href="generated/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel" title="pandas.DataFrame.to_excel"><code class="xref py py-meth docutils literal"><span class="pre">to_excel()</span></code></a> instance method is used for
saving a <code class="docutils literal"><span class="pre">DataFrame</span></code> to Excel.  Generally the semantics are
similar to working with <a class="reference internal" href="#io-read-csv-table"><span class="std std-ref">csv</span></a> data.  See the <a class="reference internal" href="cookbook.html#cookbook-excel"><span class="std std-ref">cookbook</span></a> for some
advanced strategies</p>
<div class="section" id="reading-excel-files">
<span id="io-excel-reader"></span><h3>Reading Excel Files<a class="headerlink" href="#reading-excel-files" title="Permalink to this headline">¶</a></h3>
<p>In the most basic use-case, <code class="docutils literal"><span class="pre">read_excel</span></code> takes a path to an Excel
file, and the <code class="docutils literal"><span class="pre">sheetname</span></code> indicating which sheet to parse.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Returns a DataFrame</span>
<span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">,</span> <span class="n">sheetname</span><span class="o">=</span><span class="s1">&#39;Sheet1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="excelfile-class">
<span id="io-excel-excelfile-class"></span><h4><code class="docutils literal"><span class="pre">ExcelFile</span></code> class<a class="headerlink" href="#excelfile-class" title="Permalink to this headline">¶</a></h4>
<p>To facilitate working with multiple sheets from the same file, the <code class="docutils literal"><span class="pre">ExcelFile</span></code>
class can be used to wrap the file and can be be passed into <code class="docutils literal"><span class="pre">read_excel</span></code>
There will be a performance benefit for reading multiple sheets as the file is
read into memory only once.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">xlsx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xlsx</span><span class="p">,</span> <span class="s1">&#39;Sheet1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">ExcelFile</span></code> class can also be used as a context manager.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">xls</span><span class="p">:</span>
    <span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xls</span><span class="p">,</span> <span class="s1">&#39;Sheet1&#39;</span><span class="p">)</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xls</span><span class="p">,</span> <span class="s1">&#39;Sheet2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">sheet_names</span></code> property will generate
a list of the sheet names in the file.</p>
<p>The primary use-case for an <code class="docutils literal"><span class="pre">ExcelFile</span></code> is parsing multiple sheets with
different parameters</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1"># For when Sheet1&#39;s format differs from Sheet2</span>
<span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">xls</span><span class="p">:</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Sheet1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xls</span><span class="p">,</span> <span class="s1">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NA&#39;</span><span class="p">])</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Sheet2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xls</span><span class="p">,</span> <span class="s1">&#39;Sheet2&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that if the same parsing parameters are used for all sheets, a list
of sheet names can simply be passed to <code class="docutils literal"><span class="pre">read_excel</span></code> with no loss in performance.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># using the ExcelFile class</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">xls</span><span class="p">:</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Sheet1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_excel</span><span class="p">(</span><span class="n">xls</span><span class="p">,</span> <span class="s1">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NA&#39;</span><span class="p">])</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Sheet2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_excel</span><span class="p">(</span><span class="n">xls</span><span class="p">,</span> <span class="s1">&#39;Sheet2&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NA&#39;</span><span class="p">])</span>

<span class="c1"># equivalent using the read_excel function</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="s1">&#39;Sheet2&#39;</span><span class="p">],</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NA&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.12.</span></p>
</div>
<p><code class="docutils literal"><span class="pre">ExcelFile</span></code> has been moved to the top level namespace.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.17.</span></p>
</div>
<p><code class="docutils literal"><span class="pre">read_excel</span></code> can take an <code class="docutils literal"><span class="pre">ExcelFile</span></code> object as input</p>
</div>
<div class="section" id="specifying-sheets">
<span id="io-excel-specifying-sheets"></span><h4>Specifying Sheets<a class="headerlink" href="#specifying-sheets" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The second argument is <code class="docutils literal"><span class="pre">sheetname</span></code>, not to be confused with <code class="docutils literal"><span class="pre">ExcelFile.sheet_names</span></code></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An ExcelFile&#8217;s attribute <code class="docutils literal"><span class="pre">sheet_names</span></code> provides access to a list of sheets.</p>
</div>
<ul class="simple">
<li>The arguments <code class="docutils literal"><span class="pre">sheetname</span></code> allows specifying the sheet or sheets to read.</li>
<li>The default value for <code class="docutils literal"><span class="pre">sheetname</span></code> is 0, indicating to read the first sheet</li>
<li>Pass a string to refer to the name of a particular sheet in the workbook.</li>
<li>Pass an integer to refer to the index of a sheet. Indices follow Python
convention, beginning at 0.</li>
<li>Pass a list of either strings or integers, to return a dictionary of specified sheets.</li>
<li>Pass a <code class="docutils literal"><span class="pre">None</span></code> to return a dictionary of all available sheets.</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Returns a DataFrame</span>
<span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">,</span> <span class="s1">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NA&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Using the sheet index:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Returns a DataFrame</span>
<span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NA&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Using all default values:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Returns a DataFrame</span>
<span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Using None to get all sheets:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Returns a dictionary of DataFrames</span>
<span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">,</span><span class="n">sheetname</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Using a list to get multiple sheets:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Returns the 1st and 4th sheet, as a dictionary of DataFrames.</span>
<span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">,</span><span class="n">sheetname</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Sheet1&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.16.</span></p>
</div>
<p><code class="docutils literal"><span class="pre">read_excel</span></code> can read more than one sheet, by setting <code class="docutils literal"><span class="pre">sheetname</span></code> to either
a list of sheet names, a list of sheet positions, or <code class="docutils literal"><span class="pre">None</span></code> to read all sheets.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.13.</span></p>
</div>
<p>Sheets can be specified by sheet index or sheet name, using an integer or string,
respectively.</p>
</div>
<div class="section" id="reading-a-multiindex">
<span id="io-excel-reading-multiindex"></span><h4>Reading a <code class="docutils literal"><span class="pre">MultiIndex</span></code><a class="headerlink" href="#reading-a-multiindex" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.17.</span></p>
</div>
<p><code class="docutils literal"><span class="pre">read_excel</span></code> can read a <code class="docutils literal"><span class="pre">MultiIndex</span></code> index, by passing a list of columns to <code class="docutils literal"><span class="pre">index_col</span></code>
and a <code class="docutils literal"><span class="pre">MultiIndex</span></code> column by passing a list of rows to <code class="docutils literal"><span class="pre">header</span></code>.  If either the <code class="docutils literal"><span class="pre">index</span></code>
or <code class="docutils literal"><span class="pre">columns</span></code> have serialized level names those will be read in as well by specifying
the rows/columns that make up the levels.</p>
<p>For example, to read in a <code class="docutils literal"><span class="pre">MultiIndex</span></code> index without names:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [254]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]},</span>
<span class="gp">   .....:</span>                   <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">],[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">]]))</span>
<span class="gp">   .....:</span> 

<span class="gp">In [255]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xlsx&#39;</span><span class="p">)</span>

<span class="gp">In [256]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xlsx&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

<span class="gp">In [257]: </span><span class="n">df</span>
<span class="gr">Out[257]: </span>
<span class="go">     a  b</span>
<span class="go">a c  1  5</span>
<span class="go">  d  2  6</span>
<span class="go">b c  3  7</span>
<span class="go">  d  4  8</span>
</pre></div>
</div>
<p>If the index has level names, they will parsed as well, using the same
parameters.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [258]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">set_names</span><span class="p">([</span><span class="s1">&#39;lvl1&#39;</span><span class="p">,</span> <span class="s1">&#39;lvl2&#39;</span><span class="p">])</span>

<span class="gp">In [259]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xlsx&#39;</span><span class="p">)</span>

<span class="gp">In [260]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xlsx&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

<span class="gp">In [261]: </span><span class="n">df</span>
<span class="gr">Out[261]: </span>
<span class="go">           a  b</span>
<span class="go">lvl1 lvl2      </span>
<span class="go">a    c     1  5</span>
<span class="go">     d     2  6</span>
<span class="go">b    c     3  7</span>
<span class="go">     d     4  8</span>
</pre></div>
</div>
<p>If the source file has both <code class="docutils literal"><span class="pre">MultiIndex</span></code> index and columns, lists specifying each
should be passed to <code class="docutils literal"><span class="pre">index_col</span></code> and <code class="docutils literal"><span class="pre">header</span></code></p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [262]: </span><span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([[</span><span class="s1">&#39;a&#39;</span><span class="p">],[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">])</span>

<span class="gp">In [263]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xlsx&#39;</span><span class="p">)</span>

<span class="gp">In [264]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xlsx&#39;</span><span class="p">,</span>
<span class="gp">   .....:</span>                     <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [265]: </span><span class="n">df</span>
<span class="gr">Out[265]: </span>
<span class="go">c1         a   </span>
<span class="go">c2         b  d</span>
<span class="go">lvl1 lvl2      </span>
<span class="go">a    c     1  5</span>
<span class="go">     d     2  6</span>
<span class="go">b    c     3  7</span>
<span class="go">     d     4  8</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Excel files saved in version 0.16.2 or prior that had index names will still able to be read in,
but the <code class="docutils literal"><span class="pre">has_index_names</span></code> argument must specified to <code class="docutils literal"><span class="pre">True</span></code>.</p>
</div>
</div>
<div class="section" id="parsing-specific-columns">
<h4>Parsing Specific Columns<a class="headerlink" href="#parsing-specific-columns" title="Permalink to this headline">¶</a></h4>
<p>It is often the case that users will insert columns to do temporary computations
in Excel and you may not want to read in those columns. <cite>read_excel</cite> takes
a <cite>parse_cols</cite> keyword to allow you to specify a subset of columns to parse.</p>
<p>If <cite>parse_cols</cite> is an integer, then it is assumed to indicate the last column
to be parsed.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">,</span> <span class="s1">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">parse_cols</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>If <cite>parse_cols</cite> is a list of integers, then it is assumed to be the file column
indices to be parsed.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">,</span> <span class="s1">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">parse_cols</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="cell-converters">
<h4>Cell Converters<a class="headerlink" href="#cell-converters" title="Permalink to this headline">¶</a></h4>
<p>It is possible to transform the contents of Excel cells via the <cite>converters</cite>
option. For instance, to convert a column to boolean:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">,</span> <span class="s1">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">converters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;MyBools&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">})</span>
</pre></div>
</div>
<p>This options handles missing values and treats exceptions in the converters
as missing data. Transformations are applied cell by cell rather than to the
column as a whole, so the array dtype is not guaranteed. For instance, a
column of integers with missing values cannot be transformed to an array
with integer dtype, because NaN is strictly a float. You can manually mask
missing data to recover integer dtype:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">cfun</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">,</span> <span class="s1">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">converters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;MyInts&#39;</span><span class="p">:</span> <span class="n">cfun</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="writing-excel-files">
<span id="io-excel-writer"></span><h3>Writing Excel Files<a class="headerlink" href="#writing-excel-files" title="Permalink to this headline">¶</a></h3>
<div class="section" id="writing-excel-files-to-disk">
<h4>Writing Excel Files to Disk<a class="headerlink" href="#writing-excel-files-to-disk" title="Permalink to this headline">¶</a></h4>
<p>To write a DataFrame object to a sheet of an Excel file, you can use the
<code class="docutils literal"><span class="pre">to_excel</span></code> instance method.  The arguments are largely the same as <code class="docutils literal"><span class="pre">to_csv</span></code>
described above, the first argument being the name of the excel file, and the
optional second argument the name of the sheet to which the DataFrame should be
written.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Sheet1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Files with a <code class="docutils literal"><span class="pre">.xls</span></code> extension will be written using <code class="docutils literal"><span class="pre">xlwt</span></code> and those with a
<code class="docutils literal"><span class="pre">.xlsx</span></code> extension will be written using <code class="docutils literal"><span class="pre">xlsxwriter</span></code> (if available) or
<code class="docutils literal"><span class="pre">openpyxl</span></code>.</p>
<p>The DataFrame will be written in a way that tries to mimic the REPL output. One
difference from 0.12.0 is that the <code class="docutils literal"><span class="pre">index_label</span></code> will be placed in the second
row instead of the first. You can get the previous behaviour by setting the
<code class="docutils literal"><span class="pre">merge_cells</span></code> option in <code class="docutils literal"><span class="pre">to_excel()</span></code> to <code class="docutils literal"><span class="pre">False</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xlsx&#39;</span><span class="p">,</span> <span class="n">index_label</span><span class="o">=</span><span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="n">merge_cells</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p>The Panel class also has a <code class="docutils literal"><span class="pre">to_excel</span></code> instance method,
which writes each DataFrame in the Panel to a separate sheet.</p>
<p>In order to write separate DataFrames to separate sheets in a single Excel file,
one can pass an <code class="xref py py-class docutils literal"><span class="pre">ExcelWriter</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">ExcelWriter</span><span class="p">(</span><span class="s1">&#39;path_to_file.xlsx&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
    <span class="n">df1</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Sheet1&#39;</span><span class="p">)</span>
    <span class="n">df2</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Sheet2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Wringing a little more performance out of <code class="docutils literal"><span class="pre">read_excel</span></code>
Internally, Excel stores all numeric data as floats. Because this can
produce unexpected behavior when reading in data, pandas defaults to trying
to convert integers to floats if it doesn&#8217;t lose information (<code class="docutils literal"><span class="pre">1.0</span> <span class="pre">--&gt;</span>
<span class="pre">1</span></code>).  You can pass <code class="docutils literal"><span class="pre">convert_float=False</span></code> to disable this behavior, which
may give a slight performance improvement.</p>
</div>
</div>
<div class="section" id="writing-excel-files-to-memory">
<span id="io-excel-writing-buffer"></span><h4>Writing Excel Files to Memory<a class="headerlink" href="#writing-excel-files-to-memory" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.17.</span></p>
</div>
<p>Pandas supports writing Excel files to buffer-like objects such as <code class="docutils literal"><span class="pre">StringIO</span></code> or
<code class="docutils literal"><span class="pre">BytesIO</span></code> using <code class="xref py py-class docutils literal"><span class="pre">ExcelWriter</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.17.</span></p>
</div>
<p>Added support for Openpyxl &gt;= 2.2</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Safe import for either Python 2.x or 3.x</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">cStringIO</span> <span class="kn">import</span> <span class="n">StringIO</span> <span class="k">as</span> <span class="n">BytesIO</span>

<span class="n">bio</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>

<span class="c1"># By setting the &#39;engine&#39; in the ExcelWriter constructor.</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">ExcelWriter</span><span class="p">(</span><span class="n">bio</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;xlsxwriter&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Sheet1&#39;</span><span class="p">)</span>

<span class="c1"># Save the workbook</span>
<span class="n">writer</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="c1"># Seek to the beginning and read to copy the workbook to a variable in memory</span>
<span class="n">bio</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">workbook</span> <span class="o">=</span> <span class="n">bio</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">engine</span></code> is optional but recommended.  Setting the engine determines
the version of workbook produced. Setting <code class="docutils literal"><span class="pre">engine='xlrd'</span></code> will produce an
Excel 2003-format workbook (xls).  Using either <code class="docutils literal"><span class="pre">'openpyxl'</span></code> or
<code class="docutils literal"><span class="pre">'xlsxwriter'</span></code> will produce an Excel 2007-format workbook (xlsx). If
omitted, an Excel 2007-formatted workbook is produced.</p>
</div>
</div>
</div>
<div class="section" id="excel-writer-engines">
<span id="io-excel-writers"></span><h3>Excel writer engines<a class="headerlink" href="#excel-writer-engines" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.13.</span></p>
</div>
<p><code class="docutils literal"><span class="pre">pandas</span></code> chooses an Excel writer via two methods:</p>
<ol class="arabic simple">
<li>the <code class="docutils literal"><span class="pre">engine</span></code> keyword argument</li>
<li>the filename extension (via the default specified in config options)</li>
</ol>
<p>By default, <code class="docutils literal"><span class="pre">pandas</span></code> uses the <a class="reference external" href="https://xlsxwriter.readthedocs.io">XlsxWriter</a>  for <code class="docutils literal"><span class="pre">.xlsx</span></code> and <a class="reference external" href="https://openpyxl.readthedocs.io/">openpyxl</a>
for <code class="docutils literal"><span class="pre">.xlsm</span></code> files and <a class="reference external" href="http://www.python-excel.org">xlwt</a> for <code class="docutils literal"><span class="pre">.xls</span></code> files.  If you have multiple
engines installed, you can set the default engine through <a class="reference internal" href="options.html#options"><span class="std std-ref">setting the
config options</span></a> <code class="docutils literal"><span class="pre">io.excel.xlsx.writer</span></code> and
<code class="docutils literal"><span class="pre">io.excel.xls.writer</span></code>. pandas will fall back on <a class="reference external" href="https://openpyxl.readthedocs.io/">openpyxl</a> for <code class="docutils literal"><span class="pre">.xlsx</span></code>
files if <a class="reference external" href="https://xlsxwriter.readthedocs.io">Xlsxwriter</a> is not available.</p>
<p>To specify which writer you want to use, you can pass an engine keyword
argument to <code class="docutils literal"><span class="pre">to_excel</span></code> and to <code class="docutils literal"><span class="pre">ExcelWriter</span></code>. The built-in engines are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">openpyxl</span></code>: This includes stable support for Openpyxl from 1.6.1. However,
it is advised to use version 2.2 and higher, especially when working with
styles.</li>
<li><code class="docutils literal"><span class="pre">xlsxwriter</span></code></li>
<li><code class="docutils literal"><span class="pre">xlwt</span></code></li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># By setting the &#39;engine&#39; in the DataFrame and Panel &#39;to_excel()&#39; methods.</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;xlsxwriter&#39;</span><span class="p">)</span>

<span class="c1"># By setting the &#39;engine&#39; in the ExcelWriter constructor.</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">ExcelWriter</span><span class="p">(</span><span class="s1">&#39;path_to_file.xlsx&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;xlsxwriter&#39;</span><span class="p">)</span>

<span class="c1"># Or via pandas configuration.</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">options</span>
<span class="n">options</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">excel</span><span class="o">.</span><span class="n">xlsx</span><span class="o">.</span><span class="n">writer</span> <span class="o">=</span> <span class="s1">&#39;xlsxwriter&#39;</span>

<span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Sheet1&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="clipboard">
<span id="io-clipboard"></span><h2>Clipboard<a class="headerlink" href="#clipboard" title="Permalink to this headline">¶</a></h2>
<p>A handy way to grab data is to use the <code class="docutils literal"><span class="pre">read_clipboard</span></code> method, which takes
the contents of the clipboard buffer and passes them to the <code class="docutils literal"><span class="pre">read_table</span></code>
method. For instance, you can copy the following
text to the clipboard (CTRL-C on many operating systems):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>  <span class="n">A</span> <span class="n">B</span> <span class="n">C</span>
<span class="n">x</span> <span class="mi">1</span> <span class="mi">4</span> <span class="n">p</span>
<span class="n">y</span> <span class="mi">2</span> <span class="mi">5</span> <span class="n">q</span>
<span class="n">z</span> <span class="mi">3</span> <span class="mi">6</span> <span class="n">r</span>
</pre></div>
</div>
<p>And then import the data directly to a DataFrame by calling:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">clipdf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_clipboard</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [266]: </span><span class="n">clipdf</span>
<span class="gr">Out[266]: </span>
<span class="go">   A  B  C</span>
<span class="go">x  1  4  p</span>
<span class="go">y  2  5  q</span>
<span class="go">z  3  6  r</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">to_clipboard</span></code> method can be used to write the contents of a DataFrame to
the clipboard. Following which you can paste the clipboard contents into other
applications (CTRL-V on many operating systems). Here we illustrate writing a
DataFrame into clipboard and reading it back.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [267]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>

<span class="gp">In [268]: </span><span class="n">df</span>
<span class="gr">Out[268]: </span>
<span class="go">          0         1         2</span>
<span class="go">0 -0.288267 -0.084905  0.004772</span>
<span class="go">1  1.382989  0.343635 -1.253994</span>
<span class="go">2 -0.124925  0.212244  0.496654</span>
<span class="go">3  0.525417  1.238640 -1.210543</span>
<span class="go">4 -1.175743 -0.172372 -0.734129</span>

<span class="gp">In [269]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_clipboard</span><span class="p">()</span>

<span class="gp">In [270]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_clipboard</span><span class="p">()</span>
<span class="gr">Out[270]: </span>
<span class="go">          0         1         2</span>
<span class="go">0 -0.288267 -0.084905  0.004772</span>
<span class="go">1  1.382989  0.343635 -1.253994</span>
<span class="go">2 -0.124925  0.212244  0.496654</span>
<span class="go">3  0.525417  1.238640 -1.210543</span>
<span class="go">4 -1.175743 -0.172372 -0.734129</span>
</pre></div>
</div>
<p>We can see that we got the same content back, which we had earlier written to the clipboard.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may need to install xclip or xsel (with gtk or PyQt4 modules) on Linux to use these methods.</p>
</div>
</div>
<div class="section" id="pickling">
<span id="io-pickle"></span><h2>Pickling<a class="headerlink" href="#pickling" title="Permalink to this headline">¶</a></h2>
<p>All pandas objects are equipped with <code class="docutils literal"><span class="pre">to_pickle</span></code> methods which use Python&#8217;s
<code class="docutils literal"><span class="pre">cPickle</span></code> module to save data structures to disk using the pickle format.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [271]: </span><span class="n">df</span>
<span class="gr">Out[271]: </span>
<span class="go">          0         1         2</span>
<span class="go">0 -0.288267 -0.084905  0.004772</span>
<span class="go">1  1.382989  0.343635 -1.253994</span>
<span class="go">2 -0.124925  0.212244  0.496654</span>
<span class="go">3  0.525417  1.238640 -1.210543</span>
<span class="go">4 -1.175743 -0.172372 -0.734129</span>

<span class="gp">In [272]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s1">&#39;foo.pkl&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">read_pickle</span></code> function in the <code class="docutils literal"><span class="pre">pandas</span></code> namespace can be used to load
any pickled pandas object (or any other pickled object) from file:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [273]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s1">&#39;foo.pkl&#39;</span><span class="p">)</span>
<span class="gr">Out[273]: </span>
<span class="go">          0         1         2</span>
<span class="go">0 -0.288267 -0.084905  0.004772</span>
<span class="go">1  1.382989  0.343635 -1.253994</span>
<span class="go">2 -0.124925  0.212244  0.496654</span>
<span class="go">3  0.525417  1.238640 -1.210543</span>
<span class="go">4 -1.175743 -0.172372 -0.734129</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Loading pickled data received from untrusted sources can be unsafe.</p>
<p class="last">See: <a class="reference external" href="http://docs.python.org/2.7/library/pickle.html">http://docs.python.org/2.7/library/pickle.html</a></p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Several internal refactorings, 0.13 (<a class="reference internal" href="whatsnew.html#whatsnew-0130-refactoring"><span class="std std-ref">Series Refactoring</span></a>), and 0.15 (<a class="reference internal" href="whatsnew.html#whatsnew-0150-refactoring"><span class="std std-ref">Index Refactoring</span></a>),
preserve compatibility with pickles created prior to these versions. However, these must
be read with <code class="docutils literal"><span class="pre">pd.read_pickle</span></code>, rather than the default python <code class="docutils literal"><span class="pre">pickle.load</span></code>.
See <a class="reference external" href="http://stackoverflow.com/questions/20444593/pandas-compiled-from-source-default-pickle-behavior-changed">this question</a>
for a detailed explanation.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These methods were previously <code class="docutils literal"><span class="pre">pd.save</span></code> and <code class="docutils literal"><span class="pre">pd.load</span></code>, prior to 0.12.0, and are now deprecated.</p>
</div>
</div>
<div class="section" id="msgpack-experimental">
<span id="io-msgpack"></span><h2>msgpack (experimental)<a class="headerlink" href="#msgpack-experimental" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.13.0.</span></p>
</div>
<p>Starting in 0.13.0, pandas is supporting the <code class="docutils literal"><span class="pre">msgpack</span></code> format for
object serialization. This is a lightweight portable binary format, similar
to binary JSON, that is highly space efficient, and provides good performance
both on the writing (serialization), and reading (deserialization).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>This is a very new feature of pandas. We intend to provide certain
optimizations in the io of the <code class="docutils literal"><span class="pre">msgpack</span></code> data. Since this is marked
as an EXPERIMENTAL LIBRARY, the storage format may not be stable until a future release.</p>
<p>As a result of writing format changes and other issues:</p>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Packed with</th>
<th class="head">Can be unpacked with</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pre-0.17 / Python 2</td>
<td>any</td>
</tr>
<tr class="row-odd"><td>pre-0.17 / Python 3</td>
<td>any</td>
</tr>
<tr class="row-even"><td>0.17 / Python 2</td>
<td><ul class="first last simple">
<li>0.17 / Python 2</li>
<li>&gt;=0.18 / any Python</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>0.17 / Python 3</td>
<td>&gt;=0.18 / any Python</td>
</tr>
<tr class="row-even"><td>0.18</td>
<td>&gt;= 0.18</td>
</tr>
</tbody>
</table>
<p class="last">Reading (files packed by older versions) is backward-compatibile, except for files packed with 0.17 in Python 2, in which case only they can only be unpacked in Python 2.</p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [274]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;AB&#39;</span><span class="p">))</span>

<span class="gp">In [275]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_msgpack</span><span class="p">(</span><span class="s1">&#39;foo.msg&#39;</span><span class="p">)</span>

<span class="gp">In [276]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_msgpack</span><span class="p">(</span><span class="s1">&#39;foo.msg&#39;</span><span class="p">)</span>
<span class="gr">Out[276]: </span>
<span class="go">          A         B</span>
<span class="go">0  0.154336  0.710999</span>
<span class="go">1  0.398096  0.765220</span>
<span class="go">2  0.586749  0.293052</span>
<span class="go">3  0.290293  0.710783</span>
<span class="go">4  0.988593  0.062106</span>

<span class="gp">In [277]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
<p>You can pass a list of objects and you will receive them back on deserialization.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [278]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_msgpack</span><span class="p">(</span><span class="s1">&#39;foo.msg&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">s</span><span class="p">)</span>

<span class="gp">In [279]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_msgpack</span><span class="p">(</span><span class="s1">&#39;foo.msg&#39;</span><span class="p">)</span>
<span class="gr">Out[279]: </span>
<span class="go">[          A         B</span>
<span class="go"> 0  0.154336  0.710999</span>
<span class="go"> 1  0.398096  0.765220</span>
<span class="go"> 2  0.586749  0.293052</span>
<span class="go"> 3  0.290293  0.710783</span>
<span class="go"> 4  0.988593  0.062106, &#39;foo&#39;, array([1, 2, 3]), 2013-01-01    0.690810</span>
<span class="go"> 2013-01-02    0.235907</span>
<span class="go"> 2013-01-03    0.712756</span>
<span class="go"> 2013-01-04    0.119599</span>
<span class="go"> 2013-01-05    0.023493</span>
<span class="go"> Freq: D, dtype: float64]</span>
</pre></div>
</div>
<p>You can pass <code class="docutils literal"><span class="pre">iterator=True</span></code> to iterate over the unpacked results</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [280]: </span><span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_msgpack</span><span class="p">(</span><span class="s1">&#39;foo.msg&#39;</span><span class="p">,</span><span class="n">iterator</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
<span class="gp">   .....:</span>     <span class="k">print</span> <span class="n">o</span>
<span class="gp">   .....:</span> 
<span class="go">          A         B</span>
<span class="go">0  0.154336  0.710999</span>
<span class="go">1  0.398096  0.765220</span>
<span class="go">2  0.586749  0.293052</span>
<span class="go">3  0.290293  0.710783</span>
<span class="go">4  0.988593  0.062106</span>
<span class="go">foo</span>
<span class="go">[1 2 3]</span>
<span class="go">2013-01-01    0.690810</span>
<span class="go">2013-01-02    0.235907</span>
<span class="go">2013-01-03    0.712756</span>
<span class="go">2013-01-04    0.119599</span>
<span class="go">2013-01-05    0.023493</span>
<span class="go">Freq: D, dtype: float64</span>
</pre></div>
</div>
<p>You can pass <code class="docutils literal"><span class="pre">append=True</span></code> to the writer to append to an existing pack</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [281]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_msgpack</span><span class="p">(</span><span class="s1">&#39;foo.msg&#39;</span><span class="p">,</span><span class="n">append</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [282]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_msgpack</span><span class="p">(</span><span class="s1">&#39;foo.msg&#39;</span><span class="p">)</span>
<span class="gr">Out[282]: </span>
<span class="go">[          A         B</span>
<span class="go"> 0  0.154336  0.710999</span>
<span class="go"> 1  0.398096  0.765220</span>
<span class="go"> 2  0.586749  0.293052</span>
<span class="go"> 3  0.290293  0.710783</span>
<span class="go"> 4  0.988593  0.062106, &#39;foo&#39;, array([1, 2, 3]), 2013-01-01    0.690810</span>
<span class="go"> 2013-01-02    0.235907</span>
<span class="go"> 2013-01-03    0.712756</span>
<span class="go"> 2013-01-04    0.119599</span>
<span class="go"> 2013-01-05    0.023493</span>
<span class="go"> Freq: D, dtype: float64,           A         B</span>
<span class="go"> 0  0.154336  0.710999</span>
<span class="go"> 1  0.398096  0.765220</span>
<span class="go"> 2  0.586749  0.293052</span>
<span class="go"> 3  0.290293  0.710783</span>
<span class="go"> 4  0.988593  0.062106]</span>
</pre></div>
</div>
<p>Unlike other io methods, <code class="docutils literal"><span class="pre">to_msgpack</span></code> is available on both a per-object basis,
<code class="docutils literal"><span class="pre">df.to_msgpack()</span></code> and using the top-level <code class="docutils literal"><span class="pre">pd.to_msgpack(...)</span></code> where you
can pack arbitrary collections of python lists, dicts, scalars, while intermixing
pandas objects.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [283]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_msgpack</span><span class="p">(</span><span class="s1">&#39;foo2.msg&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="s1">&#39;dict&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="s1">&#39;df&#39;</span> <span class="p">:</span> <span class="n">df</span> <span class="p">},</span> <span class="p">{</span> <span class="s1">&#39;string&#39;</span> <span class="p">:</span> <span class="s1">&#39;foo&#39;</span> <span class="p">},</span> <span class="p">{</span> <span class="s1">&#39;scalar&#39;</span> <span class="p">:</span> <span class="mf">1.</span> <span class="p">},</span> <span class="p">{</span> <span class="s1">&#39;s&#39;</span> <span class="p">:</span> <span class="n">s</span> <span class="p">}</span> <span class="p">]</span> <span class="p">})</span>

<span class="gp">In [284]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_msgpack</span><span class="p">(</span><span class="s1">&#39;foo2.msg&#39;</span><span class="p">)</span>
<span class="gr">Out[284]: </span>
<span class="go">{&#39;dict&#39;: ({&#39;df&#39;:           A         B</span>
<span class="go">   0  0.154336  0.710999</span>
<span class="go">   1  0.398096  0.765220</span>
<span class="go">   2  0.586749  0.293052</span>
<span class="go">   3  0.290293  0.710783</span>
<span class="go">   4  0.988593  0.062106},</span>
<span class="go">  {&#39;string&#39;: &#39;foo&#39;},</span>
<span class="go">  {&#39;scalar&#39;: 1.0},</span>
<span class="go">  {&#39;s&#39;: 2013-01-01    0.690810</span>
<span class="go">   2013-01-02    0.235907</span>
<span class="go">   2013-01-03    0.712756</span>
<span class="go">   2013-01-04    0.119599</span>
<span class="go">   2013-01-05    0.023493</span>
<span class="go">   Freq: D, dtype: float64})}</span>
</pre></div>
</div>
<div class="section" id="read-write-api">
<h3>Read/Write API<a class="headerlink" href="#read-write-api" title="Permalink to this headline">¶</a></h3>
<p>Msgpacks can also be read from and written to strings.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [285]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_msgpack</span><span class="p">()</span>
<span class="gr">Out[285]: </span><span class="s1">&#39;</span><span class="se">\x84\xa6</span><span class="s1">blocks</span><span class="se">\x91\x86\xa5</span><span class="s1">dtype</span><span class="se">\xa7</span><span class="s1">float64</span><span class="se">\xa8</span><span class="s1">compress</span><span class="se">\xc0\xa4</span><span class="s1">locs</span><span class="se">\x86\xa4</span><span class="s1">ndim</span><span class="se">\x01\xa5</span><span class="s1">dtype</span><span class="se">\xa5</span><span class="s1">int64</span><span class="se">\xa8</span><span class="s1">compress</span><span class="se">\xc0\xa4</span><span class="s1">data</span><span class="se">\xd8\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\xa5</span><span class="s1">shape</span><span class="se">\x91\x02\xa3</span><span class="s1">typ</span><span class="se">\xa7</span><span class="s1">ndarray</span><span class="se">\xa5</span><span class="s1">shape</span><span class="se">\x92\x02\x05\xa6</span><span class="s1">values</span><span class="se">\xc7</span><span class="s1">P</span><span class="se">\x00\xa0\xab\xfb</span><span class="s1">6H</span><span class="se">\xc1\xc3</span><span class="s1">?</span><span class="se">\x98</span><span class="s1">(oMgz</span><span class="se">\xd9</span><span class="s1">?</span><span class="se">\x17\xae</span><span class="s1">d</span><span class="se">\\\xa5\xc6\xe2</span><span class="s1">?</span><span class="se">\xdc\xd0\x1b</span><span class="s1">d(</span><span class="se">\x94\xd2</span><span class="s1">?</span><span class="se">\xb5\xe8\xf5\x0e\x8d\xa2\xef</span><span class="s1">?</span><span class="se">\x02</span><span class="s1">D</span><span class="se">\xeb</span><span class="s1">O</span><span class="se">\x80\xc0\xe6</span><span class="s1">?</span><span class="se">\x16\xbd</span><span class="s1">dQ</span><span class="se">\xae</span><span class="s1">|</span><span class="se">\xe8</span><span class="s1">?</span><span class="se">\x10</span><span class="s1">?Ya[</span><span class="se">\xc1\xd2</span><span class="s1">?</span><span class="se">\xa8\xfd\xcf\xa0\xbc\xbe\xe6</span><span class="s1">? Z</span><span class="se">\xe1\t</span><span class="s1">i</span><span class="se">\xcc\xaf</span><span class="s1">?</span><span class="se">\xa5</span><span class="s1">klass</span><span class="se">\xaa</span><span class="s1">FloatBlock</span><span class="se">\xa4</span><span class="s1">axes</span><span class="se">\x92\x86\xa4</span><span class="s1">name</span><span class="se">\xc0\xa5</span><span class="s1">dtype</span><span class="se">\xa6</span><span class="s1">object</span><span class="se">\xa8</span><span class="s1">compress</span><span class="se">\xc0\xa4</span><span class="s1">data</span><span class="se">\x92\xc4\x01</span><span class="s1">A</span><span class="se">\xc4\x01</span><span class="s1">B</span><span class="se">\xa5</span><span class="s1">klass</span><span class="se">\xa5</span><span class="s1">Index</span><span class="se">\xa3</span><span class="s1">typ</span><span class="se">\xa5</span><span class="s1">index</span><span class="se">\x86\xa4</span><span class="s1">name</span><span class="se">\xc0\xa4</span><span class="s1">stop</span><span class="se">\x05\xa5</span><span class="s1">start</span><span class="se">\x00\xa4</span><span class="s1">step</span><span class="se">\x01\xa5</span><span class="s1">klass</span><span class="se">\xaa</span><span class="s1">RangeIndex</span><span class="se">\xa3</span><span class="s1">typ</span><span class="se">\xab</span><span class="s1">range_index</span><span class="se">\xa3</span><span class="s1">typ</span><span class="se">\xad</span><span class="s1">block_manager</span><span class="se">\xa5</span><span class="s1">klass</span><span class="se">\xa9</span><span class="s1">DataFrame&#39;</span>
</pre></div>
</div>
<p>Furthermore you can concatenate the strings to produce a list of the original objects.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [286]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_msgpack</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_msgpack</span><span class="p">()</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">to_msgpack</span><span class="p">())</span>
<span class="gr">Out[286]: </span>
<span class="go">[          A         B</span>
<span class="go"> 0  0.154336  0.710999</span>
<span class="go"> 1  0.398096  0.765220</span>
<span class="go"> 2  0.586749  0.293052</span>
<span class="go"> 3  0.290293  0.710783</span>
<span class="go"> 4  0.988593  0.062106, 2013-01-01    0.690810</span>
<span class="go"> 2013-01-02    0.235907</span>
<span class="go"> 2013-01-03    0.712756</span>
<span class="go"> 2013-01-04    0.119599</span>
<span class="go"> 2013-01-05    0.023493</span>
<span class="go"> Freq: D, dtype: float64]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="hdf5-pytables">
<span id="io-hdf5"></span><h2>HDF5 (PyTables)<a class="headerlink" href="#hdf5-pytables" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">HDFStore</span></code> is a dict-like object which reads and writes pandas using
the high performance HDF5 format using the excellent <a class="reference external" href="http://www.pytables.org/">PyTables</a> library. See the <a class="reference internal" href="cookbook.html#cookbook-hdf"><span class="std std-ref">cookbook</span></a>
for some advanced strategies</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">As of version 0.15.0, pandas requires <code class="docutils literal"><span class="pre">PyTables</span></code> &gt;= 3.0.0. Stores written with prior versions of pandas / <code class="docutils literal"><span class="pre">PyTables</span></code> &gt;= 2.3 are fully compatible (this was the previous minimum <code class="docutils literal"><span class="pre">PyTables</span></code> required version).</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">There is a <code class="docutils literal"><span class="pre">PyTables</span></code> indexing bug which may appear when querying stores using an index.  If you see a subset of results being returned, upgrade to <code class="docutils literal"><span class="pre">PyTables</span></code> &gt;= 3.2.  Stores created previously will need to be rewritten using the updated version.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">As of version 0.17.0, <code class="docutils literal"><span class="pre">HDFStore</span></code> will not drop rows that have all missing values by default. Previously, if all values (except the index) were missing, <code class="docutils literal"><span class="pre">HDFStore</span></code> would not write those rows to disk.</p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [287]: </span><span class="n">store</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s1">&#39;store.h5&#39;</span><span class="p">)</span>

<span class="gp">In [288]: </span><span class="k">print</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">Empty</span>
</pre></div>
</div>
<p>Objects can be written to the file just like adding key-value pairs to a
dict:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [289]: </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span>

<span class="gp">In [290]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="gp">In [291]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">])</span>

<span class="gp">In [292]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
<span class="gp">   .....:</span>                   <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [293]: </span><span class="n">wp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">items</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Item1&#39;</span><span class="p">,</span> <span class="s1">&#39;Item2&#39;</span><span class="p">],</span>
<span class="gp">   .....:</span>               <span class="n">major_axis</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">   .....:</span>               <span class="n">minor_axis</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">])</span>
<span class="gp">   .....:</span> 

<span class="c"># store.put(&#39;s&#39;, s) is an equivalent method</span>
<span class="gp">In [294]: </span><span class="n">store</span><span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span>

<span class="gp">In [295]: </span><span class="n">store</span><span class="p">[</span><span class="s1">&#39;df&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span>

<span class="gp">In [296]: </span><span class="n">store</span><span class="p">[</span><span class="s1">&#39;wp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wp</span>

<span class="c"># the type of stored data</span>
<span class="gp">In [297]: </span><span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">_v_attrs</span><span class="o">.</span><span class="n">pandas_type</span>
<span class="gr">Out[297]: </span><span class="s1">&#39;wide&#39;</span>

<span class="gp">In [298]: </span><span class="n">store</span>
<span class="gr">Out[298]: </span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df            frame        (shape-&gt;[8,3])  </span>
<span class="go">/s             series       (shape-&gt;[5])    </span>
<span class="go">/wp            wide         (shape-&gt;[2,5,4])</span>
</pre></div>
</div>
<p>In a current or later Python session, you can retrieve stored objects:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="c"># store.get(&#39;df&#39;) is an equivalent method</span>
<span class="gp">In [299]: </span><span class="n">store</span><span class="p">[</span><span class="s1">&#39;df&#39;</span><span class="p">]</span>
<span class="gr">Out[299]: </span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01  0.887163  0.859588 -0.636524</span>
<span class="go">2000-01-02  0.015696 -2.242685  1.150036</span>
<span class="go">2000-01-03  0.991946  0.953324 -2.021255</span>
<span class="go">2000-01-04 -0.334077  0.002118  0.405453</span>
<span class="go">2000-01-05  0.289092  1.321158 -1.546906</span>
<span class="go">2000-01-06 -0.202646 -0.655969  0.193421</span>
<span class="go">2000-01-07  0.553439  1.318152 -0.469305</span>
<span class="go">2000-01-08  0.675554 -1.817027 -0.183109</span>

<span class="c"># dotted (attribute) access provides get as well</span>
<span class="gp">In [300]: </span><span class="n">store</span><span class="o">.</span><span class="n">df</span>
<span class="gr">Out[300]: </span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01  0.887163  0.859588 -0.636524</span>
<span class="go">2000-01-02  0.015696 -2.242685  1.150036</span>
<span class="go">2000-01-03  0.991946  0.953324 -2.021255</span>
<span class="go">2000-01-04 -0.334077  0.002118  0.405453</span>
<span class="go">2000-01-05  0.289092  1.321158 -1.546906</span>
<span class="go">2000-01-06 -0.202646 -0.655969  0.193421</span>
<span class="go">2000-01-07  0.553439  1.318152 -0.469305</span>
<span class="go">2000-01-08  0.675554 -1.817027 -0.183109</span>
</pre></div>
</div>
<p>Deletion of the object specified by the key</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="c"># store.remove(&#39;wp&#39;) is an equivalent method</span>
<span class="gp">In [301]: </span><span class="k">del</span> <span class="n">store</span><span class="p">[</span><span class="s1">&#39;wp&#39;</span><span class="p">]</span>

<span class="gp">In [302]: </span><span class="n">store</span>
<span class="gr">Out[302]: </span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df            frame        (shape-&gt;[8,3])</span>
<span class="go">/s             series       (shape-&gt;[5])  </span>
</pre></div>
</div>
<p>Closing a Store, Context Manager</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [303]: </span><span class="n">store</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="gp">In [304]: </span><span class="n">store</span>
<span class="gr">Out[304]: </span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">File is CLOSED</span>

<span class="gp">In [305]: </span><span class="n">store</span><span class="o">.</span><span class="n">is_open</span>
<span class="gr">Out[305]: </span><span class="bp">False</span>

<span class="c"># Working with, and automatically closing the store with the context</span>
<span class="c"># manager</span>
<span class="gp">In [306]: </span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s1">&#39;store.h5&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">store</span><span class="p">:</span>
<span class="gp">   .....:</span>     <span class="n">store</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gp">   .....:</span> 
</pre></div>
</div>
<div class="section" id="id2">
<h3>Read/Write API<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">HDFStore</span></code> supports an top-level API using  <code class="docutils literal"><span class="pre">read_hdf</span></code> for reading and <code class="docutils literal"><span class="pre">to_hdf</span></code> for writing,
similar to how <code class="docutils literal"><span class="pre">read_csv</span></code> and <code class="docutils literal"><span class="pre">to_csv</span></code> work. (new in 0.11.0)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [307]: </span><span class="n">df_tl</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)),</span> <span class="n">B</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))))</span>

<span class="gp">In [308]: </span><span class="n">df_tl</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">&#39;store_tl.h5&#39;</span><span class="p">,</span><span class="s1">&#39;table&#39;</span><span class="p">,</span><span class="n">append</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [309]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;store_tl.h5&#39;</span><span class="p">,</span> <span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">where</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;index&gt;2&#39;</span><span class="p">])</span>
<span class="gr">Out[309]: </span>
<span class="go">   A  B</span>
<span class="go">3  3  3</span>
<span class="go">4  4  4</span>
</pre></div>
</div>
<p>As of version 0.17.0, HDFStore will no longer drop rows that are all missing by default. This behavior can be enabled by setting <code class="docutils literal"><span class="pre">dropna=True</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [310]: </span><span class="n">df_with_missing</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:[</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">   .....:</span>                                 <span class="s1">&#39;col2&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]})</span>
<span class="gp">   .....:</span> 

<span class="gp">In [311]: </span><span class="n">df_with_missing</span>
<span class="gr">Out[311]: </span>
<span class="go">   col1  col2</span>
<span class="go">0   0.0   1.0</span>
<span class="go">1   NaN   NaN</span>
<span class="go">2   2.0   NaN</span>

<span class="gp">In [312]: </span><span class="n">df_with_missing</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">&#39;file.h5&#39;</span><span class="p">,</span> <span class="s1">&#39;df_with_missing&#39;</span><span class="p">,</span>
<span class="gp">   .....:</span>                         <span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="gp">   .....:</span> 

<span class="gp">In [313]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;file.h5&#39;</span><span class="p">,</span> <span class="s1">&#39;df_with_missing&#39;</span><span class="p">)</span>
<span class="gr">Out[313]: </span>
<span class="go">   col1  col2</span>
<span class="go">0   0.0   1.0</span>
<span class="go">1   NaN   NaN</span>
<span class="go">2   2.0   NaN</span>

<span class="gp">In [314]: </span><span class="n">df_with_missing</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">&#39;file.h5&#39;</span><span class="p">,</span> <span class="s1">&#39;df_with_missing&#39;</span><span class="p">,</span>
<span class="gp">   .....:</span>                         <span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">   .....:</span> 

<span class="gp">In [315]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;file.h5&#39;</span><span class="p">,</span> <span class="s1">&#39;df_with_missing&#39;</span><span class="p">)</span>
<span class="gr">Out[315]: </span>
<span class="go">   col1  col2</span>
<span class="go">0   0.0   1.0</span>
<span class="go">2   2.0   NaN</span>
</pre></div>
</div>
<p>This is also true for the major axis of a <code class="docutils literal"><span class="pre">Panel</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [316]: </span><span class="n">matrix</span> <span class="o">=</span> <span class="p">[[[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]],</span>
<span class="gp">   .....:</span>        <span class="p">[[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]],</span>
<span class="gp">   .....:</span>        <span class="p">[[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]]]</span>
<span class="gp">   .....:</span> 

<span class="gp">In [317]: </span><span class="n">panel_with_major_axis_all_missing</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span>
<span class="gp">   .....:</span>         <span class="n">items</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Item1&#39;</span><span class="p">,</span> <span class="s1">&#39;Item2&#39;</span><span class="p">,</span><span class="s1">&#39;Item3&#39;</span><span class="p">],</span>
<span class="gp">   .....:</span>         <span class="n">major_axis</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span>
<span class="gp">   .....:</span>         <span class="n">minor_axis</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [318]: </span><span class="n">panel_with_major_axis_all_missing</span>
<span class="gr">Out[318]: </span>
<span class="go">&lt;class &#39;pandas.core.panel.Panel&#39;&gt;</span>
<span class="go">Dimensions: 3 (items) x 2 (major_axis) x 3 (minor_axis)</span>
<span class="go">Items axis: Item1 to Item3</span>
<span class="go">Major_axis axis: 1 to 2</span>
<span class="go">Minor_axis axis: A to C</span>

<span class="gp">In [319]: </span><span class="n">panel_with_major_axis_all_missing</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">&#39;file.h5&#39;</span><span class="p">,</span> <span class="s1">&#39;panel&#39;</span><span class="p">,</span>
<span class="gp">   .....:</span>                                         <span class="n">dropna</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
<span class="gp">   .....:</span>                                         <span class="n">format</span><span class="o">=</span><span class="s1">&#39;table&#39;</span><span class="p">,</span>
<span class="gp">   .....:</span>                                         <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="gp">   .....:</span> 

<span class="gp">In [320]: </span><span class="n">reloaded</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;file.h5&#39;</span><span class="p">,</span> <span class="s1">&#39;panel&#39;</span><span class="p">)</span>

<span class="gp">In [321]: </span><span class="n">reloaded</span>
<span class="gr">Out[321]: </span>
<span class="go">&lt;class &#39;pandas.core.panel.Panel&#39;&gt;</span>
<span class="go">Dimensions: 3 (items) x 1 (major_axis) x 3 (minor_axis)</span>
<span class="go">Items axis: Item1 to Item3</span>
<span class="go">Major_axis axis: 2 to 2</span>
<span class="go">Minor_axis axis: A to C</span>
</pre></div>
</div>
</div>
<div class="section" id="fixed-format">
<span id="io-hdf5-fixed"></span><h3>Fixed Format<a class="headerlink" href="#fixed-format" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This was prior to 0.13.0 the <code class="docutils literal"><span class="pre">Storer</span></code> format.</p>
</div>
<p>The examples above show storing using <code class="docutils literal"><span class="pre">put</span></code>, which write the HDF5 to <code class="docutils literal"><span class="pre">PyTables</span></code> in a fixed array format, called
the <code class="docutils literal"><span class="pre">fixed</span></code> format. These types of stores are are <strong>not</strong> appendable once written (though you can simply
remove them and rewrite). Nor are they <strong>queryable</strong>; they must be
retrieved in their entirety. They also do not support dataframes with non-unique column names.
The <code class="docutils literal"><span class="pre">fixed</span></code> format stores offer very fast writing and slightly faster reading than <code class="docutils literal"><span class="pre">table</span></code> stores.
This format is specified by default when using <code class="docutils literal"><span class="pre">put</span></code> or <code class="docutils literal"><span class="pre">to_hdf</span></code> or by <code class="docutils literal"><span class="pre">format='fixed'</span></code> or <code class="docutils literal"><span class="pre">format='f'</span></code></p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>A <code class="docutils literal"><span class="pre">fixed</span></code> format will raise a <code class="docutils literal"><span class="pre">TypeError</span></code> if you try to retrieve using a <code class="docutils literal"><span class="pre">where</span></code> .</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">&#39;test_fixed.h5&#39;</span><span class="p">,</span><span class="s1">&#39;df&#39;</span><span class="p">)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;test_fixed.h5&#39;</span><span class="p">,</span><span class="s1">&#39;df&#39;</span><span class="p">,</span><span class="n">where</span><span class="o">=</span><span class="s1">&#39;index&gt;5&#39;</span><span class="p">)</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">cannot</span> <span class="k">pass</span> <span class="n">a</span> <span class="n">where</span> <span class="n">specification</span> <span class="n">when</span> <span class="n">reading</span> <span class="n">a</span> <span class="n">fixed</span> <span class="n">format</span><span class="o">.</span>
           <span class="n">this</span> <span class="n">store</span> <span class="n">must</span> <span class="n">be</span> <span class="n">selected</span> <span class="ow">in</span> <span class="n">its</span> <span class="n">entirety</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="table-format">
<span id="io-hdf5-table"></span><h3>Table Format<a class="headerlink" href="#table-format" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">HDFStore</span></code> supports another <code class="docutils literal"><span class="pre">PyTables</span></code> format on disk, the <code class="docutils literal"><span class="pre">table</span></code>
format. Conceptually a <code class="docutils literal"><span class="pre">table</span></code> is shaped very much like a DataFrame,
with rows and columns. A <code class="docutils literal"><span class="pre">table</span></code> may be appended to in the same or
other sessions.  In addition, delete &amp; query type operations are
supported. This format is specified by <code class="docutils literal"><span class="pre">format='table'</span></code> or <code class="docutils literal"><span class="pre">format='t'</span></code>
to <code class="docutils literal"><span class="pre">append</span></code> or <code class="docutils literal"><span class="pre">put</span></code> or <code class="docutils literal"><span class="pre">to_hdf</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.13.</span></p>
</div>
<p>This format can be set as an option as well <code class="docutils literal"><span class="pre">pd.set_option('io.hdf.default_format','table')</span></code> to
enable <code class="docutils literal"><span class="pre">put/append/to_hdf</span></code> to by default store in the <code class="docutils literal"><span class="pre">table</span></code> format.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [322]: </span><span class="n">store</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s1">&#39;store.h5&#39;</span><span class="p">)</span>

<span class="gp">In [323]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>

<span class="gp">In [324]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>

<span class="c"># append data (creates a table automatically)</span>
<span class="gp">In [325]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="n">df1</span><span class="p">)</span>

<span class="gp">In [326]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="n">df2</span><span class="p">)</span>

<span class="gp">In [327]: </span><span class="n">store</span>
<span class="gr">Out[327]: </span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df            frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])</span>

<span class="c"># select the entire object</span>
<span class="gp">In [328]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">)</span>
<span class="gr">Out[328]: </span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01  0.887163  0.859588 -0.636524</span>
<span class="go">2000-01-02  0.015696 -2.242685  1.150036</span>
<span class="go">2000-01-03  0.991946  0.953324 -2.021255</span>
<span class="go">2000-01-04 -0.334077  0.002118  0.405453</span>
<span class="go">2000-01-05  0.289092  1.321158 -1.546906</span>
<span class="go">2000-01-06 -0.202646 -0.655969  0.193421</span>
<span class="go">2000-01-07  0.553439  1.318152 -0.469305</span>
<span class="go">2000-01-08  0.675554 -1.817027 -0.183109</span>

<span class="c"># the type of stored data</span>
<span class="gp">In [329]: </span><span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">_v_attrs</span><span class="o">.</span><span class="n">pandas_type</span>
<span class="gr">Out[329]: </span><span class="s1">&#39;frame_table&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can also create a <code class="docutils literal"><span class="pre">table</span></code> by passing <code class="docutils literal"><span class="pre">format='table'</span></code> or <code class="docutils literal"><span class="pre">format='t'</span></code> to a <code class="docutils literal"><span class="pre">put</span></code> operation.</p>
</div>
</div>
<div class="section" id="hierarchical-keys">
<span id="io-hdf5-keys"></span><h3>Hierarchical Keys<a class="headerlink" href="#hierarchical-keys" title="Permalink to this headline">¶</a></h3>
<p>Keys to a store can be specified as a string. These can be in a
hierarchical path-name like format (e.g. <code class="docutils literal"><span class="pre">foo/bar/bah</span></code>), which will
generate a hierarchy of sub-stores (or <code class="docutils literal"><span class="pre">Groups</span></code> in PyTables
parlance). Keys can be specified with out the leading &#8216;/&#8217; and are ALWAYS
absolute (e.g. &#8216;foo&#8217; refers to &#8216;/foo&#8217;). Removal operations can remove
everything in the sub-store and BELOW, so be <em>careful</em>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [330]: </span><span class="n">store</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;foo/bar/bah&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>

<span class="gp">In [331]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;food/orange&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>

<span class="gp">In [332]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;food/apple&#39;</span><span class="p">,</span>  <span class="n">df</span><span class="p">)</span>

<span class="gp">In [333]: </span><span class="n">store</span>
<span class="gr">Out[333]: </span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df                     frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])</span>
<span class="go">/foo/bar/bah            frame        (shape-&gt;[8,3])                                       </span>
<span class="go">/food/apple             frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])</span>
<span class="go">/food/orange            frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])</span>

<span class="c"># a list of keys are returned</span>
<span class="gp">In [334]: </span><span class="n">store</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gr">Out[334]: </span><span class="p">[</span><span class="s1">&#39;/df&#39;</span><span class="p">,</span> <span class="s1">&#39;/food/apple&#39;</span><span class="p">,</span> <span class="s1">&#39;/food/orange&#39;</span><span class="p">,</span> <span class="s1">&#39;/foo/bar/bah&#39;</span><span class="p">]</span>

<span class="c"># remove all nodes under this level</span>
<span class="gp">In [335]: </span><span class="n">store</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;food&#39;</span><span class="p">)</span>

<span class="gp">In [336]: </span><span class="n">store</span>
<span class="gr">Out[336]: </span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df                     frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])</span>
<span class="go">/foo/bar/bah            frame        (shape-&gt;[8,3])                                       </span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Hierarchical keys cannot be retrieved as dotted (attribute) access as described above for items stored under the root node.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">store</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">bah</span>
<span class="ne">AttributeError</span><span class="p">:</span> <span class="s1">&#39;HDFStore&#39;</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s1">&#39;foo&#39;</span>

<span class="c1"># you can directly access the actual PyTables node but using the root node</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">bah</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">9</span><span class="p">]:</span>
<span class="o">/</span><span class="n">foo</span><span class="o">/</span><span class="n">bar</span><span class="o">/</span><span class="n">bah</span> <span class="p">(</span><span class="n">Group</span><span class="p">)</span> <span class="s1">&#39;&#39;</span>
  <span class="n">children</span> <span class="p">:</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;block0_items&#39;</span> <span class="p">(</span><span class="n">Array</span><span class="p">),</span> <span class="s1">&#39;block0_values&#39;</span> <span class="p">(</span><span class="n">Array</span><span class="p">),</span> <span class="s1">&#39;axis0&#39;</span> <span class="p">(</span><span class="n">Array</span><span class="p">),</span> <span class="s1">&#39;axis1&#39;</span> <span class="p">(</span><span class="n">Array</span><span class="p">)]</span>
</pre></div>
</div>
<p>Instead, use explicit string based keys</p>
<div class="last highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [337]: </span><span class="n">store</span><span class="p">[</span><span class="s1">&#39;foo/bar/bah&#39;</span><span class="p">]</span>
<span class="gr">Out[337]: </span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01  0.887163  0.859588 -0.636524</span>
<span class="go">2000-01-02  0.015696 -2.242685  1.150036</span>
<span class="go">2000-01-03  0.991946  0.953324 -2.021255</span>
<span class="go">2000-01-04 -0.334077  0.002118  0.405453</span>
<span class="go">2000-01-05  0.289092  1.321158 -1.546906</span>
<span class="go">2000-01-06 -0.202646 -0.655969  0.193421</span>
<span class="go">2000-01-07  0.553439  1.318152 -0.469305</span>
<span class="go">2000-01-08  0.675554 -1.817027 -0.183109</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="storing-types">
<span id="io-hdf5-types"></span><h3>Storing Types<a class="headerlink" href="#storing-types" title="Permalink to this headline">¶</a></h3>
<div class="section" id="storing-mixed-types-in-a-table">
<h4>Storing Mixed Types in a Table<a class="headerlink" href="#storing-mixed-types-in-a-table" title="Permalink to this headline">¶</a></h4>
<p>Storing mixed-dtype data is supported. Strings are stored as a
fixed-width using the maximum size of the appended column. Subsequent attempts
at appending longer strings will raise a <code class="docutils literal"><span class="pre">ValueError</span></code>.</p>
<p>Passing <code class="docutils literal"><span class="pre">min_itemsize={`values`:</span> <span class="pre">size}</span></code> as a parameter to append
will set a larger minimum for the string columns. Storing <code class="docutils literal"><span class="pre">floats,</span>
<span class="pre">strings,</span> <span class="pre">ints,</span> <span class="pre">bools,</span> <span class="pre">datetime64</span></code> are currently supported. For string
columns, passing <code class="docutils literal"><span class="pre">nan_rep</span> <span class="pre">=</span> <span class="pre">'nan'</span></code> to append will change the default
nan representation on disk (which converts to/from <cite>np.nan</cite>), this
defaults to <cite>nan</cite>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [338]: </span><span class="n">df_mixed</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span> <span class="s1">&#39;A&#39;</span> <span class="p">:</span> <span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
<span class="gp">   .....:</span>                           <span class="s1">&#39;B&#39;</span> <span class="p">:</span> <span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
<span class="gp">   .....:</span>                           <span class="s1">&#39;C&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">),</span>
<span class="gp">   .....:</span>                           <span class="s1">&#39;string&#39;</span> <span class="p">:</span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="gp">   .....:</span>                           <span class="s1">&#39;int&#39;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">   .....:</span>                           <span class="s1">&#39;bool&#39;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
<span class="gp">   .....:</span>                           <span class="s1">&#39;datetime64&#39;</span> <span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20010102&#39;</span><span class="p">)},</span>
<span class="gp">   .....:</span>                         <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">)))</span>
<span class="gp">   .....:</span> 

<span class="gp">In [339]: </span><span class="n">df_mixed</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">,[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;datetime64&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="gp">In [340]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;df_mixed&#39;</span><span class="p">,</span> <span class="n">df_mixed</span><span class="p">,</span> <span class="n">min_itemsize</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;values&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">})</span>

<span class="gp">In [341]: </span><span class="n">df_mixed1</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df_mixed&#39;</span><span class="p">)</span>

<span class="gp">In [342]: </span><span class="n">df_mixed1</span>
<span class="gr">Out[342]: </span>
<span class="go">          A         B         C  bool datetime64  int  string</span>
<span class="go">0  0.704721 -1.152659 -0.430096  True 2001-01-02    1  string</span>
<span class="go">1 -0.785435  0.631979  0.767369  True 2001-01-02    1  string</span>
<span class="go">2  0.462060  0.039513  0.984920  True 2001-01-02    1  string</span>
<span class="go">3       NaN       NaN  0.270836  True        NaT    1     NaN</span>
<span class="go">4       NaN       NaN  1.391986  True        NaT    1     NaN</span>
<span class="go">5       NaN       NaN  0.079842  True        NaT    1     NaN</span>
<span class="go">6  2.007843  0.152631 -0.399965  True 2001-01-02    1  string</span>
<span class="go">7  0.226963  0.164530 -1.027851  True 2001-01-02    1  string</span>

<span class="gp">In [343]: </span><span class="n">df_mixed1</span><span class="o">.</span><span class="n">get_dtype_counts</span><span class="p">()</span>
<span class="gr">Out[343]: </span>
<span class="go">bool              1</span>
<span class="go">datetime64[ns]    1</span>
<span class="go">float32           1</span>
<span class="go">float64           2</span>
<span class="go">int64             1</span>
<span class="go">object            1</span>
<span class="go">dtype: int64</span>

<span class="c"># we have provided a minimum string column size</span>
<span class="gp">In [344]: </span><span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df_mixed</span><span class="o">.</span><span class="n">table</span>
<span class="gr">Out[344]: </span>
<span class="go">/df_mixed/table (Table(8,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: Float64Col(shape=(2,), dflt=0.0, pos=1),</span>
<span class="go">  &quot;values_block_1&quot;: Float32Col(shape=(1,), dflt=0.0, pos=2),</span>
<span class="go">  &quot;values_block_2&quot;: Int64Col(shape=(1,), dflt=0, pos=3),</span>
<span class="go">  &quot;values_block_3&quot;: Int64Col(shape=(1,), dflt=0, pos=4),</span>
<span class="go">  &quot;values_block_4&quot;: BoolCol(shape=(1,), dflt=False, pos=5),</span>
<span class="go">  &quot;values_block_5&quot;: StringCol(itemsize=50, shape=(1,), dflt=&#39;&#39;, pos=6)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (689,)</span>
<span class="go">  autoindex := True</span>
<span class="go">  colindexes := {</span>
<span class="go">    &quot;index&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False}</span>
</pre></div>
</div>
</div>
<div class="section" id="storing-multi-index-dataframes">
<h4>Storing Multi-Index DataFrames<a class="headerlink" href="#storing-multi-index-dataframes" title="Permalink to this headline">¶</a></h4>
<p>Storing multi-index dataframes as tables is very similar to
storing/selecting from homogeneous index DataFrames.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [345]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="p">(</span><span class="n">levels</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">],</span>
<span class="gp">   .....:</span>                               <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">]],</span>
<span class="gp">   .....:</span>                       <span class="n">labels</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   .....:</span>                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
<span class="gp">   .....:</span>                       <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [346]: </span><span class="n">df_mi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
<span class="gp">   .....:</span>                      <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [347]: </span><span class="n">df_mi</span>
<span class="gr">Out[347]: </span>
<span class="go">                  A         B         C</span>
<span class="go">foo bar                                </span>
<span class="go">foo one   -0.584718  0.816594 -0.081947</span>
<span class="go">    two   -0.344766  0.528288 -1.068989</span>
<span class="go">    three -0.511881  0.291205  0.566534</span>
<span class="go">bar one    0.503592  0.285296  0.484288</span>
<span class="go">    two    1.363482 -0.781105 -0.468018</span>
<span class="go">baz two    1.224574 -1.281108  0.875476</span>
<span class="go">    three -1.710715 -0.450765  0.749164</span>
<span class="go">qux one   -0.203933 -0.182175  0.680656</span>
<span class="go">    two   -1.818499  0.047072  0.394844</span>
<span class="go">    three -0.248432 -0.617707 -0.682884</span>

<span class="gp">In [348]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;df_mi&#39;</span><span class="p">,</span><span class="n">df_mi</span><span class="p">)</span>

<span class="gp">In [349]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df_mi&#39;</span><span class="p">)</span>
<span class="gr">Out[349]: </span>
<span class="go">                  A         B         C</span>
<span class="go">foo bar                                </span>
<span class="go">foo one   -0.584718  0.816594 -0.081947</span>
<span class="go">    two   -0.344766  0.528288 -1.068989</span>
<span class="go">    three -0.511881  0.291205  0.566534</span>
<span class="go">bar one    0.503592  0.285296  0.484288</span>
<span class="go">    two    1.363482 -0.781105 -0.468018</span>
<span class="go">baz two    1.224574 -1.281108  0.875476</span>
<span class="go">    three -1.710715 -0.450765  0.749164</span>
<span class="go">qux one   -0.203933 -0.182175  0.680656</span>
<span class="go">    two   -1.818499  0.047072  0.394844</span>
<span class="go">    three -0.248432 -0.617707 -0.682884</span>

<span class="c"># the levels are automatically included as data columns</span>
<span class="gp">In [350]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df_mi&#39;</span><span class="p">,</span> <span class="s1">&#39;foo=bar&#39;</span><span class="p">)</span>
<span class="gr">Out[350]: </span>
<span class="go">                A         B         C</span>
<span class="go">foo bar                              </span>
<span class="go">bar one  0.503592  0.285296  0.484288</span>
<span class="go">    two  1.363482 -0.781105 -0.468018</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="querying">
<span id="io-hdf5-query"></span><h3>Querying<a class="headerlink" href="#querying" title="Permalink to this headline">¶</a></h3>
<div class="section" id="querying-a-table">
<h4>Querying a Table<a class="headerlink" href="#querying-a-table" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This query capabilities have changed substantially starting in <code class="docutils literal"><span class="pre">0.13.0</span></code>.
Queries from prior version are accepted (with a <code class="docutils literal"><span class="pre">DeprecationWarning</span></code>) printed
if its not string-like.</p>
</div>
<p><code class="docutils literal"><span class="pre">select</span></code> and <code class="docutils literal"><span class="pre">delete</span></code> operations have an optional criterion that can
be specified to select/delete only a subset of the data. This allows one
to have a very large on-disk table and retrieve only a portion of the
data.</p>
<p>A query is specified using the <code class="docutils literal"><span class="pre">Term</span></code> class under the hood, as a boolean expression.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">index</span></code> and <code class="docutils literal"><span class="pre">columns</span></code> are supported indexers of a DataFrame</li>
<li><code class="docutils literal"><span class="pre">major_axis</span></code>, <code class="docutils literal"><span class="pre">minor_axis</span></code>, and <code class="docutils literal"><span class="pre">items</span></code> are supported indexers of
the Panel</li>
<li>if <code class="docutils literal"><span class="pre">data_columns</span></code> are specified, these can be used as additional indexers</li>
</ul>
<p>Valid comparison operators are:</p>
<p><code class="docutils literal"><span class="pre">=,</span> <span class="pre">==,</span> <span class="pre">!=,</span> <span class="pre">&gt;,</span> <span class="pre">&gt;=,</span> <span class="pre">&lt;,</span> <span class="pre">&lt;=</span></code></p>
<p>Valid boolean expressions are combined with:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">|</span></code> : or</li>
<li><code class="docutils literal"><span class="pre">&amp;</span></code> : and</li>
<li><code class="docutils literal"><span class="pre">(</span></code> and <code class="docutils literal"><span class="pre">)</span></code> : for grouping</li>
</ul>
<p>These rules are similar to how boolean expressions are used in pandas for indexing.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li><code class="docutils literal"><span class="pre">=</span></code> will be automatically expanded to the comparison operator <code class="docutils literal"><span class="pre">==</span></code></li>
<li><code class="docutils literal"><span class="pre">~</span></code> is the not operator, but can only be used in very limited
circumstances</li>
<li>If a list/tuple of expressions is passed they will be combined via <code class="docutils literal"><span class="pre">&amp;</span></code></li>
</ul>
</div>
<p>The following are valid expressions:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'index&gt;=date'</span></code></li>
<li><code class="docutils literal"><span class="pre">&quot;columns=['A',</span> <span class="pre">'D']&quot;</span></code></li>
<li><code class="docutils literal"><span class="pre">&quot;columns</span> <span class="pre">in</span> <span class="pre">['A',</span> <span class="pre">'D']&quot;</span></code></li>
<li><code class="docutils literal"><span class="pre">'columns=A'</span></code></li>
<li><code class="docutils literal"><span class="pre">'columns==A'</span></code></li>
<li><code class="docutils literal"><span class="pre">&quot;~(columns=['A','B'])&quot;</span></code></li>
<li><code class="docutils literal"><span class="pre">'index&gt;df.index[3]</span> <span class="pre">&amp;</span> <span class="pre">string=&quot;bar&quot;'</span></code></li>
<li><code class="docutils literal"><span class="pre">'(index&gt;df.index[3]</span> <span class="pre">&amp;</span> <span class="pre">index&lt;=df.index[6])</span> <span class="pre">|</span> <span class="pre">string=&quot;bar&quot;'</span></code></li>
<li><code class="docutils literal"><span class="pre">&quot;ts&gt;=Timestamp('2012-02-01')&quot;</span></code></li>
<li><code class="docutils literal"><span class="pre">&quot;major_axis&gt;=20130101&quot;</span></code></li>
</ul>
<p>The <code class="docutils literal"><span class="pre">indexers</span></code> are on the left-hand side of the sub-expression:</p>
<p><code class="docutils literal"><span class="pre">columns</span></code>, <code class="docutils literal"><span class="pre">major_axis</span></code>, <code class="docutils literal"><span class="pre">ts</span></code></p>
<p>The right-hand side of the sub-expression (after a comparison operator) can be:</p>
<ul class="simple">
<li>functions that will be evaluated, e.g. <code class="docutils literal"><span class="pre">Timestamp('2012-02-01')</span></code></li>
<li>strings, e.g. <code class="docutils literal"><span class="pre">&quot;bar&quot;</span></code></li>
<li>date-like, e.g. <code class="docutils literal"><span class="pre">20130101</span></code>, or <code class="docutils literal"><span class="pre">&quot;20130101&quot;</span></code></li>
<li>lists, e.g. <code class="docutils literal"><span class="pre">&quot;['A','B']&quot;</span></code></li>
<li>variables that are defined in the local names space, e.g. <code class="docutils literal"><span class="pre">date</span></code></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Passing a string to a query by interpolating it into the query
expression is not recommended. Simply assign the string of interest to a
variable and use that variable in an expression. For example, do this</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;HolyMoly&#39;&quot;</span>
<span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="s1">&#39;index == string&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>instead of this</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;HolyMoly&#39;&quot;</span>
<span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">,</span>  <span class="s1">&#39;index == </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">string</span><span class="p">)</span>
</pre></div>
</div>
<p>The latter will <strong>not</strong> work and will raise a <code class="docutils literal"><span class="pre">SyntaxError</span></code>.Note that
there&#8217;s a single quote followed by a double quote in the <code class="docutils literal"><span class="pre">string</span></code>
variable.</p>
<p>If you <em>must</em> interpolate, use the <code class="docutils literal"><span class="pre">'%r'</span></code> format specifier</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="s1">&#39;index == </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">string</span><span class="p">)</span>
</pre></div>
</div>
<p class="last">which will quote <code class="docutils literal"><span class="pre">string</span></code>.</p>
</div>
<p>Here are some examples:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [351]: </span><span class="n">dfq</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABCD&#39;</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>

<span class="gp">In [352]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;dfq&#39;</span><span class="p">,</span><span class="n">dfq</span><span class="p">,</span><span class="n">format</span><span class="o">=</span><span class="s1">&#39;table&#39;</span><span class="p">,</span><span class="n">data_columns</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Use boolean expressions, with in-line function evaluation.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [353]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;dfq&#39;</span><span class="p">,</span><span class="s2">&quot;index&gt;pd.Timestamp(&#39;20130104&#39;) &amp; columns=[&#39;A&#39;, &#39;B&#39;]&quot;</span><span class="p">)</span>
<span class="gr">Out[353]: </span>
<span class="go">                   A         B</span>
<span class="go">2013-01-05  1.210384  0.797435</span>
<span class="go">2013-01-06 -0.850346  1.176812</span>
<span class="go">2013-01-07  0.984188 -0.121728</span>
<span class="go">2013-01-08  0.796595 -0.474021</span>
<span class="go">2013-01-09 -0.804834 -2.123620</span>
<span class="go">2013-01-10  0.334198  0.536784</span>
</pre></div>
</div>
<p>Use and inline column reference</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [354]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;dfq&#39;</span><span class="p">,</span><span class="n">where</span><span class="o">=</span><span class="s2">&quot;A&gt;0 or C&gt;0&quot;</span><span class="p">)</span>
<span class="gr">Out[354]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2013-01-01  0.436258 -1.703013  0.393711 -0.479324</span>
<span class="go">2013-01-02 -0.299016  0.694103  0.678630  0.239556</span>
<span class="go">2013-01-03  0.151227  0.816127  1.893534  0.639633</span>
<span class="go">2013-01-04 -0.962029 -2.085266  1.930247 -1.735349</span>
<span class="go">2013-01-05  1.210384  0.797435 -0.379811  0.702562</span>
<span class="go">2013-01-07  0.984188 -0.121728  2.365769  0.496143</span>
<span class="go">2013-01-08  0.796595 -0.474021 -0.056696  1.357797</span>
<span class="go">2013-01-10  0.334198  0.536784 -0.743830 -0.320204</span>
</pre></div>
</div>
<p>Works with a Panel as well.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [355]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;wp&#39;</span><span class="p">,</span><span class="n">wp</span><span class="p">)</span>

<span class="gp">In [356]: </span><span class="n">store</span>
<span class="gr">Out[356]: </span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df                     frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])                     </span>
<span class="go">/df_mi                  frame_table  (typ-&gt;appendable_multi,nrows-&gt;10,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[bar,foo])</span>
<span class="go">/df_mixed               frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;7,indexers-&gt;[index])                     </span>
<span class="go">/dfq                    frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;4,indexers-&gt;[index],dc-&gt;[A,B,C,D])      </span>
<span class="go">/foo/bar/bah            frame        (shape-&gt;[8,3])                                                            </span>
<span class="go">/wp                     wide_table   (typ-&gt;appendable,nrows-&gt;20,ncols-&gt;2,indexers-&gt;[major_axis,minor_axis])    </span>

<span class="gp">In [357]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;wp&#39;</span><span class="p">,</span> <span class="s2">&quot;major_axis&gt;pd.Timestamp(&#39;20000102&#39;) &amp; minor_axis=[&#39;A&#39;, &#39;B&#39;]&quot;</span><span class="p">)</span>
<span class="gr">Out[357]: </span>
<span class="go">&lt;class &#39;pandas.core.panel.Panel&#39;&gt;</span>
<span class="go">Dimensions: 2 (items) x 3 (major_axis) x 2 (minor_axis)</span>
<span class="go">Items axis: Item1 to Item2</span>
<span class="go">Major_axis axis: 2000-01-03 00:00:00 to 2000-01-05 00:00:00</span>
<span class="go">Minor_axis axis: A to B</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">columns</span></code> keyword can be supplied to select a list of columns to be
returned, this is equivalent to passing a
<code class="docutils literal"><span class="pre">'columns=list_of_columns_to_filter'</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [358]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="s2">&quot;columns=[&#39;A&#39;, &#39;B&#39;]&quot;</span><span class="p">)</span>
<span class="gr">Out[358]: </span>
<span class="go">                   A         B</span>
<span class="go">2000-01-01  0.887163  0.859588</span>
<span class="go">2000-01-02  0.015696 -2.242685</span>
<span class="go">2000-01-03  0.991946  0.953324</span>
<span class="go">2000-01-04 -0.334077  0.002118</span>
<span class="go">2000-01-05  0.289092  1.321158</span>
<span class="go">2000-01-06 -0.202646 -0.655969</span>
<span class="go">2000-01-07  0.553439  1.318152</span>
<span class="go">2000-01-08  0.675554 -1.817027</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">start</span></code> and <code class="docutils literal"><span class="pre">stop</span></code> parameters can be specified to limit the total search
space. These are in terms of the total number of rows in a table.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="c"># this is effectively what the storage of a Panel looks like</span>
<span class="gp">In [359]: </span><span class="n">wp</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
<span class="gr">Out[359]: </span>
<span class="go">                     Item1     Item2</span>
<span class="go">major      minor                    </span>
<span class="go">2000-01-01 A      1.058969  0.215269</span>
<span class="go">           B     -0.397840  0.841009</span>
<span class="go">           C      0.337438 -1.445810</span>
<span class="go">           D      1.047579 -1.401973</span>
<span class="go">2000-01-02 A      1.045938 -0.100918</span>
<span class="go">           B      0.863717 -0.548242</span>
<span class="go">           C     -0.122092 -0.144620</span>
<span class="go">...                    ...       ...</span>
<span class="go">2000-01-04 B      0.036142  0.307969</span>
<span class="go">           C     -2.074978 -0.208499</span>
<span class="go">           D      0.247792  1.033801</span>
<span class="go">2000-01-05 A     -0.897157 -2.400454</span>
<span class="go">           B     -0.136795  2.030604</span>
<span class="go">           C      0.018289 -1.142631</span>
<span class="go">           D      0.755414  0.211883</span>

<span class="go">[20 rows x 2 columns]</span>

<span class="c"># limiting the search</span>
<span class="gp">In [360]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;wp&#39;</span><span class="p">,</span><span class="s2">&quot;major_axis&gt;20000102 &amp; minor_axis=[&#39;A&#39;,&#39;B&#39;]&quot;</span><span class="p">,</span>
<span class="gp">   .....:</span>              <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">   .....:</span> 
<span class="gr">Out[360]: </span>
<span class="go">&lt;class &#39;pandas.core.panel.Panel&#39;&gt;</span>
<span class="go">Dimensions: 2 (items) x 1 (major_axis) x 2 (minor_axis)</span>
<span class="go">Items axis: Item1 to Item2</span>
<span class="go">Major_axis axis: 2000-01-03 00:00:00 to 2000-01-03 00:00:00</span>
<span class="go">Minor_axis axis: A to B</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><code class="docutils literal"><span class="pre">select</span></code> will raise a <code class="docutils literal"><span class="pre">ValueError</span></code> if the query expression has an unknown
variable reference. Usually this means that you are trying to select on a column
that is <strong>not</strong> a data_column.</p>
<p class="last"><code class="docutils literal"><span class="pre">select</span></code> will raise a <code class="docutils literal"><span class="pre">SyntaxError</span></code> if the query expression is not valid.</p>
</div>
</div>
<div class="section" id="using-timedelta64-ns">
<span id="io-hdf5-timedelta"></span><h4>Using timedelta64[ns]<a class="headerlink" href="#using-timedelta64-ns" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.13.</span></p>
</div>
<p>Beginning in 0.13.0, you can store and query using the <code class="docutils literal"><span class="pre">timedelta64[ns]</span></code> type. Terms can be
specified in the format: <code class="docutils literal"><span class="pre">&lt;float&gt;(&lt;unit&gt;)</span></code>, where float may be signed (and fractional), and unit can be
<code class="docutils literal"><span class="pre">D,s,ms,us,ns</span></code> for the timedelta. Here&#8217;s an example:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [361]: </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>

<span class="gp">In [362]: </span><span class="n">dftd</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">),</span> <span class="n">B</span> <span class="o">=</span> <span class="p">[</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">i</span><span class="p">,</span><span class="n">seconds</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="p">]))</span>

<span class="gp">In [363]: </span><span class="n">dftd</span><span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dftd</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">dftd</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">]</span>

<span class="gp">In [364]: </span><span class="n">dftd</span>
<span class="gr">Out[364]: </span>
<span class="go">           A                   B                  C</span>
<span class="go">0 2013-01-01 2013-01-01 00:00:10  -1 days +23:59:50</span>
<span class="go">1 2013-01-01 2013-01-02 00:00:10  -2 days +23:59:50</span>
<span class="go">2 2013-01-01 2013-01-03 00:00:10  -3 days +23:59:50</span>
<span class="go">3 2013-01-01 2013-01-04 00:00:10  -4 days +23:59:50</span>
<span class="go">4 2013-01-01 2013-01-05 00:00:10  -5 days +23:59:50</span>
<span class="go">5 2013-01-01 2013-01-06 00:00:10  -6 days +23:59:50</span>
<span class="go">6 2013-01-01 2013-01-07 00:00:10  -7 days +23:59:50</span>
<span class="go">7 2013-01-01 2013-01-08 00:00:10  -8 days +23:59:50</span>
<span class="go">8 2013-01-01 2013-01-09 00:00:10  -9 days +23:59:50</span>
<span class="go">9 2013-01-01 2013-01-10 00:00:10 -10 days +23:59:50</span>

<span class="gp">In [365]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;dftd&#39;</span><span class="p">,</span><span class="n">dftd</span><span class="p">,</span><span class="n">data_columns</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [366]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;dftd&#39;</span><span class="p">,</span><span class="s2">&quot;C&lt;&#39;-3.5D&#39;&quot;</span><span class="p">)</span>
<span class="gr">Out[366]: </span>
<span class="go">           A                   B                  C</span>
<span class="go">4 2013-01-01 2013-01-05 00:00:10  -5 days +23:59:50</span>
<span class="go">5 2013-01-01 2013-01-06 00:00:10  -6 days +23:59:50</span>
<span class="go">6 2013-01-01 2013-01-07 00:00:10  -7 days +23:59:50</span>
<span class="go">7 2013-01-01 2013-01-08 00:00:10  -8 days +23:59:50</span>
<span class="go">8 2013-01-01 2013-01-09 00:00:10  -9 days +23:59:50</span>
<span class="go">9 2013-01-01 2013-01-10 00:00:10 -10 days +23:59:50</span>
</pre></div>
</div>
</div>
<div class="section" id="indexing">
<h4>Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">¶</a></h4>
<p>You can create/modify an index for a table with <code class="docutils literal"><span class="pre">create_table_index</span></code>
after data is already in the table (after and <code class="docutils literal"><span class="pre">append/put</span></code>
operation). Creating a table index is <strong>highly</strong> encouraged. This will
speed your queries a great deal when you use a <code class="docutils literal"><span class="pre">select</span></code> with the
indexed dimension as the <code class="docutils literal"><span class="pre">where</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Indexes are automagically created (starting <code class="docutils literal"><span class="pre">0.10.1</span></code>) on the indexables
and any data columns you specify. This behavior can be turned off by passing
<code class="docutils literal"><span class="pre">index=False</span></code> to <code class="docutils literal"><span class="pre">append</span></code>.</p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="c"># we have automagically already created an index (in the first section)</span>
<span class="gp">In [367]: </span><span class="n">i</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">cols</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">index</span>

<span class="gp">In [368]: </span><span class="n">i</span><span class="o">.</span><span class="n">optlevel</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">kind</span>
<span class="gr">Out[368]: </span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;medium&#39;</span><span class="p">)</span>

<span class="c"># change an index by passing new parameters</span>
<span class="gp">In [369]: </span><span class="n">store</span><span class="o">.</span><span class="n">create_table_index</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="n">optlevel</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;full&#39;</span><span class="p">)</span>

<span class="gp">In [370]: </span><span class="n">i</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">cols</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">index</span>

<span class="gp">In [371]: </span><span class="n">i</span><span class="o">.</span><span class="n">optlevel</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">kind</span>
<span class="gr">Out[371]: </span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;full&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Oftentimes when appending large amounts of data to a store, it is useful to turn off index creation for each append, then recreate at the end.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [372]: </span><span class="n">df_1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;AB&#39;</span><span class="p">))</span>

<span class="gp">In [373]: </span><span class="n">df_2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;AB&#39;</span><span class="p">))</span>

<span class="gp">In [374]: </span><span class="n">st</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s1">&#39;appends.h5&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

<span class="gp">In [375]: </span><span class="n">st</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="n">df_1</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="gp">In [376]: </span><span class="n">st</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="n">df_2</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="gp">In [377]: </span><span class="n">st</span><span class="o">.</span><span class="n">get_storer</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">table</span>
<span class="gr">Out[377]: </span>
<span class="go">/df/table (Table(20,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: Float64Col(shape=(1,), dflt=0.0, pos=1),</span>
<span class="go">  &quot;B&quot;: Float64Col(shape=(), dflt=0.0, pos=2)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (2730,)</span>
</pre></div>
</div>
<p>Then create the index when finished appending.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [378]: </span><span class="n">st</span><span class="o">.</span><span class="n">create_table_index</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="n">optlevel</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;full&#39;</span><span class="p">)</span>

<span class="gp">In [379]: </span><span class="n">st</span><span class="o">.</span><span class="n">get_storer</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">table</span>
<span class="gr">Out[379]: </span>
<span class="go">/df/table (Table(20,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: Float64Col(shape=(1,), dflt=0.0, pos=1),</span>
<span class="go">  &quot;B&quot;: Float64Col(shape=(), dflt=0.0, pos=2)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (2730,)</span>
<span class="go">  autoindex := True</span>
<span class="go">  colindexes := {</span>
<span class="go">    &quot;B&quot;: Index(9, full, shuffle, zlib(1)).is_csi=True}</span>

<span class="gp">In [380]: </span><span class="n">st</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>See <a class="reference external" href="http://stackoverflow.com/questions/17893370/ptrepack-sortby-needs-full-index">here</a> for how to create a completely-sorted-index (CSI) on an existing store.</p>
</div>
<div class="section" id="query-via-data-columns">
<h4>Query via Data Columns<a class="headerlink" href="#query-via-data-columns" title="Permalink to this headline">¶</a></h4>
<p>You can designate (and index) certain columns that you want to be able
to perform queries (other than the <cite>indexable</cite> columns, which you can
always query). For instance say you want to perform this common
operation, on-disk, and return just the frame that matches this
query. You can specify <code class="docutils literal"><span class="pre">data_columns</span> <span class="pre">=</span> <span class="pre">True</span></code> to force all columns to
be data_columns</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [381]: </span><span class="n">df_dc</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [382]: </span><span class="n">df_dc</span><span class="p">[</span><span class="s1">&#39;string&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>

<span class="gp">In [383]: </span><span class="n">df_dc</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="s1">&#39;string&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="gp">In [384]: </span><span class="n">df_dc</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span><span class="s1">&#39;string&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>

<span class="gp">In [385]: </span><span class="n">df_dc</span><span class="p">[</span><span class="s1">&#39;string2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;cool&#39;</span>

<span class="gp">In [386]: </span><span class="n">df_dc</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="gp">In [387]: </span><span class="n">df_dc</span>
<span class="gr">Out[387]: </span>
<span class="go">                   A         B         C string string2</span>
<span class="go">2000-01-01  0.887163  0.859588 -0.636524    foo    cool</span>
<span class="go">2000-01-02  0.015696  1.000000  1.000000    foo    cool</span>
<span class="go">2000-01-03  0.991946  1.000000  1.000000    foo    cool</span>
<span class="go">2000-01-04 -0.334077  0.002118  0.405453    foo    cool</span>
<span class="go">2000-01-05  0.289092  1.321158 -1.546906    NaN    cool</span>
<span class="go">2000-01-06 -0.202646 -0.655969  0.193421    NaN    cool</span>
<span class="go">2000-01-07  0.553439  1.318152 -0.469305    foo    cool</span>
<span class="go">2000-01-08  0.675554 -1.817027 -0.183109    bar    cool</span>

<span class="c"># on-disk operations</span>
<span class="gp">In [388]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;df_dc&#39;</span><span class="p">,</span> <span class="n">df_dc</span><span class="p">,</span> <span class="n">data_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;string2&#39;</span><span class="p">])</span>

<span class="gp">In [389]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df_dc&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="n">pd</span><span class="o">.</span><span class="n">Term</span><span class="p">(</span><span class="s1">&#39;B&gt;0&#39;</span><span class="p">)</span> <span class="p">])</span>
<span class="gr">Out[389]: </span>
<span class="go">                   A         B         C string string2</span>
<span class="go">2000-01-01  0.887163  0.859588 -0.636524    foo    cool</span>
<span class="go">2000-01-02  0.015696  1.000000  1.000000    foo    cool</span>
<span class="go">2000-01-03  0.991946  1.000000  1.000000    foo    cool</span>
<span class="go">2000-01-04 -0.334077  0.002118  0.405453    foo    cool</span>
<span class="go">2000-01-05  0.289092  1.321158 -1.546906    NaN    cool</span>
<span class="go">2000-01-07  0.553439  1.318152 -0.469305    foo    cool</span>

<span class="c"># getting creative</span>
<span class="gp">In [390]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df_dc&#39;</span><span class="p">,</span> <span class="s1">&#39;B &gt; 0 &amp; C &gt; 0 &amp; string == foo&#39;</span><span class="p">)</span>
<span class="gr">Out[390]: </span>
<span class="go">                   A         B         C string string2</span>
<span class="go">2000-01-02  0.015696  1.000000  1.000000    foo    cool</span>
<span class="go">2000-01-03  0.991946  1.000000  1.000000    foo    cool</span>
<span class="go">2000-01-04 -0.334077  0.002118  0.405453    foo    cool</span>

<span class="c"># this is in-memory version of this type of selection</span>
<span class="gp">In [391]: </span><span class="n">df_dc</span><span class="p">[(</span><span class="n">df_dc</span><span class="o">.</span><span class="n">B</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_dc</span><span class="o">.</span><span class="n">C</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_dc</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s1">&#39;foo&#39;</span><span class="p">)]</span>
<span class="gr">Out[391]: </span>
<span class="go">                   A         B         C string string2</span>
<span class="go">2000-01-02  0.015696  1.000000  1.000000    foo    cool</span>
<span class="go">2000-01-03  0.991946  1.000000  1.000000    foo    cool</span>
<span class="go">2000-01-04 -0.334077  0.002118  0.405453    foo    cool</span>

<span class="c"># we have automagically created this index and the B/C/string/string2</span>
<span class="c"># columns are stored separately as ``PyTables`` columns</span>
<span class="gp">In [392]: </span><span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df_dc</span><span class="o">.</span><span class="n">table</span>
<span class="gr">Out[392]: </span>
<span class="go">/df_dc/table (Table(8,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: Float64Col(shape=(1,), dflt=0.0, pos=1),</span>
<span class="go">  &quot;B&quot;: Float64Col(shape=(), dflt=0.0, pos=2),</span>
<span class="go">  &quot;C&quot;: Float64Col(shape=(), dflt=0.0, pos=3),</span>
<span class="go">  &quot;string&quot;: StringCol(itemsize=3, shape=(), dflt=&#39;&#39;, pos=4),</span>
<span class="go">  &quot;string2&quot;: StringCol(itemsize=4, shape=(), dflt=&#39;&#39;, pos=5)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (1680,)</span>
<span class="go">  autoindex := True</span>
<span class="go">  colindexes := {</span>
<span class="go">    &quot;index&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;C&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;B&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;string2&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;string&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False}</span>
</pre></div>
</div>
<p>There is some performance degradation by making lots of columns into
<cite>data columns</cite>, so it is up to the user to designate these. In addition,
you cannot change data columns (nor indexables) after the first
append/put operation (Of course you can simply read in the data and
create a new table!)</p>
</div>
<div class="section" id="iterator">
<h4>Iterator<a class="headerlink" href="#iterator" title="Permalink to this headline">¶</a></h4>
<p>Starting in <code class="docutils literal"><span class="pre">0.11.0</span></code>, you can pass, <code class="docutils literal"><span class="pre">iterator=True</span></code> or <code class="docutils literal"><span class="pre">chunksize=number_in_a_chunk</span></code>
to <code class="docutils literal"><span class="pre">select</span></code> and <code class="docutils literal"><span class="pre">select_as_multiple</span></code> to return an iterator on the results.
The default is 50,000 rows returned in a chunk.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [393]: </span><span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">   .....:</span>    <span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">   .....:</span> 
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01  0.887163  0.859588 -0.636524</span>
<span class="go">2000-01-02  0.015696 -2.242685  1.150036</span>
<span class="go">2000-01-03  0.991946  0.953324 -2.021255</span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-04 -0.334077  0.002118  0.405453</span>
<span class="go">2000-01-05  0.289092  1.321158 -1.546906</span>
<span class="go">2000-01-06 -0.202646 -0.655969  0.193421</span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-07  0.553439  1.318152 -0.469305</span>
<span class="go">2000-01-08  0.675554 -1.817027 -0.183109</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.12.0.</span></p>
</div>
<p>You can also use the iterator with <code class="docutils literal"><span class="pre">read_hdf</span></code> which will open, then
automatically close the store when finished iterating.</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;store.h5&#39;</span><span class="p">,</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Note, that the chunksize keyword applies to the <strong>source</strong> rows. So if you
are doing a query, then the chunksize will subdivide the total rows in the table
and the query applied, returning an iterator on potentially unequal sized chunks.</p>
<p>Here is a recipe for generating a query and using it to create equal sized return
chunks.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [394]: </span><span class="n">dfeq</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;number&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">)})</span>

<span class="gp">In [395]: </span><span class="n">dfeq</span>
<span class="gr">Out[395]: </span>
<span class="go">   number</span>
<span class="go">0       1</span>
<span class="go">1       2</span>
<span class="go">2       3</span>
<span class="go">3       4</span>
<span class="go">4       5</span>
<span class="go">5       6</span>
<span class="go">6       7</span>
<span class="go">7       8</span>
<span class="go">8       9</span>
<span class="go">9      10</span>

<span class="gp">In [396]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;dfeq&#39;</span><span class="p">,</span> <span class="n">dfeq</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">])</span>

<span class="gp">In [397]: </span><span class="k">def</span> <span class="nf">chunks</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="gp">   .....:</span>      <span class="k">return</span> <span class="p">[</span><span class="n">l</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="n">n</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">),</span> <span class="n">n</span><span class="p">)]</span>
<span class="gp">   .....:</span> 

<span class="gp">In [398]: </span><span class="n">evens</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>

<span class="gp">In [399]: </span><span class="n">coordinates</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">select_as_coordinates</span><span class="p">(</span><span class="s1">&#39;dfeq&#39;</span><span class="p">,</span><span class="s1">&#39;number=evens&#39;</span><span class="p">)</span>

<span class="gp">In [400]: </span><span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
<span class="gp">   .....:</span>      <span class="k">print</span> <span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;dfeq&#39;</span><span class="p">,</span><span class="n">where</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
<span class="gp">   .....:</span> 
<span class="go">   number</span>
<span class="go">1       2</span>
<span class="go">3       4</span>
<span class="go">   number</span>
<span class="go">5       6</span>
<span class="go">7       8</span>
<span class="go">   number</span>
<span class="go">9      10</span>
</pre></div>
</div>
</div>
<div class="section" id="advanced-queries">
<h4>Advanced Queries<a class="headerlink" href="#advanced-queries" title="Permalink to this headline">¶</a></h4>
<div class="section" id="select-a-single-column">
<h5>Select a Single Column<a class="headerlink" href="#select-a-single-column" title="Permalink to this headline">¶</a></h5>
<p>To retrieve a single indexable or data column, use the
method <code class="docutils literal"><span class="pre">select_column</span></code>. This will, for example, enable you to get the index
very quickly. These return a <code class="docutils literal"><span class="pre">Series</span></code> of the result, indexed by the row number.
These do not currently accept the <code class="docutils literal"><span class="pre">where</span></code> selector.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [401]: </span><span class="n">store</span><span class="o">.</span><span class="n">select_column</span><span class="p">(</span><span class="s1">&#39;df_dc&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">)</span>
<span class="gr">Out[401]: </span>
<span class="go">0   2000-01-01</span>
<span class="go">1   2000-01-02</span>
<span class="go">2   2000-01-03</span>
<span class="go">3   2000-01-04</span>
<span class="go">4   2000-01-05</span>
<span class="go">5   2000-01-06</span>
<span class="go">6   2000-01-07</span>
<span class="go">7   2000-01-08</span>
<span class="go">Name: index, dtype: datetime64[ns]</span>

<span class="gp">In [402]: </span><span class="n">store</span><span class="o">.</span><span class="n">select_column</span><span class="p">(</span><span class="s1">&#39;df_dc&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span>
<span class="gr">Out[402]: </span>
<span class="go">0    foo</span>
<span class="go">1    foo</span>
<span class="go">2    foo</span>
<span class="go">3    foo</span>
<span class="go">4    NaN</span>
<span class="go">5    NaN</span>
<span class="go">6    foo</span>
<span class="go">7    bar</span>
<span class="go">Name: string, dtype: object</span>
</pre></div>
</div>
</div>
<div class="section" id="selecting-coordinates">
<span id="io-hdf5-selecting-coordinates"></span><h5>Selecting coordinates<a class="headerlink" href="#selecting-coordinates" title="Permalink to this headline">¶</a></h5>
<p>Sometimes you want to get the coordinates (a.k.a the index locations) of your query. This returns an
<code class="docutils literal"><span class="pre">Int64Index</span></code> of the resulting locations. These coordinates can also be passed to subsequent
<code class="docutils literal"><span class="pre">where</span></code> operations.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [403]: </span><span class="n">df_coord</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20000101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">))</span>

<span class="gp">In [404]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;df_coord&#39;</span><span class="p">,</span><span class="n">df_coord</span><span class="p">)</span>

<span class="gp">In [405]: </span><span class="n">c</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">select_as_coordinates</span><span class="p">(</span><span class="s1">&#39;df_coord&#39;</span><span class="p">,</span><span class="s1">&#39;index&gt;20020101&#39;</span><span class="p">)</span>

<span class="gp">In [406]: </span><span class="n">c</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
<span class="gr">Out[406]: </span><span class="s1">u&#39;Int64Index: 268 entries, 732 to 999&#39;</span>

<span class="gp">In [407]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df_coord&#39;</span><span class="p">,</span><span class="n">where</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
<span class="gr">Out[407]: </span>
<span class="go">                   0         1</span>
<span class="go">2002-01-02 -0.178266 -0.064638</span>
<span class="go">2002-01-03 -1.204956 -3.880898</span>
<span class="go">2002-01-04  0.974470  0.415160</span>
<span class="go">2002-01-05  1.751967  0.485011</span>
<span class="go">2002-01-06 -0.170894  0.748870</span>
<span class="go">2002-01-07  0.629793  0.811053</span>
<span class="go">2002-01-08  2.133776  0.238459</span>
<span class="go">...              ...       ...</span>
<span class="go">2002-09-20 -0.181434  0.612399</span>
<span class="go">2002-09-21 -0.763324 -0.354962</span>
<span class="go">2002-09-22 -0.261776  0.812126</span>
<span class="go">2002-09-23  0.482615 -0.886512</span>
<span class="go">2002-09-24 -0.037757 -0.562953</span>
<span class="go">2002-09-25  0.897706  0.383232</span>
<span class="go">2002-09-26 -1.324806  1.139269</span>

<span class="go">[268 rows x 2 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="selecting-using-a-where-mask">
<span id="io-hdf5-where-mask"></span><h5>Selecting using a where mask<a class="headerlink" href="#selecting-using-a-where-mask" title="Permalink to this headline">¶</a></h5>
<p>Sometime your query can involve creating a list of rows to select. Usually this <code class="docutils literal"><span class="pre">mask</span></code> would
be a resulting <code class="docutils literal"><span class="pre">index</span></code> from an indexing operation. This example selects the months of
a datetimeindex which are 5.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [408]: </span><span class="n">df_mask</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20000101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">))</span>

<span class="gp">In [409]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;df_mask&#39;</span><span class="p">,</span><span class="n">df_mask</span><span class="p">)</span>

<span class="gp">In [410]: </span><span class="n">c</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">select_column</span><span class="p">(</span><span class="s1">&#39;df_mask&#39;</span><span class="p">,</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>

<span class="gp">In [411]: </span><span class="n">where</span> <span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">.</span><span class="n">month</span><span class="o">==</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>

<span class="gp">In [412]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df_mask&#39;</span><span class="p">,</span><span class="n">where</span><span class="o">=</span><span class="n">where</span><span class="p">)</span>
<span class="gr">Out[412]: </span>
<span class="go">                   0         1</span>
<span class="go">2000-05-01 -1.006245 -0.616759</span>
<span class="go">2000-05-02  0.218940  0.717838</span>
<span class="go">2000-05-03  0.013333  1.348060</span>
<span class="go">2000-05-04  0.662176 -1.050645</span>
<span class="go">2000-05-05 -1.034870 -0.243242</span>
<span class="go">2000-05-06 -0.753366 -1.454329</span>
<span class="go">2000-05-07 -1.022920 -0.476989</span>
<span class="go">...              ...       ...</span>
<span class="go">2002-05-25 -0.509090 -0.389376</span>
<span class="go">2002-05-26  0.150674  1.164337</span>
<span class="go">2002-05-27 -0.332944  0.115181</span>
<span class="go">2002-05-28 -1.048127 -0.605733</span>
<span class="go">2002-05-29  1.418754 -0.442835</span>
<span class="go">2002-05-30 -0.433200  0.835001</span>
<span class="go">2002-05-31 -1.041278  1.401811</span>

<span class="go">[93 rows x 2 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="storer-object">
<h5>Storer Object<a class="headerlink" href="#storer-object" title="Permalink to this headline">¶</a></h5>
<p>If you want to inspect the stored object, retrieve via
<code class="docutils literal"><span class="pre">get_storer</span></code>. You could use this programmatically to say get the number
of rows in an object.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [413]: </span><span class="n">store</span><span class="o">.</span><span class="n">get_storer</span><span class="p">(</span><span class="s1">&#39;df_dc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">nrows</span>
<span class="gr">Out[413]: </span><span class="mi">8</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="multiple-table-queries">
<h4>Multiple Table Queries<a class="headerlink" href="#multiple-table-queries" title="Permalink to this headline">¶</a></h4>
<p>New in 0.10.1 are the methods <code class="docutils literal"><span class="pre">append_to_multiple</span></code> and
<code class="docutils literal"><span class="pre">select_as_multiple</span></code>, that can perform appending/selecting from
multiple tables at once. The idea is to have one table (call it the
selector table) that you index most/all of the columns, and perform your
queries. The other table(s) are data tables with an index matching the
selector table&#8217;s index. You can then perform a very fast query
on the selector table, yet get lots of data back. This method is similar to
having a very wide table, but enables more efficient queries.</p>
<p>The <code class="docutils literal"><span class="pre">append_to_multiple</span></code> method splits a given single DataFrame
into multiple tables according to <code class="docutils literal"><span class="pre">d</span></code>, a dictionary that maps the
table names to a list of &#8216;columns&#8217; you want in that table. If <cite>None</cite>
is used in place of a list, that table will have the remaining
unspecified columns of the given DataFrame. The argument <code class="docutils literal"><span class="pre">selector</span></code>
defines which table is the selector table (which you can make queries from).
The argument <code class="docutils literal"><span class="pre">dropna</span></code> will drop rows from the input DataFrame to ensure
tables are synchronized.  This means that if a row for one of the tables
being written to is entirely <code class="docutils literal"><span class="pre">np.NaN</span></code>, that row will be dropped from all tables.</p>
<p>If <code class="docutils literal"><span class="pre">dropna</span></code> is False, <strong>THE USER IS RESPONSIBLE FOR SYNCHRONIZING THE TABLES</strong>.
Remember that entirely <code class="docutils literal"><span class="pre">np.Nan</span></code> rows are not written to the HDFStore, so if
you choose to call <code class="docutils literal"><span class="pre">dropna=False</span></code>, some tables may have more rows than others,
and therefore <code class="docutils literal"><span class="pre">select_as_multiple</span></code> may not work or it may return unexpected
results.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [414]: </span><span class="n">df_mt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">8</span><span class="p">),</span>
<span class="gp">   .....:</span>                                   <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [415]: </span><span class="n">df_mt</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>

<span class="gp">In [416]: </span><span class="n">df_mt</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="c"># you can also create the tables individually</span>
<span class="gp">In [417]: </span><span class="n">store</span><span class="o">.</span><span class="n">append_to_multiple</span><span class="p">({</span><span class="s1">&#39;df1_mt&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="s1">&#39;df2_mt&#39;</span><span class="p">:</span> <span class="bp">None</span> <span class="p">},</span>
<span class="gp">   .....:</span>                           <span class="n">df_mt</span><span class="p">,</span> <span class="n">selector</span><span class="o">=</span><span class="s1">&#39;df1_mt&#39;</span><span class="p">)</span>
<span class="gp">   .....:</span> 

<span class="gp">In [418]: </span><span class="n">store</span>
<span class="gr">Out[418]: </span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df                     frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])                         </span>
<span class="go">/df1_mt                 frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;2,indexers-&gt;[index],dc-&gt;[A,B])               </span>
<span class="go">/df2_mt                 frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;5,indexers-&gt;[index])                         </span>
<span class="go">/df_coord               frame_table  (typ-&gt;appendable,nrows-&gt;1000,ncols-&gt;2,indexers-&gt;[index])                      </span>
<span class="go">/df_dc                  frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[B,C,string,string2])</span>
<span class="go">/df_mask                frame_table  (typ-&gt;appendable,nrows-&gt;1000,ncols-&gt;2,indexers-&gt;[index])                      </span>
<span class="go">/df_mi                  frame_table  (typ-&gt;appendable_multi,nrows-&gt;10,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[bar,foo])    </span>
<span class="go">/df_mixed               frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;7,indexers-&gt;[index])                         </span>
<span class="go">/dfeq                   frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;1,indexers-&gt;[index],dc-&gt;[number])           </span>
<span class="go">/dfq                    frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;4,indexers-&gt;[index],dc-&gt;[A,B,C,D])          </span>
<span class="go">/dftd                   frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;3,indexers-&gt;[index],dc-&gt;[A,B,C])            </span>
<span class="go">/foo/bar/bah            frame        (shape-&gt;[8,3])                                                                </span>
<span class="go">/wp                     wide_table   (typ-&gt;appendable,nrows-&gt;20,ncols-&gt;2,indexers-&gt;[major_axis,minor_axis])        </span>

<span class="c"># individual tables were created</span>
<span class="gp">In [419]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df1_mt&#39;</span><span class="p">)</span>
<span class="gr">Out[419]: </span>
<span class="go">                   A         B</span>
<span class="go">2000-01-01  0.714697  0.318215</span>
<span class="go">2000-01-02       NaN       NaN</span>
<span class="go">2000-01-03 -0.086919  0.416905</span>
<span class="go">2000-01-04  0.489131 -0.253340</span>
<span class="go">2000-01-05 -0.382952 -0.397373</span>
<span class="go">2000-01-06  0.538116  0.226388</span>
<span class="go">2000-01-07 -2.073479 -0.115926</span>
<span class="go">2000-01-08 -0.695400  0.402493</span>

<span class="gp">In [420]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df2_mt&#39;</span><span class="p">)</span>
<span class="gr">Out[420]: </span>
<span class="go">                   C         D         E         F  foo</span>
<span class="go">2000-01-01  0.607460  0.790907  0.852225  0.096696  bar</span>
<span class="go">2000-01-02  0.811031 -0.356817  1.047085  0.664705  bar</span>
<span class="go">2000-01-03 -0.764381 -0.287229 -0.089351 -1.035115  bar</span>
<span class="go">2000-01-04 -1.948100 -0.116556  0.800597 -0.796154  bar</span>
<span class="go">2000-01-05 -0.717627  0.156995 -0.344718 -0.171208  bar</span>
<span class="go">2000-01-06  1.541729  0.205256  1.998065  0.953591  bar</span>
<span class="go">2000-01-07  1.391070  0.303013  1.093347 -0.101000  bar</span>
<span class="go">2000-01-08 -1.507639  0.089575  0.658822 -1.037627  bar</span>

<span class="c"># as a multiple</span>
<span class="gp">In [421]: </span><span class="n">store</span><span class="o">.</span><span class="n">select_as_multiple</span><span class="p">([</span><span class="s1">&#39;df1_mt&#39;</span><span class="p">,</span> <span class="s1">&#39;df2_mt&#39;</span><span class="p">],</span> <span class="n">where</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&gt;0&#39;</span><span class="p">,</span> <span class="s1">&#39;B&gt;0&#39;</span><span class="p">],</span>
<span class="gp">   .....:</span>                           <span class="n">selector</span> <span class="o">=</span> <span class="s1">&#39;df1_mt&#39;</span><span class="p">)</span>
<span class="gp">   .....:</span> 
<span class="gr">Out[421]: </span>
<span class="go">                   A         B         C         D         E         F  foo</span>
<span class="go">2000-01-01  0.714697  0.318215  0.607460  0.790907  0.852225  0.096696  bar</span>
<span class="go">2000-01-06  0.538116  0.226388  1.541729  0.205256  1.998065  0.953591  bar</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="delete-from-a-table">
<h3>Delete from a Table<a class="headerlink" href="#delete-from-a-table" title="Permalink to this headline">¶</a></h3>
<p>You can delete from a table selectively by specifying a <code class="docutils literal"><span class="pre">where</span></code>. In
deleting rows, it is important to understand the <code class="docutils literal"><span class="pre">PyTables</span></code> deletes
rows by erasing the rows, then <strong>moving</strong> the following data. Thus
deleting can potentially be a very expensive operation depending on the
orientation of your data. This is especially true in higher dimensional
objects (<code class="docutils literal"><span class="pre">Panel</span></code> and <code class="docutils literal"><span class="pre">Panel4D</span></code>). To get optimal performance, it&#8217;s
worthwhile to have the dimension you are deleting be the first of the
<code class="docutils literal"><span class="pre">indexables</span></code>.</p>
<p>Data is ordered (on the disk) in terms of the <code class="docutils literal"><span class="pre">indexables</span></code>. Here&#8217;s a
simple use case. You store panel-type data, with dates in the
<code class="docutils literal"><span class="pre">major_axis</span></code> and ids in the <code class="docutils literal"><span class="pre">minor_axis</span></code>. The data is then
interleaved like this:</p>
<ul class="simple">
<li>date_1
- id_1
- id_2
-  .
- id_n</li>
<li>date_2
- id_1
-  .
- id_n</li>
</ul>
<p>It should be clear that a delete operation on the <code class="docutils literal"><span class="pre">major_axis</span></code> will be
fairly quick, as one chunk is removed, then the following data moved. On
the other hand a delete operation on the <code class="docutils literal"><span class="pre">minor_axis</span></code> will be very
expensive. In this case it would almost certainly be faster to rewrite
the table using a <code class="docutils literal"><span class="pre">where</span></code> that selects all but the missing data.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="c"># returns the number of rows deleted</span>
<span class="gp">In [422]: </span><span class="n">store</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;wp&#39;</span><span class="p">,</span> <span class="s1">&#39;major_axis&gt;20000102&#39;</span> <span class="p">)</span>
<span class="gr">Out[422]: </span><span class="mi">12</span>

<span class="gp">In [423]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;wp&#39;</span><span class="p">)</span>
<span class="gr">Out[423]: </span>
<span class="go">&lt;class &#39;pandas.core.panel.Panel&#39;&gt;</span>
<span class="go">Dimensions: 2 (items) x 2 (major_axis) x 4 (minor_axis)</span>
<span class="go">Items axis: Item1 to Item2</span>
<span class="go">Major_axis axis: 2000-01-01 00:00:00 to 2000-01-02 00:00:00</span>
<span class="go">Minor_axis axis: A to D</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Please note that HDF5 <strong>DOES NOT RECLAIM SPACE</strong> in the h5 files
automatically. Thus, repeatedly deleting (or removing nodes) and adding
again, <strong>WILL TEND TO INCREASE THE FILE SIZE</strong>.</p>
<p class="last">To <em>repack and clean</em> the file, use <a class="reference internal" href="#io-hdf5-ptrepack"><span class="std std-ref">ptrepack</span></a></p>
</div>
</div>
<div class="section" id="notes-caveats">
<span id="io-hdf5-notes"></span><h3>Notes &amp; Caveats<a class="headerlink" href="#notes-caveats" title="Permalink to this headline">¶</a></h3>
<div class="section" id="compression">
<h4>Compression<a class="headerlink" href="#compression" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal"><span class="pre">PyTables</span></code> allows the stored data to be compressed. This applies to
all kinds of stores, not just tables.</p>
<ul class="simple">
<li>Pass <code class="docutils literal"><span class="pre">complevel=int</span></code> for a compression level (1-9, with 0 being no
compression, and the default)</li>
<li>Pass <code class="docutils literal"><span class="pre">complib=lib</span></code> where lib is any of <code class="docutils literal"><span class="pre">zlib,</span> <span class="pre">bzip2,</span> <span class="pre">lzo,</span> <span class="pre">blosc</span></code> for
whichever compression library you prefer.</li>
</ul>
<p><code class="docutils literal"><span class="pre">HDFStore</span></code> will use the file based compression scheme if no overriding
<code class="docutils literal"><span class="pre">complib</span></code> or <code class="docutils literal"><span class="pre">complevel</span></code> options are provided. <code class="docutils literal"><span class="pre">blosc</span></code> offers very
fast compression, and is my most used. Note that <code class="docutils literal"><span class="pre">lzo</span></code> and <code class="docutils literal"><span class="pre">bzip2</span></code>
may not be installed (by Python) by default.</p>
<p>Compression for all objects within the file</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">store_compressed</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s1">&#39;store_compressed.h5&#39;</span><span class="p">,</span> <span class="n">complevel</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">complib</span><span class="o">=</span><span class="s1">&#39;blosc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or on-the-fly compression (this only applies to tables). You can turn
off file compression for a specific table by passing <code class="docutils literal"><span class="pre">complevel=0</span></code></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">complib</span><span class="o">=</span><span class="s1">&#39;zlib&#39;</span><span class="p">,</span> <span class="n">complevel</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="ptrepack">
<span id="io-hdf5-ptrepack"></span><h4>ptrepack<a class="headerlink" href="#ptrepack" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal"><span class="pre">PyTables</span></code> offers better write performance when tables are compressed after
they are written, as opposed to turning on compression at the very
beginning. You can use the supplied <code class="docutils literal"><span class="pre">PyTables</span></code> utility
<code class="docutils literal"><span class="pre">ptrepack</span></code>. In addition, <code class="docutils literal"><span class="pre">ptrepack</span></code> can change compression levels
after the fact.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">ptrepack --chunkshape=auto --propindexes --complevel=9 --complib=blosc in.h5 out.h5</span>
</pre></div>
</div>
<p>Furthermore <code class="docutils literal"><span class="pre">ptrepack</span> <span class="pre">in.h5</span> <span class="pre">out.h5</span></code> will <em>repack</em> the file to allow
you to reuse previously deleted space. Alternatively, one can simply
remove the file and write again, or use the <code class="docutils literal"><span class="pre">copy</span></code> method.</p>
</div>
<div class="section" id="caveats">
<span id="io-hdf5-caveats"></span><h4>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><code class="docutils literal"><span class="pre">HDFStore</span></code> is <strong>not-threadsafe for writing</strong>. The underlying
<code class="docutils literal"><span class="pre">PyTables</span></code> only supports concurrent reads (via threading or
processes). If you need reading and writing <em>at the same time</em>, you
need to serialize these operations in a single thread in a single
process. You will corrupt your data otherwise. See the (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/2397">GH2397</a>) for more information.</p>
</div>
<ul class="simple">
<li>If you use locks to manage write access between multiple processes, you
may want to use <a class="reference external" href="https://docs.python.org/3/library/os.html#os.fsync" title="(in Python v3.6)"><code class="xref py py-func docutils literal"><span class="pre">fsync()</span></code></a> before releasing write locks. For
convenience you can use <code class="docutils literal"><span class="pre">store.flush(fsync=True)</span></code> to do this for you.</li>
<li>Once a <code class="docutils literal"><span class="pre">table</span></code> is created its items (Panel) / columns (DataFrame)
are fixed; only exactly the same columns can be appended</li>
<li>Be aware that timezones (e.g., <code class="docutils literal"><span class="pre">pytz.timezone('US/Eastern')</span></code>)
are not necessarily equal across timezone versions.  So if data is
localized to a specific timezone in the HDFStore using one version
of a timezone library and that data is updated with another version, the data
will be converted to UTC since these timezones are not considered
equal.  Either use the same version of timezone library or use <code class="docutils literal"><span class="pre">tz_convert</span></code> with
the updated timezone definition.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><code class="docutils literal"><span class="pre">PyTables</span></code> will show a <code class="docutils literal"><span class="pre">NaturalNameWarning</span></code> if a  column name
cannot be used as an attribute selector.
<em>Natural</em> identifiers contain only letters, numbers, and underscores,
and may not begin with a number.
Other identifiers cannot be used in a <code class="docutils literal"><span class="pre">where</span></code> clause
and are generally a bad idea.</p>
</div>
</div>
</div>
<div class="section" id="datatypes">
<span id="io-hdf5-data-types"></span><h3>DataTypes<a class="headerlink" href="#datatypes" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">HDFStore</span></code> will map an object dtype to the <code class="docutils literal"><span class="pre">PyTables</span></code> underlying
dtype. This means the following types are known to work:</p>
<table border="1" class="docutils">
<colgroup>
<col width="68%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Represents missing values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>floating : <code class="docutils literal"><span class="pre">float64,</span> <span class="pre">float32,</span> <span class="pre">float16</span></code></td>
<td><code class="docutils literal"><span class="pre">np.nan</span></code></td>
</tr>
<tr class="row-odd"><td>integer : <code class="docutils literal"><span class="pre">int64,</span> <span class="pre">int32,</span> <span class="pre">int8,</span> <span class="pre">uint64,uint32,</span> <span class="pre">uint8</span></code></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>boolean</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">datetime64[ns]</span></code></td>
<td><code class="docutils literal"><span class="pre">NaT</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">timedelta64[ns]</span></code></td>
<td><code class="docutils literal"><span class="pre">NaT</span></code></td>
</tr>
<tr class="row-odd"><td>categorical : see the section below</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>object : <code class="docutils literal"><span class="pre">strings</span></code></td>
<td><code class="docutils literal"><span class="pre">np.nan</span></code></td>
</tr>
</tbody>
</table>
<p><code class="docutils literal"><span class="pre">unicode</span></code> columns are not supported, and <strong>WILL FAIL</strong>.</p>
<div class="section" id="categorical-data">
<span id="io-hdf5-categorical"></span><h4>Categorical Data<a class="headerlink" href="#categorical-data" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.15.2.</span></p>
</div>
<p>Writing data to a <code class="docutils literal"><span class="pre">HDFStore</span></code> that contains a <code class="docutils literal"><span class="pre">category</span></code> dtype was implemented
in 0.15.2. Queries work the same as if it was an object array. However, the <code class="docutils literal"><span class="pre">category</span></code> dtyped data is
stored in a more efficient manner.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [424]: </span><span class="n">dfcat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span> <span class="s1">&#39;A&#39;</span> <span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;aabbcdba&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">),</span>
<span class="gp">   .....:</span>                        <span class="s1">&#39;B&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="p">})</span>
<span class="gp">   .....:</span> 

<span class="gp">In [425]: </span><span class="n">dfcat</span>
<span class="gr">Out[425]: </span>
<span class="go">   A         B</span>
<span class="go">0  a  0.603273</span>
<span class="go">1  a  0.262554</span>
<span class="go">2  b -0.979586</span>
<span class="go">3  b  2.132387</span>
<span class="go">4  c  0.892485</span>
<span class="go">5  d  1.996474</span>
<span class="go">6  b  0.231425</span>
<span class="go">7  a  0.980070</span>

<span class="gp">In [426]: </span><span class="n">dfcat</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gr">Out[426]: </span>
<span class="go">A    category</span>
<span class="go">B     float64</span>
<span class="go">dtype: object</span>

<span class="gp">In [427]: </span><span class="n">cstore</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s1">&#39;cats.h5&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

<span class="gp">In [428]: </span><span class="n">cstore</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;dfcat&#39;</span><span class="p">,</span> <span class="n">dfcat</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">])</span>

<span class="gp">In [429]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">cstore</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;dfcat&#39;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s2">&quot;A in [&#39;b&#39;,&#39;c&#39;]&quot;</span><span class="p">)</span>

<span class="gp">In [430]: </span><span class="n">result</span>
<span class="gr">Out[430]: </span>
<span class="go">   A         B</span>
<span class="go">2  b -0.979586</span>
<span class="go">3  b  2.132387</span>
<span class="go">4  c  0.892485</span>
<span class="go">6  b  0.231425</span>

<span class="gp">In [431]: </span><span class="n">result</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gr">Out[431]: </span>
<span class="go">A    category</span>
<span class="go">B     float64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>The format of the <code class="docutils literal"><span class="pre">Categorical</span></code> is readable by prior versions of pandas (&lt; 0.15.2), but will retrieve
the data as an integer based column (e.g. the <code class="docutils literal"><span class="pre">codes</span></code>). However, the <code class="docutils literal"><span class="pre">categories</span></code> <em>can</em> be retrieved
but require the user to select them manually using the explicit meta path.</p>
<p>The data is stored like so:</p>
<div class="last highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [432]: </span><span class="n">cstore</span>
<span class="gr">Out[432]: </span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: cats.h5</span>
<span class="go">/dfcat                        frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;2,indexers-&gt;[index],dc-&gt;[A])     </span>
<span class="go">/dfcat/meta/A/meta            series_table (typ-&gt;appendable,nrows-&gt;4,ncols-&gt;1,indexers-&gt;[index],dc-&gt;[values])</span>

<span class="c"># to get the categories</span>
<span class="gp">In [433]: </span><span class="n">cstore</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;dfcat/meta/A/meta&#39;</span><span class="p">)</span>
<span class="gr">Out[433]: </span>
<span class="go">0    a</span>
<span class="go">1    b</span>
<span class="go">2    c</span>
<span class="go">3    d</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="string-columns">
<h4>String Columns<a class="headerlink" href="#string-columns" title="Permalink to this headline">¶</a></h4>
<p><strong>min_itemsize</strong></p>
<p>The underlying implementation of <code class="docutils literal"><span class="pre">HDFStore</span></code> uses a fixed column width (itemsize) for string columns.
A string column itemsize is calculated as the maximum of the
length of data (for that column) that is passed to the <code class="docutils literal"><span class="pre">HDFStore</span></code>, <strong>in the first append</strong>. Subsequent appends,
may introduce a string for a column <strong>larger</strong> than the column can hold, an Exception will be raised (otherwise you
could have a silent truncation of these columns, leading to loss of information). In the future we may relax this and
allow a user-specified truncation to occur.</p>
<p>Pass <code class="docutils literal"><span class="pre">min_itemsize</span></code> on the first table creation to a-priori specify the minimum length of a particular string column.
<code class="docutils literal"><span class="pre">min_itemsize</span></code> can be an integer, or a dict mapping a column name to an integer. You can pass <code class="docutils literal"><span class="pre">values</span></code> as a key to
allow all <em>indexables</em> or <em>data_columns</em> to have this min_itemsize.</p>
<p>Starting in 0.11.0, passing a <code class="docutils literal"><span class="pre">min_itemsize</span></code> dict will cause all passed columns to be created as <em>data_columns</em> automatically.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are not passing any <code class="docutils literal"><span class="pre">data_columns</span></code>, then the <code class="docutils literal"><span class="pre">min_itemsize</span></code> will be the maximum of the length of any string passed</p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [434]: </span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>

<span class="gp">In [435]: </span><span class="n">dfs</span>
<span class="gr">Out[435]: </span>
<span class="go">     A    B</span>
<span class="go">0  foo  bar</span>
<span class="go">1  foo  bar</span>
<span class="go">2  foo  bar</span>
<span class="go">3  foo  bar</span>
<span class="go">4  foo  bar</span>

<span class="c"># A and B have a size of 30</span>
<span class="gp">In [436]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;dfs&#39;</span><span class="p">,</span> <span class="n">dfs</span><span class="p">,</span> <span class="n">min_itemsize</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span>

<span class="gp">In [437]: </span><span class="n">store</span><span class="o">.</span><span class="n">get_storer</span><span class="p">(</span><span class="s1">&#39;dfs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">table</span>
<span class="gr">Out[437]: </span>
<span class="go">/dfs/table (Table(5,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: StringCol(itemsize=30, shape=(2,), dflt=&#39;&#39;, pos=1)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (963,)</span>
<span class="go">  autoindex := True</span>
<span class="go">  colindexes := {</span>
<span class="go">    &quot;index&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False}</span>

<span class="c"># A is created as a data_column with a size of 30</span>
<span class="c"># B is size is calculated</span>
<span class="gp">In [438]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;dfs2&#39;</span><span class="p">,</span> <span class="n">dfs</span><span class="p">,</span> <span class="n">min_itemsize</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;A&#39;</span> <span class="p">:</span> <span class="mi">30</span> <span class="p">})</span>

<span class="gp">In [439]: </span><span class="n">store</span><span class="o">.</span><span class="n">get_storer</span><span class="p">(</span><span class="s1">&#39;dfs2&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">table</span>
<span class="gr">Out[439]: </span>
<span class="go">/dfs2/table (Table(5,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: StringCol(itemsize=3, shape=(1,), dflt=&#39;&#39;, pos=1),</span>
<span class="go">  &quot;A&quot;: StringCol(itemsize=30, shape=(), dflt=&#39;&#39;, pos=2)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (1598,)</span>
<span class="go">  autoindex := True</span>
<span class="go">  colindexes := {</span>
<span class="go">    &quot;A&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;index&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False}</span>
</pre></div>
</div>
<p><strong>nan_rep</strong></p>
<p>String columns will serialize a <code class="docutils literal"><span class="pre">np.nan</span></code> (a missing value) with the <code class="docutils literal"><span class="pre">nan_rep</span></code> string representation. This defaults to the string value <code class="docutils literal"><span class="pre">nan</span></code>.
You could inadvertently turn an actual <code class="docutils literal"><span class="pre">nan</span></code> value into a missing value.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [440]: </span><span class="n">dfss</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span><span class="s1">&#39;nan&#39;</span><span class="p">]))</span>

<span class="gp">In [441]: </span><span class="n">dfss</span>
<span class="gr">Out[441]: </span>
<span class="go">     A</span>
<span class="go">0  foo</span>
<span class="go">1  bar</span>
<span class="go">2  nan</span>

<span class="gp">In [442]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;dfss&#39;</span><span class="p">,</span> <span class="n">dfss</span><span class="p">)</span>

<span class="gp">In [443]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;dfss&#39;</span><span class="p">)</span>
<span class="gr">Out[443]: </span>
<span class="go">     A</span>
<span class="go">0  foo</span>
<span class="go">1  bar</span>
<span class="go">2  NaN</span>

<span class="c"># here you need to specify a different nan rep</span>
<span class="gp">In [444]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;dfss2&#39;</span><span class="p">,</span> <span class="n">dfss</span><span class="p">,</span> <span class="n">nan_rep</span><span class="o">=</span><span class="s1">&#39;_nan_&#39;</span><span class="p">)</span>

<span class="gp">In [445]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;dfss2&#39;</span><span class="p">)</span>
<span class="gr">Out[445]: </span>
<span class="go">     A</span>
<span class="go">0  foo</span>
<span class="go">1  bar</span>
<span class="go">2  nan</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="external-compatibility">
<span id="io-external-compatibility"></span><h3>External Compatibility<a class="headerlink" href="#external-compatibility" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">HDFStore</span></code> writes <code class="docutils literal"><span class="pre">table</span></code> format objects in specific formats suitable for
producing loss-less round trips to pandas objects. For external
compatibility, <code class="docutils literal"><span class="pre">HDFStore</span></code> can read native <code class="docutils literal"><span class="pre">PyTables</span></code> format
tables.</p>
<p>It is possible to write an <code class="docutils literal"><span class="pre">HDFStore</span></code> object that can easily be imported into <code class="docutils literal"><span class="pre">R</span></code> using the
<code class="docutils literal"><span class="pre">rhdf5</span></code> library (<a class="reference external" href="http://www.bioconductor.org/packages/release/bioc/html/rhdf5.html">Package website</a>). Create a table format store like this:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [446]: </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="gp">In [447]: </span><span class="n">df_for_r</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;first&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="gp">   .....:</span>                          <span class="s2">&quot;second&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="gp">   .....:</span>                          <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="p">,))},</span>
<span class="gp">   .....:</span>                          <span class="n">index</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
<span class="gp">   .....:</span> 

<span class="gp">In [448]: </span><span class="n">df_for_r</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gr">Out[448]: </span>
<span class="go">   class     first    second</span>
<span class="go">0      0  0.417022  0.326645</span>
<span class="go">1      0  0.720324  0.527058</span>
<span class="go">2      1  0.000114  0.885942</span>
<span class="go">3      1  0.302333  0.357270</span>
<span class="go">4      1  0.146756  0.908535</span>

<span class="gp">In [449]: </span><span class="n">store_export</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s1">&#39;export.h5&#39;</span><span class="p">)</span>

<span class="gp">In [450]: </span><span class="n">store_export</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;df_for_r&#39;</span><span class="p">,</span> <span class="n">df_for_r</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="n">df_dc</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

<span class="gp">In [451]: </span><span class="n">store_export</span>
<span class="gr">Out[451]: </span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: export.h5</span>
<span class="go">/df_for_r            frame_table  (typ-&gt;appendable,nrows-&gt;100,ncols-&gt;3,indexers-&gt;[index])</span>
</pre></div>
</div>
<p>In R this file can be read into a <code class="docutils literal"><span class="pre">data.frame</span></code> object using the <code class="docutils literal"><span class="pre">rhdf5</span></code>
library. The following example function reads the corresponding column names
and data values from the values and assembles them into a <code class="docutils literal"><span class="pre">data.frame</span></code>:</p>
<div class="highlight-R"><div class="highlight"><pre><span></span><span class="c1"># Load values and column names for all datasets from corresponding nodes and</span>
<span class="c1"># insert them into one data.frame object.</span>

<span class="kn">library</span><span class="p">(</span>rhdf5<span class="p">)</span>

loadhdf5data <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>h5File<span class="p">)</span> <span class="p">{</span>

listing <span class="o">&lt;-</span> h5ls<span class="p">(</span>h5File<span class="p">)</span>
<span class="c1"># Find all data nodes, values are stored in *_values and corresponding column</span>
<span class="c1"># titles in *_items</span>
data_nodes <span class="o">&lt;-</span> <span class="kp">grep</span><span class="p">(</span><span class="s">&quot;_values&quot;</span><span class="p">,</span> listing<span class="o">$</span>name<span class="p">)</span>
name_nodes <span class="o">&lt;-</span> <span class="kp">grep</span><span class="p">(</span><span class="s">&quot;_items&quot;</span><span class="p">,</span> listing<span class="o">$</span>name<span class="p">)</span>
data_paths <span class="o">=</span> <span class="kp">paste</span><span class="p">(</span>listing<span class="o">$</span>group<span class="p">[</span>data_nodes<span class="p">],</span> listing<span class="o">$</span>name<span class="p">[</span>data_nodes<span class="p">],</span> sep <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
name_paths <span class="o">=</span> <span class="kp">paste</span><span class="p">(</span>listing<span class="o">$</span>group<span class="p">[</span>name_nodes<span class="p">],</span> listing<span class="o">$</span>name<span class="p">[</span>name_nodes<span class="p">],</span> sep <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
columns <span class="o">=</span> <span class="kt">list</span><span class="p">()</span>
<span class="kr">for</span> <span class="p">(</span>idx <span class="kr">in</span> <span class="kp">seq</span><span class="p">(</span>data_paths<span class="p">))</span> <span class="p">{</span>
  <span class="c1"># NOTE: matrices returned by h5read have to be transposed to to obtain</span>
  <span class="c1"># required Fortran order!</span>
  data <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span><span class="kp">t</span><span class="p">(</span>h5read<span class="p">(</span>h5File<span class="p">,</span> data_paths<span class="p">[</span>idx<span class="p">])))</span>
  names <span class="o">&lt;-</span> <span class="kp">t</span><span class="p">(</span>h5read<span class="p">(</span>h5File<span class="p">,</span> name_paths<span class="p">[</span>idx<span class="p">]))</span>
  entry <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>data<span class="p">)</span>
  <span class="kp">colnames</span><span class="p">(</span>entry<span class="p">)</span> <span class="o">&lt;-</span> <span class="kp">names</span>
  columns <span class="o">&lt;-</span> <span class="kp">append</span><span class="p">(</span>columns<span class="p">,</span> entry<span class="p">)</span>
<span class="p">}</span>

data <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>columns<span class="p">)</span>

<span class="kr">return</span><span class="p">(</span>data<span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now you can import the <code class="docutils literal"><span class="pre">DataFrame</span></code> into R:</p>
<div class="highlight-R"><div class="highlight"><pre><span></span><span class="o">&gt;</span> data <span class="o">=</span> loadhdf5data<span class="p">(</span><span class="s">&quot;transfer.hdf5&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="kp">head</span><span class="p">(</span>data<span class="p">)</span>
         first    second <span class="kp">class</span>
<span class="m">1</span> <span class="m">0.4170220047</span> <span class="m">0.3266449</span>     <span class="m">0</span>
<span class="m">2</span> <span class="m">0.7203244934</span> <span class="m">0.5270581</span>     <span class="m">0</span>
<span class="m">3</span> <span class="m">0.0001143748</span> <span class="m">0.8859421</span>     <span class="m">1</span>
<span class="m">4</span> <span class="m">0.3023325726</span> <span class="m">0.3572698</span>     <span class="m">1</span>
<span class="m">5</span> <span class="m">0.1467558908</span> <span class="m">0.9085352</span>     <span class="m">1</span>
<span class="m">6</span> <span class="m">0.0923385948</span> <span class="m">0.6233601</span>     <span class="m">1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The R function lists the entire HDF5 file&#8217;s contents and assembles the
<code class="docutils literal"><span class="pre">data.frame</span></code> object from all matching nodes, so use this only as a
starting point if you have stored multiple <code class="docutils literal"><span class="pre">DataFrame</span></code> objects to a
single HDF5 file.</p>
</div>
</div>
<div class="section" id="backwards-compatibility">
<h3>Backwards Compatibility<a class="headerlink" href="#backwards-compatibility" title="Permalink to this headline">¶</a></h3>
<p>0.10.1 of <code class="docutils literal"><span class="pre">HDFStore</span></code> can read tables created in a prior version of pandas,
however query terms using the
prior (undocumented) methodology are unsupported. <code class="docutils literal"><span class="pre">HDFStore</span></code> will
issue a warning if you try to use a legacy-format file. You must
read in the entire file and write it out using the new format, using the
method <code class="docutils literal"><span class="pre">copy</span></code> to take advantage of the updates. The group attribute
<code class="docutils literal"><span class="pre">pandas_version</span></code> contains the version information. <code class="docutils literal"><span class="pre">copy</span></code> takes a
number of options, please see the docstring.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="c"># a legacy store</span>
<span class="gp">In [452]: </span><span class="n">legacy_store</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="n">legacy_file_path</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>

<span class="gp">In [453]: </span><span class="n">legacy_store</span>
<span class="gr">Out[453]: </span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: /home/joris/scipy/pandas/doc/source/_static/legacy_0.10.h5</span>
<span class="go">/a                    series       (shape-&gt;[30])                                                                        </span>
<span class="go">/b                    frame        (shape-&gt;[30,4])                                                                      </span>
<span class="go">/df1_mixed            frame_table [0.10.0] (typ-&gt;appendable,nrows-&gt;30,ncols-&gt;11,indexers-&gt;[index])                      </span>
<span class="go">/foo/bar              wide         (shape-&gt;[3,30,4])                                                                    </span>
<span class="go">/p1_mixed             wide_table  [0.10.0] (typ-&gt;appendable,nrows-&gt;120,ncols-&gt;9,indexers-&gt;[major_axis,minor_axis])      </span>
<span class="go">/p4d_mixed            ndim_table  [0.10.0] (typ-&gt;appendable,nrows-&gt;360,ncols-&gt;9,indexers-&gt;[items,major_axis,minor_axis])</span>

<span class="c"># copy (and return the new handle)</span>
<span class="gp">In [454]: </span><span class="n">new_store</span> <span class="o">=</span> <span class="n">legacy_store</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s1">&#39;store_new.h5&#39;</span><span class="p">)</span>

<span class="gp">In [455]: </span><span class="n">new_store</span>
<span class="gr">Out[455]: </span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store_new.h5</span>
<span class="go">/a                    series       (shape-&gt;[30])                                                                </span>
<span class="go">/b                    frame        (shape-&gt;[30,4])                                                              </span>
<span class="go">/df1_mixed            frame_table  (typ-&gt;appendable,nrows-&gt;30,ncols-&gt;11,indexers-&gt;[index])                      </span>
<span class="go">/foo/bar              wide         (shape-&gt;[3,30,4])                                                            </span>
<span class="go">/p1_mixed             wide_table   (typ-&gt;appendable,nrows-&gt;120,ncols-&gt;9,indexers-&gt;[major_axis,minor_axis])      </span>
<span class="go">/p4d_mixed            wide_table   (typ-&gt;appendable,nrows-&gt;360,ncols-&gt;9,indexers-&gt;[items,major_axis,minor_axis])</span>

<span class="gp">In [456]: </span><span class="n">new_store</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="performance">
<h3>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">tables</span></code> format come with a writing performance penalty as compared to
<code class="docutils literal"><span class="pre">fixed</span></code> stores. The benefit is the ability to append/delete and
query (potentially very large amounts of data).  Write times are
generally longer as compared with regular stores. Query times can
be quite fast, especially on an indexed axis.</li>
<li>You can pass <code class="docutils literal"><span class="pre">chunksize=&lt;int&gt;</span></code> to <code class="docutils literal"><span class="pre">append</span></code>, specifying the
write chunksize (default is 50000). This will significantly lower
your memory usage on writing.</li>
<li>You can pass <code class="docutils literal"><span class="pre">expectedrows=&lt;int&gt;</span></code> to the first <code class="docutils literal"><span class="pre">append</span></code>,
to set the TOTAL number of expected rows that <code class="docutils literal"><span class="pre">PyTables</span></code> will
expected. This will optimize read/write performance.</li>
<li>Duplicate rows can be written to tables, but are filtered out in
selection (with the last items being selected; thus a table is
unique on major, minor pairs)</li>
<li>A <code class="docutils literal"><span class="pre">PerformanceWarning</span></code> will be raised if you are attempting to
store types that will be pickled by PyTables (rather than stored as
endemic types). See
<a class="reference external" href="http://stackoverflow.com/questions/14355151/how-to-make-pandas-hdfstore-put-operation-faster/14370190#14370190">Here</a>
for more information and some solutions.</li>
</ul>
</div>
<div class="section" id="experimental">
<h3>Experimental<a class="headerlink" href="#experimental" title="Permalink to this headline">¶</a></h3>
<p>HDFStore supports <code class="docutils literal"><span class="pre">Panel4D</span></code> storage.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [457]: </span><span class="n">p4d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Panel4D</span><span class="p">({</span> <span class="s1">&#39;l1&#39;</span> <span class="p">:</span> <span class="n">wp</span> <span class="p">})</span>

<span class="gp">In [458]: </span><span class="n">p4d</span>
<span class="gr">Out[458]: </span>
<span class="go">&lt;class &#39;pandas.core.panelnd.Panel4D&#39;&gt;</span>
<span class="go">Dimensions: 1 (labels) x 2 (items) x 5 (major_axis) x 4 (minor_axis)</span>
<span class="go">Labels axis: l1 to l1</span>
<span class="go">Items axis: Item1 to Item2</span>
<span class="go">Major_axis axis: 2000-01-01 00:00:00 to 2000-01-05 00:00:00</span>
<span class="go">Minor_axis axis: A to D</span>

<span class="gp">In [459]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;p4d&#39;</span><span class="p">,</span> <span class="n">p4d</span><span class="p">)</span>

<span class="gp">In [460]: </span><span class="n">store</span>
<span class="gr">Out[460]: </span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df                     frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])                         </span>
<span class="go">/df1_mt                 frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;2,indexers-&gt;[index],dc-&gt;[A,B])               </span>
<span class="go">/df2_mt                 frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;5,indexers-&gt;[index])                         </span>
<span class="go">/df_coord               frame_table  (typ-&gt;appendable,nrows-&gt;1000,ncols-&gt;2,indexers-&gt;[index])                      </span>
<span class="go">/df_dc                  frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[B,C,string,string2])</span>
<span class="go">/df_mask                frame_table  (typ-&gt;appendable,nrows-&gt;1000,ncols-&gt;2,indexers-&gt;[index])                      </span>
<span class="go">/df_mi                  frame_table  (typ-&gt;appendable_multi,nrows-&gt;10,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[bar,foo])    </span>
<span class="go">/df_mixed               frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;7,indexers-&gt;[index])                         </span>
<span class="go">/dfeq                   frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;1,indexers-&gt;[index],dc-&gt;[number])           </span>
<span class="go">/dfq                    frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;4,indexers-&gt;[index],dc-&gt;[A,B,C,D])          </span>
<span class="go">/dfs                    frame_table  (typ-&gt;appendable,nrows-&gt;5,ncols-&gt;2,indexers-&gt;[index])                         </span>
<span class="go">/dfs2                   frame_table  (typ-&gt;appendable,nrows-&gt;5,ncols-&gt;2,indexers-&gt;[index],dc-&gt;[A])                 </span>
<span class="go">/dfss                   frame_table  (typ-&gt;appendable,nrows-&gt;3,ncols-&gt;1,indexers-&gt;[index])                         </span>
<span class="go">/dfss2                  frame_table  (typ-&gt;appendable,nrows-&gt;3,ncols-&gt;1,indexers-&gt;[index])                         </span>
<span class="go">/dftd                   frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;3,indexers-&gt;[index],dc-&gt;[A,B,C])            </span>
<span class="go">/foo/bar/bah            frame        (shape-&gt;[8,3])                                                                </span>
<span class="go">/p4d                    wide_table   (typ-&gt;appendable,nrows-&gt;40,ncols-&gt;1,indexers-&gt;[items,major_axis,minor_axis])  </span>
<span class="go">/wp                     wide_table   (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;2,indexers-&gt;[major_axis,minor_axis])         </span>
</pre></div>
</div>
<p>These, by default, index the three axes <code class="docutils literal"><span class="pre">items,</span> <span class="pre">major_axis,</span>
<span class="pre">minor_axis</span></code>. On an <code class="docutils literal"><span class="pre">AppendableTable</span></code> it is possible to setup with the
first append a different indexing scheme, depending on how you want to
store your data. Pass the <code class="docutils literal"><span class="pre">axes</span></code> keyword with a list of dimensions
(currently must by exactly 1 less than the total dimensions of the
object). This cannot be changed after table creation.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [461]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;p4d2&#39;</span><span class="p">,</span> <span class="n">p4d</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">,</span> <span class="s1">&#39;major_axis&#39;</span><span class="p">,</span> <span class="s1">&#39;minor_axis&#39;</span><span class="p">])</span>

<span class="gp">In [462]: </span><span class="n">store</span>
<span class="gr">Out[462]: </span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df                     frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])                         </span>
<span class="go">/df1_mt                 frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;2,indexers-&gt;[index],dc-&gt;[A,B])               </span>
<span class="go">/df2_mt                 frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;5,indexers-&gt;[index])                         </span>
<span class="go">/df_coord               frame_table  (typ-&gt;appendable,nrows-&gt;1000,ncols-&gt;2,indexers-&gt;[index])                      </span>
<span class="go">/df_dc                  frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[B,C,string,string2])</span>
<span class="go">/df_mask                frame_table  (typ-&gt;appendable,nrows-&gt;1000,ncols-&gt;2,indexers-&gt;[index])                      </span>
<span class="go">/df_mi                  frame_table  (typ-&gt;appendable_multi,nrows-&gt;10,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[bar,foo])    </span>
<span class="go">/df_mixed               frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;7,indexers-&gt;[index])                         </span>
<span class="go">/dfeq                   frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;1,indexers-&gt;[index],dc-&gt;[number])           </span>
<span class="go">/dfq                    frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;4,indexers-&gt;[index],dc-&gt;[A,B,C,D])          </span>
<span class="go">/dfs                    frame_table  (typ-&gt;appendable,nrows-&gt;5,ncols-&gt;2,indexers-&gt;[index])                         </span>
<span class="go">/dfs2                   frame_table  (typ-&gt;appendable,nrows-&gt;5,ncols-&gt;2,indexers-&gt;[index],dc-&gt;[A])                 </span>
<span class="go">/dfss                   frame_table  (typ-&gt;appendable,nrows-&gt;3,ncols-&gt;1,indexers-&gt;[index])                         </span>
<span class="go">/dfss2                  frame_table  (typ-&gt;appendable,nrows-&gt;3,ncols-&gt;1,indexers-&gt;[index])                         </span>
<span class="go">/dftd                   frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;3,indexers-&gt;[index],dc-&gt;[A,B,C])            </span>
<span class="go">/foo/bar/bah            frame        (shape-&gt;[8,3])                                                                </span>
<span class="go">/p4d                    wide_table   (typ-&gt;appendable,nrows-&gt;40,ncols-&gt;1,indexers-&gt;[items,major_axis,minor_axis])  </span>
<span class="go">/p4d2                   wide_table   (typ-&gt;appendable,nrows-&gt;20,ncols-&gt;2,indexers-&gt;[labels,major_axis,minor_axis]) </span>
<span class="go">/wp                     wide_table   (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;2,indexers-&gt;[major_axis,minor_axis])         </span>

<span class="gp">In [463]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;p4d2&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="n">pd</span><span class="o">.</span><span class="n">Term</span><span class="p">(</span><span class="s1">&#39;labels=l1&#39;</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Term</span><span class="p">(</span><span class="s1">&#39;items=Item1&#39;</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Term</span><span class="p">(</span><span class="s1">&#39;minor_axis=A_big_strings&#39;</span><span class="p">)</span> <span class="p">])</span>
<span class="gr">Out[463]: </span>
<span class="go">&lt;class &#39;pandas.core.panelnd.Panel4D&#39;&gt;</span>
<span class="go">Dimensions: 0 (labels) x 1 (items) x 0 (major_axis) x 0 (minor_axis)</span>
<span class="go">Labels axis: None</span>
<span class="go">Items axis: Item1 to Item1</span>
<span class="go">Major_axis axis: None</span>
<span class="go">Minor_axis axis: None</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="sql-queries">
<span id="io-sql"></span><h2>SQL Queries<a class="headerlink" href="#sql-queries" title="Permalink to this headline">¶</a></h2>
<p>The <code class="xref py py-mod docutils literal"><span class="pre">pandas.io.sql</span></code> module provides a collection of query wrappers to both
facilitate data retrieval and to reduce dependency on DB-specific API. Database abstraction
is provided by SQLAlchemy if installed. In addition you will need a driver library for
your database. Examples of such drivers are <a class="reference external" href="http://initd.org/psycopg/">psycopg2</a>
for PostgreSQL or <a class="reference external" href="https://github.com/PyMySQL/PyMySQL">pymysql</a> for MySQL.
For <a class="reference external" href="https://docs.python.org/3.5/library/sqlite3.html">SQLite</a> this is
included in Python&#8217;s standard library by default.
You can find an overview of supported drivers for each SQL dialect in the
<a class="reference external" href="http://docs.sqlalchemy.org/en/latest/dialects/index.html">SQLAlchemy docs</a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.14.0.</span></p>
</div>
<p>If SQLAlchemy is not installed, a fallback is only provided for sqlite (and
for mysql for backwards compatibility, but this is deprecated and will be
removed in a future version).
This mode requires a Python database adapter which respect the <a class="reference external" href="http://www.python.org/dev/peps/pep-0249/">Python
DB-API</a>.</p>
<p>See also some <a class="reference internal" href="cookbook.html#cookbook-sql"><span class="std std-ref">cookbook examples</span></a> for some advanced strategies.</p>
<p>The key functions are:</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/pandas.read_sql_table.html#pandas.read_sql_table" title="pandas.read_sql_table"><code class="xref py py-obj docutils literal"><span class="pre">read_sql_table</span></code></a>(table_name,&nbsp;con[,&nbsp;schema,&nbsp;...])</td>
<td>Read SQL database table into a DataFrame.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/pandas.read_sql_query.html#pandas.read_sql_query" title="pandas.read_sql_query"><code class="xref py py-obj docutils literal"><span class="pre">read_sql_query</span></code></a>(sql,&nbsp;con[,&nbsp;index_col,&nbsp;...])</td>
<td>Read SQL query into a DataFrame.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/pandas.read_sql.html#pandas.read_sql" title="pandas.read_sql"><code class="xref py py-obj docutils literal"><span class="pre">read_sql</span></code></a>(sql,&nbsp;con[,&nbsp;index_col,&nbsp;...])</td>
<td>Read SQL query or database table into a DataFrame.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-obj docutils literal"><span class="pre">DataFrame.to_sql</span></code></a>(name,&nbsp;con[,&nbsp;flavor,&nbsp;...])</td>
<td>Write records stored in a DataFrame to a SQL database.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The function <a class="reference internal" href="generated/pandas.read_sql.html#pandas.read_sql" title="pandas.read_sql"><code class="xref py py-func docutils literal"><span class="pre">read_sql()</span></code></a> is a convenience wrapper around
<a class="reference internal" href="generated/pandas.read_sql_table.html#pandas.read_sql_table" title="pandas.read_sql_table"><code class="xref py py-func docutils literal"><span class="pre">read_sql_table()</span></code></a> and <a class="reference internal" href="generated/pandas.read_sql_query.html#pandas.read_sql_query" title="pandas.read_sql_query"><code class="xref py py-func docutils literal"><span class="pre">read_sql_query()</span></code></a> (and for
backward compatibility) and will delegate to specific function depending on
the provided input (database table name or sql query).
Table names do not need to be quoted if they have special characters.</p>
</div>
<p>In the following example, we use the <a class="reference external" href="http://www.sqlite.org/">SQlite</a> SQL database
engine. You can use a temporary SQLite database where data are stored in
&#8220;memory&#8221;.</p>
<p>To connect with SQLAlchemy you use the <code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code> function to create an engine
object from database URI. You only need to create the engine once per database you are
connecting to.
For more information on <code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code> and the URI formatting, see the examples
below and the SQLAlchemy <a class="reference external" href="http://docs.sqlalchemy.org/en/latest/core/engines.html">documentation</a></p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [464]: </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="c"># Create your engine.</span>
<span class="gp">In [465]: </span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///:memory:&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to manage your own connections you can pass one of those instead:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">,</span> <span class="n">conn</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="writing-dataframes">
<h3>Writing DataFrames<a class="headerlink" href="#writing-dataframes" title="Permalink to this headline">¶</a></h3>
<p>Assuming the following data is in a DataFrame <code class="docutils literal"><span class="pre">data</span></code>, we can insert it into
the database using <a class="reference internal" href="generated/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-func docutils literal"><span class="pre">to_sql()</span></code></a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="32%" />
<col width="18%" />
<col width="18%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">id</th>
<th class="head">Date</th>
<th class="head">Col_1</th>
<th class="head">Col_2</th>
<th class="head">Col_3</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>26</td>
<td>2012-10-18</td>
<td>X</td>
<td>25.7</td>
<td>True</td>
</tr>
<tr class="row-odd"><td>42</td>
<td>2012-10-19</td>
<td>Y</td>
<td>-12.4</td>
<td>False</td>
</tr>
<tr class="row-even"><td>63</td>
<td>2012-10-20</td>
<td>Z</td>
<td>5.73</td>
<td>True</td>
</tr>
</tbody>
</table>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [466]: </span><span class="n">data</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</pre></div>
</div>
<p>With some databases, writing large DataFrames can result in errors due to
packet size limitations being exceeded. This can be avoided by setting the
<code class="docutils literal"><span class="pre">chunksize</span></code> parameter when calling <code class="docutils literal"><span class="pre">to_sql</span></code>.  For example, the following
writes <code class="docutils literal"><span class="pre">data</span></code> to the database in batches of 1000 rows at a time:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [467]: </span><span class="n">data</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;data_chunked&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="sql-data-types">
<h4>SQL data types<a class="headerlink" href="#sql-data-types" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="generated/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-func docutils literal"><span class="pre">to_sql()</span></code></a> will try to map your data to an appropriate
SQL data type based on the dtype of the data. When you have columns of dtype
<code class="docutils literal"><span class="pre">object</span></code>, pandas will try to infer the data type.</p>
<p>You can always override the default type by specifying the desired SQL type of
any of the columns by using the <code class="docutils literal"><span class="pre">dtype</span></code> argument. This argument needs a
dictionary mapping column names to SQLAlchemy types (or strings for the sqlite3
fallback mode).
For example, specifying to use the sqlalchemy <code class="docutils literal"><span class="pre">String</span></code> type instead of the
default <code class="docutils literal"><span class="pre">Text</span></code> type for string columns:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [468]: </span><span class="kn">from</span> <span class="nn">sqlalchemy.types</span> <span class="kn">import</span> <span class="n">String</span>

<span class="gp">In [469]: </span><span class="n">data</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;data_dtype&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Col_1&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">})</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Due to the limited support for timedelta&#8217;s in the different database
flavors, columns with type <code class="docutils literal"><span class="pre">timedelta64</span></code> will be written as integer
values as nanoseconds to the database and a warning will be raised.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Columns of <code class="docutils literal"><span class="pre">category</span></code> dtype will be converted to the dense representation
as you would get with <code class="docutils literal"><span class="pre">np.asarray(categorical)</span></code> (e.g. for string categories
this gives an array of strings).
Because of this, reading the database table back in does <strong>not</strong> generate
a categorical.</p>
</div>
</div>
</div>
<div class="section" id="reading-tables">
<h3>Reading Tables<a class="headerlink" href="#reading-tables" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="generated/pandas.read_sql_table.html#pandas.read_sql_table" title="pandas.read_sql_table"><code class="xref py py-func docutils literal"><span class="pre">read_sql_table()</span></code></a> will read a database table given the
table name and optionally a subset of columns to read.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use <a class="reference internal" href="generated/pandas.read_sql_table.html#pandas.read_sql_table" title="pandas.read_sql_table"><code class="xref py py-func docutils literal"><span class="pre">read_sql_table()</span></code></a>, you <strong>must</strong> have the
SQLAlchemy optional dependency installed.</p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [470]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
<span class="gr">Out[470]: </span>
<span class="go">   index  id       Date Col_1  Col_2  Col_3</span>
<span class="go">0      0  26 2010-10-18     X  27.50   True</span>
<span class="go">1      1  42 2010-10-19     Y -12.50  False</span>
<span class="go">2      2  63 2010-10-20     Z   5.73   True</span>
</pre></div>
</div>
<p>You can also specify the name of the column as the DataFrame index,
and specify a subset of columns to be read.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [471]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
<span class="gr">Out[471]: </span>
<span class="go">    index       Date Col_1  Col_2  Col_3</span>
<span class="go">id                                      </span>
<span class="go">26      0 2010-10-18     X  27.50   True</span>
<span class="go">42      1 2010-10-19     Y -12.50  False</span>
<span class="go">63      2 2010-10-20     Z   5.73   True</span>

<span class="gp">In [472]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Col_1&#39;</span><span class="p">,</span> <span class="s1">&#39;Col_2&#39;</span><span class="p">])</span>
<span class="gr">Out[472]: </span>
<span class="go">  Col_1  Col_2</span>
<span class="go">0     X  27.50</span>
<span class="go">1     Y -12.50</span>
<span class="go">2     Z   5.73</span>
</pre></div>
</div>
<p>And you can explicitly force columns to be parsed as dates:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [473]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">])</span>
<span class="gr">Out[473]: </span>
<span class="go">   index  id       Date Col_1  Col_2  Col_3</span>
<span class="go">0      0  26 2010-10-18     X  27.50   True</span>
<span class="go">1      1  42 2010-10-19     Y -12.50  False</span>
<span class="go">2      2  63 2010-10-20     Z   5.73   True</span>
</pre></div>
</div>
<p>If needed you can explicitly specify a format string, or a dict of arguments
to pass to <a class="reference internal" href="generated/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal"><span class="pre">pandas.to_datetime()</span></code></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Date&#39;</span><span class="p">:</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">})</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Date&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">}})</span>
</pre></div>
</div>
<p>You can check if a table exists using <code class="xref py py-func docutils literal"><span class="pre">has_table()</span></code></p>
</div>
<div class="section" id="schema-support">
<h3>Schema support<a class="headerlink" href="#schema-support" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.15.0.</span></p>
</div>
<p>Reading from and writing to different schema&#8217;s is supported through the <code class="docutils literal"><span class="pre">schema</span></code>
keyword in the <a class="reference internal" href="generated/pandas.read_sql_table.html#pandas.read_sql_table" title="pandas.read_sql_table"><code class="xref py py-func docutils literal"><span class="pre">read_sql_table()</span></code></a> and <a class="reference internal" href="generated/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-func docutils literal"><span class="pre">to_sql()</span></code></a>
functions. Note however that this depends on the database flavor (sqlite does not
have schema&#8217;s). For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="s1">&#39;other_schema&#39;</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="s1">&#39;other_schema&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>Querying<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>You can query using raw SQL in the <a class="reference internal" href="generated/pandas.read_sql_query.html#pandas.read_sql_query" title="pandas.read_sql_query"><code class="xref py py-func docutils literal"><span class="pre">read_sql_query()</span></code></a> function.
In this case you must use the SQL variant appropriate for your database.
When using SQLAlchemy, you can also pass SQLAlchemy Expression language constructs,
which are database-agnostic.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [474]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM data&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
<span class="gr">Out[474]: </span>
<span class="go">   index  id                        Date Col_1  Col_2  Col_3</span>
<span class="go">0      0  26  2010-10-18 00:00:00.000000     X  27.50      1</span>
<span class="go">1      1  42  2010-10-19 00:00:00.000000     Y -12.50      0</span>
<span class="go">2      2  63  2010-10-20 00:00:00.000000     Z   5.73      1</span>
</pre></div>
</div>
<p>Of course, you can specify a more &#8220;complex&#8221; query.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [475]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT id, Col_1, Col_2 FROM data WHERE id = 42;&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
<span class="gr">Out[475]: </span>
<span class="go">   id Col_1  Col_2</span>
<span class="go">0  42     Y  -12.5</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="generated/pandas.read_sql_query.html#pandas.read_sql_query" title="pandas.read_sql_query"><code class="xref py py-func docutils literal"><span class="pre">read_sql_query()</span></code></a> function supports a <code class="docutils literal"><span class="pre">chunksize</span></code> argument.
Specifying this will return an iterator through chunks of the query result:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [476]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">))</span>

<span class="gp">In [477]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;data_chunks&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [478]: </span><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM data_chunks&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">   .....:</span>     <span class="k">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
<span class="gp">   .....:</span> 
<span class="go">          a         b         c</span>
<span class="go">0  0.280665 -0.073113  1.160339</span>
<span class="go">1  0.369493  1.904659  1.111057</span>
<span class="go">2  0.659050 -1.627438  0.602319</span>
<span class="go">3  0.420282  0.810952  1.044442</span>
<span class="go">4 -0.400878  0.824006 -0.562305</span>
<span class="go">          a         b         c</span>
<span class="go">0  1.954878 -1.331952 -1.760689</span>
<span class="go">1 -1.650721 -0.890556 -1.119115</span>
<span class="go">2  1.956079 -0.326499 -1.342676</span>
<span class="go">3  1.114383 -0.586524 -1.236853</span>
<span class="go">4  0.875839  0.623362 -0.434957</span>
<span class="go">          a         b         c</span>
<span class="go">0  1.407540  0.129102  1.616950</span>
<span class="go">1  0.502741  1.558806  0.109403</span>
<span class="go">2 -1.219744  2.449369 -0.545774</span>
<span class="go">3 -0.198838 -0.700399 -0.203394</span>
<span class="go">4  0.242669  0.201830  0.661020</span>
<span class="go">          a         b         c</span>
<span class="go">0  1.792158 -0.120465 -1.233121</span>
<span class="go">1 -1.182318 -0.665755 -1.674196</span>
<span class="go">2  0.825030 -0.498214 -0.310985</span>
<span class="go">3 -0.001891 -1.396620 -0.861316</span>
<span class="go">4  0.674712  0.618539 -0.443172</span>
</pre></div>
</div>
<p>You can also run a plain query without creating a dataframe with
<code class="xref py py-func docutils literal"><span class="pre">execute()</span></code>. This is useful for queries that don&#8217;t return values,
such as INSERT. This is functionally equivalent to calling <code class="docutils literal"><span class="pre">execute</span></code> on the
SQLAlchemy engine or db connection object. Again, you must use the SQL syntax
variant appropriate for your database.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pandas.io</span> <span class="kn">import</span> <span class="n">sql</span>
<span class="n">sql</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM table_name&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
<span class="n">sql</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;INSERT INTO table_name VALUES(?, ?, ?)&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">12.2</span><span class="p">,</span> <span class="bp">True</span><span class="p">)])</span>
</pre></div>
</div>
</div>
<div class="section" id="engine-connection-examples">
<h3>Engine connection examples<a class="headerlink" href="#engine-connection-examples" title="Permalink to this headline">¶</a></h3>
<p>To connect with SQLAlchemy you use the <code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code> function to create an engine
object from database URI. You only need to create the engine once per database you are
connecting to.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;postgresql://scott:tiger@localhost:5432/mydatabase&#39;</span><span class="p">)</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;mysql+mysqldb://scott:tiger@localhost/foo&#39;</span><span class="p">)</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;oracle://scott:tiger@127.0.0.1:1521/sidname&#39;</span><span class="p">)</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;mssql+pyodbc://mydsn&#39;</span><span class="p">)</span>

<span class="c1"># sqlite://&lt;nohostname&gt;/&lt;path&gt;</span>
<span class="c1"># where &lt;path&gt; is relative:</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///foo.db&#39;</span><span class="p">)</span>

<span class="c1"># or absolute, starting with a slash:</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:////absolute/path/to/foo.db&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information see the examples the SQLAlchemy <a class="reference external" href="http://docs.sqlalchemy.org/en/latest/core/engines.html">documentation</a></p>
</div>
<div class="section" id="advanced-sqlalchemy-queries">
<h3>Advanced SQLAlchemy queries<a class="headerlink" href="#advanced-sqlalchemy-queries" title="Permalink to this headline">¶</a></h3>
<p>You can use SQLAlchemy constructs to describe your query.</p>
<p>Use <code class="xref py py-func docutils literal"><span class="pre">sqlalchemy.text()</span></code> to specify query parameters in a backend-neutral way</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [479]: </span><span class="kn">import</span> <span class="nn">sqlalchemy</span> <span class="kn">as</span> <span class="nn">sa</span>

<span class="gp">In [480]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">sa</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM data where Col_1=:col1&#39;</span><span class="p">),</span> <span class="n">engine</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span> <span class="s1">&#39;X&#39;</span><span class="p">})</span>
<span class="gr">Out[480]: </span>
<span class="go">   index  id                        Date Col_1  Col_2  Col_3</span>
<span class="go">0      0  26  2010-10-18 00:00:00.000000     X   27.5      1</span>
</pre></div>
</div>
<p>If you have an SQLAlchemy description of your database you can express where conditions using SQLAlchemy expressions</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [481]: </span><span class="n">metadata</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">MetaData</span><span class="p">()</span>

<span class="gp">In [482]: </span><span class="n">data_table</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
<span class="gp">   .....:</span>     <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">Integer</span><span class="p">),</span>
<span class="gp">   .....:</span>     <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">DateTime</span><span class="p">),</span>
<span class="gp">   .....:</span>     <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;Col_1&#39;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">String</span><span class="p">),</span>
<span class="gp">   .....:</span>     <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;Col_2&#39;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">Float</span><span class="p">),</span>
<span class="gp">   .....:</span>     <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;Col_3&#39;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">Boolean</span><span class="p">),</span>
<span class="gp">   .....:</span> <span class="p">)</span>
<span class="gp">   .....:</span> 

<span class="gp">In [483]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">sa</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">data_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">Col_3</span> <span class="o">==</span> <span class="bp">True</span><span class="p">),</span> <span class="n">engine</span><span class="p">)</span>
<span class="gr">Out[483]: </span>
<span class="go">   index       Date Col_1  Col_2 Col_3</span>
<span class="go">0      0 2010-10-18     X  27.50  True</span>
<span class="go">1      2 2010-10-20     Z   5.73  True</span>
</pre></div>
</div>
<p>You can combine SQLAlchemy expressions with parameters passed to <a class="reference internal" href="generated/pandas.read_sql.html#pandas.read_sql" title="pandas.read_sql"><code class="xref py py-func docutils literal"><span class="pre">read_sql()</span></code></a> using <code class="xref py py-func docutils literal"><span class="pre">sqlalchemy.bindparam()</span></code></p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [484]: </span><span class="kn">import</span> <span class="nn">datetime</span> <span class="kn">as</span> <span class="nn">dt</span>

<span class="gp">In [485]: </span><span class="n">expr</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">data_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">Date</span> <span class="o">&gt;</span> <span class="n">sa</span><span class="o">.</span><span class="n">bindparam</span><span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">))</span>

<span class="gp">In [486]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">18</span><span class="p">)})</span>
<span class="gr">Out[486]: </span>
<span class="go">   index       Date Col_1  Col_2  Col_3</span>
<span class="go">0      1 2010-10-19     Y -12.50  False</span>
<span class="go">1      2 2010-10-20     Z   5.73   True</span>
</pre></div>
</div>
</div>
<div class="section" id="sqlite-fallback">
<h3>Sqlite fallback<a class="headerlink" href="#sqlite-fallback" title="Permalink to this headline">¶</a></h3>
<p>The use of sqlite is supported without using SQLAlchemy.
This mode requires a Python database adapter which respect the <a class="reference external" href="http://www.python.org/dev/peps/pep-0249/">Python
DB-API</a>.</p>
<p>You can create connections like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="n">con</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;:memory:&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>And then issue the following queries:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">cnx</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM data&quot;</span><span class="p">,</span> <span class="n">con</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="google-bigquery-experimental">
<span id="io-bigquery"></span><h2>Google BigQuery (Experimental)<a class="headerlink" href="#google-bigquery-experimental" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.13.0.</span></p>
</div>
<p>The <code class="xref py py-mod docutils literal"><span class="pre">pandas.io.gbq</span></code> module provides a wrapper for Google&#8217;s BigQuery
analytics web service to simplify retrieving results from BigQuery tables
using SQL-like queries. Result sets are parsed into a pandas
DataFrame with a shape and data types derived from the source table.
Additionally, DataFrames can be inserted into new BigQuery tables or appended
to existing tables.</p>
<p>You will need to install some additional dependencies:</p>
<ul class="simple">
<li>Google&#8217;s <a class="reference external" href="https://github.com/google/python-gflags/">python-gflags</a></li>
<li><a class="reference external" href="http://pypi.python.org/pypi/httplib2">httplib2</a></li>
<li><a class="reference external" href="http://github.com/google/google-api-python-client">google-api-python-client</a></li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">To use this module, you will need a valid BigQuery account. Refer to the
<a class="reference external" href="https://cloud.google.com/bigquery/what-is-bigquery">BigQuery Documentation</a> for details on the service itself.</p>
</div>
<p>The key functions are:</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/pandas.io.gbq.read_gbq.html#pandas.io.gbq.read_gbq" title="pandas.io.gbq.read_gbq"><code class="xref py py-obj docutils literal"><span class="pre">read_gbq</span></code></a>(query[,&nbsp;project_id,&nbsp;index_col,&nbsp;...])</td>
<td>Load data from Google BigQuery.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/pandas.io.gbq.to_gbq.html#pandas.io.gbq.to_gbq" title="pandas.io.gbq.to_gbq"><code class="xref py py-obj docutils literal"><span class="pre">to_gbq</span></code></a>(dataframe,&nbsp;destination_table,&nbsp;project_id)</td>
<td>Write a DataFrame to a Google BigQuery table.</td>
</tr>
</tbody>
</table>
<div class="section" id="authentication">
<span id="io-bigquery-authentication"></span><span id="io-bigquery-reader"></span><h3>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.18.0.</span></p>
</div>
<p>Authentication to the Google <code class="docutils literal"><span class="pre">BigQuery</span></code> service is via <code class="docutils literal"><span class="pre">OAuth</span> <span class="pre">2.0</span></code>.
Is possible to authenticate with either user account credentials or service account credentials.</p>
<p>Authenticating with user account credentials is as simple as following the prompts in a browser window
which will be automatically opened for you. You will be authenticated to the specified
<code class="docutils literal"><span class="pre">BigQuery</span></code> account using the product name <code class="docutils literal"><span class="pre">pandas</span> <span class="pre">GBQ</span></code>. It is only possible on local host.
The remote authentication using user account credentials is not currently supported in Pandas.
Additional information on the authentication mechanism can be found
<a class="reference external" href="https://developers.google.com/identity/protocols/OAuth2#clientside/">here</a>.</p>
<p>Authentication with service account credentials is possible via the <cite>&#8216;private_key&#8217;</cite> parameter. This method
is particularly useful when working on remote servers (eg. jupyter iPython notebook on remote host).
Additional information on service accounts can be found
<a class="reference external" href="https://developers.google.com/identity/protocols/OAuth2#serviceaccount">here</a>.</p>
<p>You will need to install an additional dependency: <a class="reference external" href="https://github.com/google/oauth2client">oauth2client</a>.</p>
<p>Authentication via <code class="docutils literal"><span class="pre">application</span> <span class="pre">default</span> <span class="pre">credentials</span></code> is also possible. This is only valid
if the parameter <code class="docutils literal"><span class="pre">private_key</span></code> is not provided. This method also requires that
the credentials can be fetched from the environment the code is running in.
Otherwise, the OAuth2 client-side authentication is used.
Additional information on
<a class="reference external" href="https://developers.google.com/identity/protocols/application-default-credentials">application default credentials</a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.19.0.</span></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <cite>&#8216;private_key&#8217;</cite> parameter can be set to either the file path of the service account key
in JSON format, or key contents of the service account key in JSON format.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A private key can be obtained from the Google developers console by clicking
<a class="reference external" href="https://console.developers.google.com/permissions/serviceaccounts">here</a>. Use JSON key type.</p>
</div>
</div>
<div class="section" id="id4">
<h3>Querying<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Suppose you want to load all data from an existing BigQuery table : <cite>test_dataset.test_table</cite>
into a DataFrame using the <a class="reference internal" href="generated/pandas.io.gbq.read_gbq.html#pandas.io.gbq.read_gbq" title="pandas.io.gbq.read_gbq"><code class="xref py py-func docutils literal"><span class="pre">read_gbq()</span></code></a> function.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Insert your BigQuery Project ID Here</span>
<span class="c1"># Can be found in the Google web console</span>
<span class="n">projectid</span> <span class="o">=</span> <span class="s2">&quot;xxxxxxxx&quot;</span>

<span class="n">data_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_gbq</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM test_dataset.test_table&#39;</span><span class="p">,</span> <span class="n">projectid</span><span class="p">)</span>
</pre></div>
</div>
<p>You can define which column from BigQuery to use as an index in the
destination DataFrame as well as a preferred column order as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">data_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_gbq</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM test_dataset.test_table&#39;</span><span class="p">,</span>
                          <span class="n">index_col</span><span class="o">=</span><span class="s1">&#39;index_column_name&#39;</span><span class="p">,</span>
                          <span class="n">col_order</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">,</span> <span class="s1">&#39;col3&#39;</span><span class="p">],</span> <span class="n">projectid</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can find your project id in the <a class="reference external" href="https://console.developers.google.com">Google developers console</a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can toggle the verbose output via the <code class="docutils literal"><span class="pre">verbose</span></code> flag which defaults to <code class="docutils literal"><span class="pre">True</span></code>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">dialect</span></code> argument can be used to indicate whether to use BigQuery&#8217;s <code class="docutils literal"><span class="pre">'legacy'</span></code> SQL
or BigQuery&#8217;s <code class="docutils literal"><span class="pre">'standard'</span></code> SQL (beta). The default value is <code class="docutils literal"><span class="pre">'legacy'</span></code>. For more information
on BigQuery&#8217;s standard SQL, see <a class="reference external" href="https://cloud.google.com/bigquery/sql-reference/">BigQuery SQL Reference</a></p>
</div>
</div>
<div class="section" id="io-bigquery-writer">
<span id="id5"></span><h3>Writing DataFrames<a class="headerlink" href="#io-bigquery-writer" title="Permalink to this headline">¶</a></h3>
<p>Assume we want to write a DataFrame <code class="docutils literal"><span class="pre">df</span></code> into a BigQuery table using <a class="reference internal" href="generated/pandas.DataFrame.to_gbq.html#pandas.DataFrame.to_gbq" title="pandas.DataFrame.to_gbq"><code class="xref py py-func docutils literal"><span class="pre">to_gbq()</span></code></a>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [487]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;my_string&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">),</span>
<span class="gp">   .....:</span>                    <span class="s1">&#39;my_int64&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">   .....:</span>                    <span class="s1">&#39;my_float64&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">),</span>
<span class="gp">   .....:</span>                    <span class="s1">&#39;my_bool1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">   .....:</span>                    <span class="s1">&#39;my_bool2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">   .....:</span>                    <span class="s1">&#39;my_dates&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;now&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">)})</span>
<span class="gp">   .....:</span> 

<span class="gp">In [488]: </span><span class="n">df</span>
<span class="gr">Out[488]: </span>
<span class="go">  my_bool1 my_bool2                   my_dates  my_float64  my_int64 my_string</span>
<span class="go">0     True    False 2016-12-24 18:33:33.411047         4.0         1         a</span>
<span class="go">1    False     True 2016-12-25 18:33:33.411047         5.0         2         b</span>
<span class="go">2     True    False 2016-12-26 18:33:33.411047         6.0         3         c</span>

<span class="gp">In [489]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gr">Out[489]: </span>
<span class="go">my_bool1                bool</span>
<span class="go">my_bool2                bool</span>
<span class="go">my_dates      datetime64[ns]</span>
<span class="go">my_float64           float64</span>
<span class="go">my_int64               int64</span>
<span class="go">my_string             object</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">to_gbq</span><span class="p">(</span><span class="s1">&#39;my_dataset.my_table&#39;</span><span class="p">,</span> <span class="n">projectid</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The destination table and destination dataset will automatically be created if they do not already exist.</p>
</div>
<p>The <code class="docutils literal"><span class="pre">if_exists</span></code> argument can be used to dictate whether to <code class="docutils literal"><span class="pre">'fail'</span></code>, <code class="docutils literal"><span class="pre">'replace'</span></code>
or <code class="docutils literal"><span class="pre">'append'</span></code> if the destination table already exists. The default value is <code class="docutils literal"><span class="pre">'fail'</span></code>.</p>
<p>For example, assume that <code class="docutils literal"><span class="pre">if_exists</span></code> is set to <code class="docutils literal"><span class="pre">'fail'</span></code>. The following snippet will raise
a <code class="docutils literal"><span class="pre">TableCreationError</span></code> if the destination table already exists.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">to_gbq</span><span class="p">(</span><span class="s1">&#39;my_dataset.my_table&#39;</span><span class="p">,</span> <span class="n">projectid</span><span class="p">,</span> <span class="n">if_exists</span><span class="o">=</span><span class="s1">&#39;fail&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the <code class="docutils literal"><span class="pre">if_exists</span></code> argument is set to <code class="docutils literal"><span class="pre">'append'</span></code>, the destination dataframe will
be written to the table using the defined table schema and column types. The
dataframe must match the destination table in structure and data types.
If the <code class="docutils literal"><span class="pre">if_exists</span></code> argument is set to <code class="docutils literal"><span class="pre">'replace'</span></code>, and the existing table has a
different schema, a delay of 2 minutes will be forced to ensure that the new schema
has propagated in the Google environment. See
<a class="reference external" href="https://code.google.com/p/google-bigquery/issues/detail?id=191">Google BigQuery issue 191</a>.</p>
</div>
<p>Writing large DataFrames can result in errors due to size limitations being exceeded.
This can be avoided by setting the <code class="docutils literal"><span class="pre">chunksize</span></code> argument when calling <a class="reference internal" href="generated/pandas.DataFrame.to_gbq.html#pandas.DataFrame.to_gbq" title="pandas.DataFrame.to_gbq"><code class="xref py py-func docutils literal"><span class="pre">to_gbq()</span></code></a>.
For example, the following writes <code class="docutils literal"><span class="pre">df</span></code> to a BigQuery table in batches of 10000 rows at a time:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">to_gbq</span><span class="p">(</span><span class="s1">&#39;my_dataset.my_table&#39;</span><span class="p">,</span> <span class="n">projectid</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also see the progress of your post via the <code class="docutils literal"><span class="pre">verbose</span></code> flag which defaults to <code class="docutils literal"><span class="pre">True</span></code>.
For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">to_gbq</span><span class="p">(</span><span class="s1">&#39;my_dataset.my_table&#39;</span><span class="p">,</span> <span class="n">projectid</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">Streaming</span> <span class="n">Insert</span> <span class="ow">is</span> <span class="mi">10</span><span class="o">%</span> <span class="n">Complete</span>
        <span class="n">Streaming</span> <span class="n">Insert</span> <span class="ow">is</span> <span class="mi">20</span><span class="o">%</span> <span class="n">Complete</span>
        <span class="n">Streaming</span> <span class="n">Insert</span> <span class="ow">is</span> <span class="mi">30</span><span class="o">%</span> <span class="n">Complete</span>
        <span class="n">Streaming</span> <span class="n">Insert</span> <span class="ow">is</span> <span class="mi">40</span><span class="o">%</span> <span class="n">Complete</span>
        <span class="n">Streaming</span> <span class="n">Insert</span> <span class="ow">is</span> <span class="mi">50</span><span class="o">%</span> <span class="n">Complete</span>
        <span class="n">Streaming</span> <span class="n">Insert</span> <span class="ow">is</span> <span class="mi">60</span><span class="o">%</span> <span class="n">Complete</span>
        <span class="n">Streaming</span> <span class="n">Insert</span> <span class="ow">is</span> <span class="mi">70</span><span class="o">%</span> <span class="n">Complete</span>
        <span class="n">Streaming</span> <span class="n">Insert</span> <span class="ow">is</span> <span class="mi">80</span><span class="o">%</span> <span class="n">Complete</span>
        <span class="n">Streaming</span> <span class="n">Insert</span> <span class="ow">is</span> <span class="mi">90</span><span class="o">%</span> <span class="n">Complete</span>
        <span class="n">Streaming</span> <span class="n">Insert</span> <span class="ow">is</span> <span class="mi">100</span><span class="o">%</span> <span class="n">Complete</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If an error occurs while streaming data to BigQuery, see
<a class="reference external" href="https://cloud.google.com/bigquery/troubleshooting-errors">Troubleshooting BigQuery Errors</a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The BigQuery SQL query language has some oddities, see the
<a class="reference external" href="https://cloud.google.com/bigquery/query-reference">BigQuery Query Reference Documentation</a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While BigQuery uses SQL-like syntax, it has some important differences from traditional
databases both in functionality, API limitations (size and quantity of queries or uploads),
and how Google charges for use of the service. You should refer to <a class="reference external" href="https://cloud.google.com/bigquery/what-is-bigquery">Google BigQuery documentation</a>
often as the service seems to be changing and evolving. BiqQuery is best for analyzing large
sets of data quickly, but it is not a direct replacement for a transactional database.</p>
</div>
</div>
<div class="section" id="creating-bigquery-tables">
<h3>Creating BigQuery Tables<a class="headerlink" href="#creating-bigquery-tables" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">As of 0.17, the function <code class="xref py py-func docutils literal"><span class="pre">generate_bq_schema()</span></code> has been deprecated and will be
removed in a future version.</p>
</div>
<p>As of 0.15.2, the gbq module has a function <code class="xref py py-func docutils literal"><span class="pre">generate_bq_schema()</span></code> which will
produce the dictionary representation schema of the specified pandas DataFrame.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [10]: </span><span class="n">gbq</span><span class="o">.</span><span class="n">generate_bq_schema</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">default_type</span><span class="o">=</span><span class="s1">&#39;STRING&#39;</span><span class="p">)</span>

<span class="gr">Out[10]: </span><span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;my_bool1&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;BOOLEAN&#39;</span><span class="p">},</span>
<span class="go">         {&#39;name&#39;: &#39;my_bool2&#39;, &#39;type&#39;: &#39;BOOLEAN&#39;},</span>
<span class="go">         {&#39;name&#39;: &#39;my_dates&#39;, &#39;type&#39;: &#39;TIMESTAMP&#39;},</span>
<span class="go">         {&#39;name&#39;: &#39;my_float64&#39;, &#39;type&#39;: &#39;FLOAT&#39;},</span>
<span class="go">         {&#39;name&#39;: &#39;my_int64&#39;, &#39;type&#39;: &#39;INTEGER&#39;},</span>
<span class="go">         {&#39;name&#39;: &#39;my_string&#39;, &#39;type&#39;: &#39;STRING&#39;}]}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you delete and re-create a BigQuery table with the same name, but different table schema,
you must wait 2 minutes before streaming data into the table. As a workaround, consider creating
the new table with a different name. Refer to
<a class="reference external" href="https://code.google.com/p/google-bigquery/issues/detail?id=191">Google BigQuery issue 191</a>.</p>
</div>
</div>
</div>
<div class="section" id="stata-format">
<span id="io-stata"></span><h2>Stata Format<a class="headerlink" href="#stata-format" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.12.0.</span></p>
</div>
<div class="section" id="writing-to-stata-format">
<span id="io-stata-writer"></span><h3>Writing to Stata format<a class="headerlink" href="#writing-to-stata-format" title="Permalink to this headline">¶</a></h3>
<p>The method <code class="xref py py-func docutils literal"><span class="pre">to_stata()</span></code> will write a DataFrame
into a .dta file. The format version of this file is always 115 (Stata 12).</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [490]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;AB&#39;</span><span class="p">))</span>

<span class="gp">In [491]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_stata</span><span class="p">(</span><span class="s1">&#39;stata.dta&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Stata</em> data files have limited data type support; only strings with
244 or fewer characters, <code class="docutils literal"><span class="pre">int8</span></code>, <code class="docutils literal"><span class="pre">int16</span></code>, <code class="docutils literal"><span class="pre">int32</span></code>, <code class="docutils literal"><span class="pre">float32</span></code>
and <code class="docutils literal"><span class="pre">float64</span></code> can be stored in <code class="docutils literal"><span class="pre">.dta</span></code> files.  Additionally,
<em>Stata</em> reserves certain values to represent missing data. Exporting a
non-missing value that is outside of the permitted range in Stata for
a particular data type will retype the variable to the next larger
size.  For example, <code class="docutils literal"><span class="pre">int8</span></code> values are restricted to lie between -127
and 100 in Stata, and so variables with values above 100 will trigger
a conversion to <code class="docutils literal"><span class="pre">int16</span></code>. <code class="docutils literal"><span class="pre">nan</span></code> values in floating points data
types are stored as the basic missing data type (<code class="docutils literal"><span class="pre">.</span></code> in <em>Stata</em>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is not possible to export missing data values for integer data types.</p>
</div>
<p>The <em>Stata</em> writer gracefully handles other data types including <code class="docutils literal"><span class="pre">int64</span></code>,
<code class="docutils literal"><span class="pre">bool</span></code>, <code class="docutils literal"><span class="pre">uint8</span></code>, <code class="docutils literal"><span class="pre">uint16</span></code>, <code class="docutils literal"><span class="pre">uint32</span></code> by casting to
the smallest supported type that can represent the data.  For example, data
with a type of <code class="docutils literal"><span class="pre">uint8</span></code> will be cast to <code class="docutils literal"><span class="pre">int8</span></code> if all values are less than
100 (the upper bound for non-missing <code class="docutils literal"><span class="pre">int8</span></code> data in <em>Stata</em>), or, if values are
outside of this range, the variable is cast to <code class="docutils literal"><span class="pre">int16</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Conversion from <code class="docutils literal"><span class="pre">int64</span></code> to <code class="docutils literal"><span class="pre">float64</span></code> may result in a loss of precision
if <code class="docutils literal"><span class="pre">int64</span></code> values are larger than 2**53.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><code class="xref py py-class docutils literal"><span class="pre">StataWriter</span></code> and
<code class="xref py py-func docutils literal"><span class="pre">to_stata()</span></code> only support fixed width
strings containing up to 244 characters, a limitation imposed by the version
115 dta file format. Attempting to write <em>Stata</em> dta files with strings
longer than 244 characters raises a <code class="docutils literal"><span class="pre">ValueError</span></code>.</p>
</div>
</div>
<div class="section" id="reading-from-stata-format">
<span id="io-stata-reader"></span><h3>Reading from Stata format<a class="headerlink" href="#reading-from-stata-format" title="Permalink to this headline">¶</a></h3>
<p>The top-level function <code class="docutils literal"><span class="pre">read_stata</span></code> will read a dta file and return
either a DataFrame or a <code class="xref py py-class docutils literal"><span class="pre">StataReader</span></code> that can
be used to read the file incrementally.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [492]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s1">&#39;stata.dta&#39;</span><span class="p">)</span>
<span class="gr">Out[492]: </span>
<span class="go">   index         A         B</span>
<span class="go">0      0  1.810535 -1.305727</span>
<span class="go">1      1 -0.344987 -0.230840</span>
<span class="go">2      2 -2.793085  1.937529</span>
<span class="go">3      3  0.366332 -1.044589</span>
<span class="go">4      4  2.051173  0.585662</span>
<span class="go">5      5  0.429526 -0.606998</span>
<span class="go">6      6  0.106223 -1.525680</span>
<span class="go">7      7  0.795026 -0.374438</span>
<span class="go">8      8  0.134048  1.202055</span>
<span class="go">9      9  0.284748  0.262467</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.16.0.</span></p>
</div>
<p>Specifying a <code class="docutils literal"><span class="pre">chunksize</span></code> yields a
<code class="xref py py-class docutils literal"><span class="pre">StataReader</span></code> instance that can be used to
read <code class="docutils literal"><span class="pre">chunksize</span></code> lines from the file at a time.  The <code class="docutils literal"><span class="pre">StataReader</span></code>
object can be used as an iterator.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [493]: </span><span class="n">reader</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s1">&#39;stata.dta&#39;</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="gp">In [494]: </span><span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
<span class="gp">   .....:</span>     <span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="gp">   .....:</span> 
<span class="go">(3, 3)</span>
<span class="go">(3, 3)</span>
<span class="go">(3, 3)</span>
<span class="go">(1, 3)</span>
</pre></div>
</div>
<p>For more fine-grained control, use <code class="docutils literal"><span class="pre">iterator=True</span></code> and specify
<code class="docutils literal"><span class="pre">chunksize</span></code> with each call to
<code class="xref py py-func docutils literal"><span class="pre">read()</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [495]: </span><span class="n">reader</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s1">&#39;stata.dta&#39;</span><span class="p">,</span> <span class="n">iterator</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [496]: </span><span class="n">chunk1</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="gp">In [497]: </span><span class="n">chunk2</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>Currently the <code class="docutils literal"><span class="pre">index</span></code> is retrieved as a column.</p>
<p>The parameter <code class="docutils literal"><span class="pre">convert_categoricals</span></code> indicates whether value labels should be
read and used to create a <code class="docutils literal"><span class="pre">Categorical</span></code> variable from them. Value labels can
also be retrieved by the function <code class="docutils literal"><span class="pre">value_labels</span></code>, which requires <code class="xref py py-func docutils literal"><span class="pre">read()</span></code>
to be called before use.</p>
<p>The parameter <code class="docutils literal"><span class="pre">convert_missing</span></code> indicates whether missing value
representations in Stata should be preserved.  If <code class="docutils literal"><span class="pre">False</span></code> (the default),
missing values are represented as <code class="docutils literal"><span class="pre">np.nan</span></code>.  If <code class="docutils literal"><span class="pre">True</span></code>, missing values are
represented using <code class="docutils literal"><span class="pre">StataMissingValue</span></code> objects, and columns containing missing
values will have <code class="docutils literal"><span class="pre">object</span></code> data type.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="generated/pandas.read_stata.html#pandas.read_stata" title="pandas.read_stata"><code class="xref py py-func docutils literal"><span class="pre">read_stata()</span></code></a> and
<code class="xref py py-class docutils literal"><span class="pre">StataReader</span></code> support .dta formats 113-115
(Stata 10-12), 117 (Stata 13), and 118 (Stata 14).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Setting <code class="docutils literal"><span class="pre">preserve_dtypes=False</span></code> will upcast to the standard pandas data types:
<code class="docutils literal"><span class="pre">int64</span></code> for all integer types and <code class="docutils literal"><span class="pre">float64</span></code> for floating point data.  By default,
the Stata data types are preserved when importing.</p>
</div>
<div class="section" id="io-stata-categorical">
<span id="id6"></span><h4>Categorical Data<a class="headerlink" href="#io-stata-categorical" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.15.2.</span></p>
</div>
<p><code class="docutils literal"><span class="pre">Categorical</span></code> data can be exported to <em>Stata</em> data files as value labeled data.
The exported data consists of the underlying category codes as integer data values
and the categories as value labels.  <em>Stata</em> does not have an explicit equivalent
to a <code class="docutils literal"><span class="pre">Categorical</span></code> and information about <em>whether</em> the variable is ordered
is lost when exporting.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><em>Stata</em> only supports string value labels, and so <code class="docutils literal"><span class="pre">str</span></code> is called on the
categories when exporting data.  Exporting <code class="docutils literal"><span class="pre">Categorical</span></code> variables with
non-string categories produces a warning, and can result a loss of
information if the <code class="docutils literal"><span class="pre">str</span></code> representations of the categories are not unique.</p>
</div>
<p>Labeled data can similarly be imported from <em>Stata</em> data files as <code class="docutils literal"><span class="pre">Categorical</span></code>
variables using the keyword argument <code class="docutils literal"><span class="pre">convert_categoricals</span></code> (<code class="docutils literal"><span class="pre">True</span></code> by default).
The keyword argument <code class="docutils literal"><span class="pre">order_categoricals</span></code> (<code class="docutils literal"><span class="pre">True</span></code> by default) determines
whether imported <code class="docutils literal"><span class="pre">Categorical</span></code> variables are ordered.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When importing categorical data, the values of the variables in the <em>Stata</em>
data file are not preserved since <code class="docutils literal"><span class="pre">Categorical</span></code> variables always
use integer data types between <code class="docutils literal"><span class="pre">-1</span></code> and <code class="docutils literal"><span class="pre">n-1</span></code> where <code class="docutils literal"><span class="pre">n</span></code> is the number
of categories. If the original values in the <em>Stata</em> data file are required,
these can be imported by setting <code class="docutils literal"><span class="pre">convert_categoricals=False</span></code>, which will
import original data (but not the variable labels). The original values can
be matched to the imported categorical data since there is a simple mapping
between the original <em>Stata</em> data values and the category codes of imported
Categorical variables: missing values are assigned code <code class="docutils literal"><span class="pre">-1</span></code>, and the
smallest original value is assigned <code class="docutils literal"><span class="pre">0</span></code>, the second smallest is assigned
<code class="docutils literal"><span class="pre">1</span></code> and so on until the largest original value is assigned the code <code class="docutils literal"><span class="pre">n-1</span></code>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>Stata</em> supports partially labeled series.  These series have value labels for
some but not all data values. Importing a partially labeled series will produce
a <code class="docutils literal"><span class="pre">Categorical</span></code> with string categories for the values that are labeled and
numeric categories for values with no label.</p>
</div>
</div>
</div>
</div>
<div class="section" id="sas-formats">
<span id="io-sas-reader"></span><span id="io-sas"></span><h2>SAS Formats<a class="headerlink" href="#sas-formats" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.17.0.</span></p>
</div>
<p>The top-level function <a class="reference internal" href="generated/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal"><span class="pre">read_sas()</span></code></a> can read (but not write) SAS
<cite>xport</cite> (.XPT) and <cite>SAS7BDAT</cite> (.sas7bdat) format files were added in <em>v0.18.0</em>.</p>
<p>SAS files only contain two value types: ASCII text and floating point
values (usually 8 bytes but sometimes truncated).  For xport files,
there is no automatic type conversion to integers, dates, or
categoricals.  For SAS7BDAT files, the format codes may allow date
variables to be automatically converted to dates.  By default the
whole file is read and returned as a <code class="docutils literal"><span class="pre">DataFrame</span></code>.</p>
<p>Specify a <code class="docutils literal"><span class="pre">chunksize</span></code> or use <code class="docutils literal"><span class="pre">iterator=True</span></code> to obtain reader
objects (<code class="docutils literal"><span class="pre">XportReader</span></code> or <code class="docutils literal"><span class="pre">SAS7BDATReader</span></code>) for incrementally
reading the file.  The reader objects also have attributes that
contain additional information about the file and its variables.</p>
<p>Read a SAS7BDAT file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sas</span><span class="p">(</span><span class="s1">&#39;sas_data.sas7bdat&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Obtain an iterator and read an XPORT file 100,000 lines at a time:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">rdr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sas</span><span class="p">(</span><span class="s1">&#39;sas_xport.xpt&#39;</span><span class="p">,</span> <span class="n">chunk</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">rdr</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference external" href="https://support.sas.com/techsup/technote/ts140.pdf">specification</a> for the xport file format is available from the SAS
web site.</p>
<p>No official documentation is available for the SAS7BDAT format.</p>
</div>
<div class="section" id="other-file-formats">
<span id="io-other"></span><h2>Other file formats<a class="headerlink" href="#other-file-formats" title="Permalink to this headline">¶</a></h2>
<p>pandas itself only supports IO with a limited set of file formats that map
cleanly to its tabular data model. For reading and writing other file formats
into and from pandas, we recommend these packages from the broader community.</p>
<div class="section" id="netcdf">
<h3>netCDF<a class="headerlink" href="#netcdf" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://xarray.pydata.org/">xarray</a> provides data structures inspired by the pandas DataFrame for working
with multi-dimensional datasets, with a focus on the netCDF file format and
easy conversion to and from pandas.</p>
</div>
</div>
<div class="section" id="performance-considerations">
<span id="io-perf"></span><h2>Performance Considerations<a class="headerlink" href="#performance-considerations" title="Permalink to this headline">¶</a></h2>
<p>This is an informal comparison of various IO methods, using pandas 0.13.1.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000000</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;AB&#39;</span><span class="p">))</span>

<span class="gp">In [2]: </span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
<span class="go">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="go">Int64Index: 1000000 entries, 0 to 999999</span>
<span class="go">Data columns (total 2 columns):</span>
<span class="go">A    1000000 non-null float64</span>
<span class="go">B    1000000 non-null float64</span>
<span class="go">dtypes: float64(2)</span>
<span class="go">memory usage: 22.9 MB</span>
</pre></div>
</div>
<p>Writing</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="o">%</span><span class="n">timeit</span> <span class="n">test_sql_write</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">1 loops, best of 3: 6.24 s per loop</span>

<span class="gp">In [15]: </span><span class="o">%</span><span class="n">timeit</span> <span class="n">test_hdf_fixed_write</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">1 loops, best of 3: 237 ms per loop</span>

<span class="gp">In [26]: </span><span class="o">%</span><span class="n">timeit</span> <span class="n">test_hdf_fixed_write_compress</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">1 loops, best of 3: 245 ms per loop</span>

<span class="gp">In [16]: </span><span class="o">%</span><span class="n">timeit</span> <span class="n">test_hdf_table_write</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">1 loops, best of 3: 901 ms per loop</span>

<span class="gp">In [27]: </span><span class="o">%</span><span class="n">timeit</span> <span class="n">test_hdf_table_write_compress</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">1 loops, best of 3: 952 ms per loop</span>

<span class="gp">In [17]: </span><span class="o">%</span><span class="n">timeit</span> <span class="n">test_csv_write</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">1 loops, best of 3: 3.44 s per loop</span>
</pre></div>
</div>
<p>Reading</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="o">%</span><span class="n">timeit</span> <span class="n">test_sql_read</span><span class="p">()</span>
<span class="go">1 loops, best of 3: 766 ms per loop</span>

<span class="gp">In [19]: </span><span class="o">%</span><span class="n">timeit</span> <span class="n">test_hdf_fixed_read</span><span class="p">()</span>
<span class="go">10 loops, best of 3: 19.1 ms per loop</span>

<span class="gp">In [28]: </span><span class="o">%</span><span class="n">timeit</span> <span class="n">test_hdf_fixed_read_compress</span><span class="p">()</span>
<span class="go">10 loops, best of 3: 36.3 ms per loop</span>

<span class="gp">In [20]: </span><span class="o">%</span><span class="n">timeit</span> <span class="n">test_hdf_table_read</span><span class="p">()</span>
<span class="go">10 loops, best of 3: 39 ms per loop</span>

<span class="gp">In [29]: </span><span class="o">%</span><span class="n">timeit</span> <span class="n">test_hdf_table_read_compress</span><span class="p">()</span>
<span class="go">10 loops, best of 3: 60.6 ms per loop</span>

<span class="gp">In [22]: </span><span class="o">%</span><span class="n">timeit</span> <span class="n">test_csv_read</span><span class="p">()</span>
<span class="go">1 loops, best of 3: 620 ms per loop</span>
</pre></div>
</div>
<p>Space on disk (in bytes)</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>25843712 Apr  8 14:11 test.sql
24007368 Apr  8 14:11 test_fixed.hdf
15580682 Apr  8 14:11 test_fixed_compress.hdf
24458444 Apr  8 14:11 test_table.hdf
16797283 Apr  8 14:11 test_table_compress.hdf
46152810 Apr  8 14:11 test.csv
</pre></div>
</div>
<p>And here&#8217;s the code</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">pandas.io</span> <span class="kn">import</span> <span class="n">sql</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000000</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;AB&#39;</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">test_sql_write</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;test.sql&#39;</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;test.sql&#39;</span><span class="p">)</span>
    <span class="n">sql_db</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;test.sql&#39;</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;test_table&#39;</span><span class="p">,</span> <span class="n">con</span><span class="o">=</span><span class="n">sql_db</span><span class="p">)</span>
    <span class="n">sql_db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">test_sql_read</span><span class="p">():</span>
    <span class="n">sql_db</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;test.sql&#39;</span><span class="p">)</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;select * from test_table&quot;</span><span class="p">,</span> <span class="n">sql_db</span><span class="p">)</span>
    <span class="n">sql_db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">test_hdf_fixed_write</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">&#39;test_fixed.hdf&#39;</span><span class="p">,</span><span class="s1">&#39;test&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_hdf_fixed_read</span><span class="p">():</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;test_fixed.hdf&#39;</span><span class="p">,</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_hdf_fixed_write_compress</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">&#39;test_fixed_compress.hdf&#39;</span><span class="p">,</span><span class="s1">&#39;test&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">complib</span><span class="o">=</span><span class="s1">&#39;blosc&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_hdf_fixed_read_compress</span><span class="p">():</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;test_fixed_compress.hdf&#39;</span><span class="p">,</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_hdf_table_write</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">&#39;test_table.hdf&#39;</span><span class="p">,</span><span class="s1">&#39;test&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">format</span><span class="o">=</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_hdf_table_read</span><span class="p">():</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;test_table.hdf&#39;</span><span class="p">,</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_hdf_table_write_compress</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">&#39;test_table_compress.hdf&#39;</span><span class="p">,</span><span class="s1">&#39;test&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">complib</span><span class="o">=</span><span class="s1">&#39;blosc&#39;</span><span class="p">,</span><span class="n">format</span><span class="o">=</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_hdf_table_read_compress</span><span class="p">():</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;test_table_compress.hdf&#39;</span><span class="p">,</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_csv_write</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;test.csv&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_csv_read</span><span class="p">():</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;test.csv&#39;</span><span class="p">,</span><span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


                    </div>
                </div>
            </div>

            
            <div class="clearer"></div>
        </div>
    </div>
</div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="generated/pandas.read_sql_table.html" title="pandas.read_sql_table"
             >next</a> |</li>
        <li class="right" >
          <a href="style.html" title="Style"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pandas 0.19.2 documentation</a> &#187;</li> 
      </ul>
    </div>
<style type="text/css">
    .scrollToTop {
        text-align: center;
        font-weight: bold;
        position: fixed;
        bottom: 60px;
        right: 40px;
        display: none;
    }
</style>
<a href="#" class="scrollToTop">Scroll To Top</a>
<script type="text/javascript">
$(document).ready(function() {
    //Check to see if the window is top if not then display button
    $(window).scroll(function() {
        if ($(this).scrollTop() > 200) {
            $('.scrollToTop').fadeIn();
        } else {
            $('.scrollToTop').fadeOut();
        }
    });

    //Click event to scroll to top
    $('.scrollToTop').click(function() {
        $('html, body').animate({
            scrollTop: 0
        }, 500);
        return false;
    });
});
</script>

  </body>
</html>