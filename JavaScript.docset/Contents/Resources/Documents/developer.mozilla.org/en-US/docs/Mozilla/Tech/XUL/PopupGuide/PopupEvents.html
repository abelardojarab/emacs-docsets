<html><!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/PopupGuide/PopupEvents by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Jan 2017 21:38:19 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <script async="" src="../../../../../../../www.google-analytics.com/analytics.js"></script><script>(function(d) { d.className = d.className.replace(/\bno-js/, ''); })(document.documentElement);</script>
  
    
  

  
  <title>PopupEvents</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="index, follow">
    <link rel="home" href="https://developer.mozilla.org/en-US/">
    <link rel="copyright" href="#copyright">
  

  
    
    
    <link href="../../../../../../../developer.cdn.mozilla.net/static/build/styles/mdn.102019a5db43.css" rel="stylesheet" type="text/css">

    
  
    <link href="../../../../../../../developer.cdn.mozilla.net/static/build/styles/wiki.d9818563511b.css" rel="stylesheet" type="text/css">

    

    <!-- common social tags -->
    
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://developer.cdn.mozilla.net/static/img/opengraph-logo.dc4e08e2f6af.png">
    <meta property="og:site_name" content="Mozilla Developer Network">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://developer.cdn.mozilla.net/static/img/opengraph-logo.dc4e08e2f6af.png">
    <meta name="twitter:site" content="@MozDevNet">
    <meta name="twitter:creator" content="@MozDevNet">
    <link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/en-US/search/xml" title="Mozilla Developer Network">
  

  <!-- third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../../../../developer.cdn.mozilla.net/static/img/favicon144.a6e4162070f4.png">
  <!-- iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../../../../developer.cdn.mozilla.net/static/img/favicon114.0e9fabd44f85.png">
  <!-- first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../../../../developer.cdn.mozilla.net/static/img/favicon72.8ff9d87c82a0.png">
  <!-- non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="../../../../../../../developer.cdn.mozilla.net/static/img/favicon57.a2490b9a2d76.png">
  <!-- basic favicon -->
  
    
  
  <link rel="shortcut icon" href="../../../../../../../developer.cdn.mozilla.net/static/img/favicon32.e02854fdcf73.png">
  <!--[if IE]>
  <meta http-equiv="imagetoolbar" content="no">
  <script type="text/javascript" src="https://developer.cdn.mozilla.net/static/build/js/html5shiv.3948ccddab6f.js" charset="utf-8"></script>
  <![endif]-->

  
  <link rel="alternate" type="application/json" href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/PopupGuide/PopupEvents$json">
  <link rel="canonical" href="PopupEvents.html">

  
    
      <link rel="alternate" hreflang="ja" href="https://developer.mozilla.org/ja/docs/XUL/PopupGuide/PopupEvents" title="PopupEvents">
    
  

  <!-- document-specific social tags -->
  <meta property="og:title" content="PopupEvents">
  <meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/PopupGuide/PopupEvents">
  <meta name="twitter:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/PopupGuide/PopupEvents">
  <meta name="twitter:title" content="PopupEvents">
  
  <meta property="og:description" content="There are several events related to popups and menus.">
  <meta name="description" content="There are several events related to popups and menus.">
  <meta name="twitter:description" content="There are several events related to popups and menus.">
  

  
  <script type="text/javascript">
    
      var document_saved = 0;
    
  </script>

  
    



  
</head>
<body data-slug="Mozilla/Tech/XUL/PopupGuide/PopupEvents" contextmenu="edit-history-menu" data-search-url="" class="document  ">

  <script type="text/javascript">
    (function(win) {
        'use strict';

        
            (function(){
  var FLAGS = {
    'compat_api': false,'kumaediting': false,'page_move': false,'registration_disabled': false,'search_suggestions': false,'section_edit': false,'sg_task_completion': false,'spam_admin_override': false,'spam_checks_enabled': true,'spam_spammer_override': false,'spam_submissions_enabled': false,'spam_testing_mode': false,'wiki_samples': true,'wiki_spam_exempted': false,'wiki_spam_training': false
    },
    SWITCHES = {
    'wiki_error_on_delete': false,'wiki_force_immediate_rendering': false,'enable_optimizely': false,'welcome_email': true,'application_ACAO': true,'store_revision_ips': true,'dumb_doc_urls': true,'newsletter': true,'newsletter_article': true,'foundation_callout': true
    },
    SAMPLES = {
    
    };
  window.waffle = {
    "flag_is_active": function waffle_flag(flag_name) {
      
      return !!FLAGS[flag_name];
    },
    "switch_is_active": function waffle_switch(switch_name) {
      
      return !!SWITCHES[switch_name];
    },
    "sample_is_active": function waffle_sample(sample_name) {
      
      return !!SAMPLES[sample_name];
    },
    "FLAGS": FLAGS,
    "SWITCHES": SWITCHES,
    "SAMPLES": SAMPLES
  };
})();

        

        // This needs to be set before ckeditor.js loads
        window.CKEDITOR_BASEPATH = 'https://developer.mozilla.org/static/js/libs/ckeditor/build/ckeditor/';

        // This represents the site configuration
        win.mdn = {
            // Properties and settings for CKEditor will go here
            ckeditor: {},
            // Feature test results and methods will be placed here
            features: {},
            // The path to static assets (images, CSS, JS) in MDN
            staticPath: 'https://developer.cdn.mozilla.net/static/',
            // Optimizely API
            optimizely: win['optimizely'] || [],
            // Site notifications
            
            notifications: [],
            
            // Wiki-specific settings will be placed here
            wiki: {
                autosuggestTitleUrl: '/en-US/docs/get-documents'
            },
            // Assets that need to be dynamically injected
            assets_disabled: {
                css: {
                    'editor-content': ['https://developer.cdn.mozilla.net/static/build/styles/editor-content.e79881a73508.css',],
                    'wiki-compat-tables': ['https://developer.cdn.mozilla.net/static/build/styles/wiki-compat-tables.a042fac0d66c.css',]
                },
                js: {
                    'syntax-prism': ['https://developer.cdn.mozilla.net/static/build/js/syntax-prism.7a66ddfa68bf.js',],
                    'wiki-compat-tables': ['https://developer.cdn.mozilla.net/static/build/js/wiki-compat-tables.14ce5dcb2c3d.js',]
                }
            }
        };
    })(this);
</script>

  

  <ul id="nav-access">
    <li><a href="#document-main" id="skip-main">Skip to main content</a></li>
    <li><a id="skip-language" href="#language">Select language</a></li>
    <li><a href="#q" id="skip-search">Skip to search</a></li>
  </ul>

  <!-- Header -->
  <header id="main-header"><div class="center">

    <div id="tabzilla">
        <a href="http://www.mozilla.org/" class="no-track">mozilla</a>
    </div>

    <div class="clear header-clear"></div>

    <a href="https://developer.mozilla.org/en-US/" class="logo">Mozilla Developer Network</a>

    <div id="nav-sec">
        
                  <ul>
                  <li><div class="login">
    
      
       <a href="https://developer.mozilla.org/users/github/login/?next=%2Fen-US%2Fdocs%2FMozilla%2FTech%2FXUL%2FPopupGuide%2FPopupEvents" class="login-link js-login-link" data-service="GitHub">
        Sign in
        <i class="icon-github" aria-hidden="true"></i>
      </a>
    
</div></li>
                </ul>
        
    </div>

    <nav id="main-nav" role="navigation"><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web">Web Technologies<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu submenu-cols-2 js-submenu" id="nav-platform-submenu">
          <div class="submenu-column">
            <div class="title">Technologies</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Graphics">Graphics</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP">HTTP</a></li>
              <li><a href="../../../../Web/API.html">APIs / DOM</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions">WebExtensions</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/MathML">MathML</a></li>
            </ul>
          </div><div class="submenu-column last">
            <div class="title">References &amp; Guides</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Learn">Learning web development</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Tutorials">Tutorials</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Reference">References</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide">Developer Guides</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility">Accessibility</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games">Game development</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web">...more docs</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Zones">Mozilla Docs<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu js-submenu" id="nav-zones-submenu">
          <div class="submenu-column">
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons">Add-ons</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox">Firefox</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Tools">Developer Tools</a></li><li><a href="https://developer.mozilla.org/en-US/docs/MDN/Feedback">Feedback<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu js-submenu" id="nav-contact-submenu">
          <div class="submenu-column">
            <ul>
                <li><a href="https://support.mozilla.org/">Get Firefox help<i aria-hidden="true" class="icon-external-link"></i></a></li>
                <li><a href="http://stackoverflow.com/">Get web development help<i aria-hidden="true" class="icon-external-link"></i></a></li>
            </ul>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/MDN/Community">Join the MDN community</a></li>
              <li><a target="_blank" href="https://bugzilla.mozilla.org/form.doc?bug_file_loc=https%3A//developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/PopupGuide/PopupEvents">Report a content problem<i aria-hidden="true" class="icon-external-link"></i></a></li>
              <li><a target="_blank" href="https://bugzilla.mozilla.org/form.mdn">Report a bug<i aria-hidden="true" class="icon-external-link"></i></a></li>
            </ul>
          </div>
        </div>

      </li><li class="nav-search-link"><a href="https://developer.mozilla.org/en-US/search" title="Search"><i aria-hidden="true" class="icon-search"></i></a></li><li class="main-nav-search"><form action="https://developer.mozilla.org/en-US/search" method="get" role="search">
        <div class="search-wrap">
          <label for="main-q" class="offscreen">Search</label>
          <input type="search" id="main-q" name="q" placeholder="Search" data-value="" value="">
          <span class="search-trigger"><i aria-hidden="true" class="icon-search"></i></span>&nbsp;
          <button type="submit" class="offscreen">Search</button>
        </div>
      </form></li></ul></nav>
  </div></header>

  <!-- Content will go here -->
  <main id="content"><div class="center clear">
  

   <!-- end is_zone -->

    <div class="wiki-main-content" id="document-main"><div class="center">
      
      <div class="article-meta">
        <!-- action buttons -->
        

  
    
  

  
    
  

  

  <ul class="page-buttons" data-sticky="false">
      
      <li><button id="languages-menu" class="transparent" aria-haspopup="true" aria-owns="languages-menu-submenu" aria-expanded="false"><span>Languages</span><i aria-hidden="true" class="icon-language"></i></button>

        <div class="submenu js-submenu" id="languages-menu-submenu">
          <div class="submenu-column">
            <ul id="translations">
              
                
                
                
                  <li><bdi><a rel="internal" href="https://developer.mozilla.org/ja/docs/XUL/PopupGuide/PopupEvents" title="Japanese">日本語 (ja)</a></bdi></li>
                
              

              
                <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/PopupGuide/PopupEvents$locales" rel="nofollow, noindex" id="translations-add">Add a translation</a></li>
              
            </ul>
          </div>
        </div>
      </li>

      
      <li class="page-buttons-edit"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/PopupGuide/PopupEvents$edit" class="button" data-optimizely-hook="button-edit-doc" id="edit-button">Edit<i aria-hidden="true" class="icon-pencil"></i></a></li>
      

        

        <li><button id="advanced-menu" class="only-icon" aria-haspopup="true" aria-owns="advanced-menu-submenu" aria-expanded="false"><span>Advanced</span><i aria-hidden="true" class="icon-cog"></i></button>
        <div class="submenu js-submenu" id="advanced-menu-submenu">
          <!-- this page -->
          <div class="submenu-column">
            <div class="title">Advanced</div>
            <ul>
                <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/PopupGuide/PopupEvents$history" rel="nofollow, noindex">History</a></li>
                
                
                

                

                
                
                
                <li class="page-print"><a href="#" onclick="return window.print();">Print this article</a></li>
            </ul>
          </div>
        </div>
  </li></ul>

        <!-- crumbs -->
        
  <nav class="crumbs" role="navigation"><ol xmlns:v="http://rdf.data-vocabulary.org/#" aria-label="breadcrumbs">
    <li typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US" rel="v:url" property="v:title">MDN</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla" rel="v:url" property="v:title">Mozilla</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech" rel="v:url" property="v:title">Mozilla technologies</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL" rel="v:url" property="v:title">XUL</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/PopupGuide" rel="v:url" property="v:title">Popup Guide</a></li>
    
    <li class="crumb" typeof="v:Breadcrumb" property="v:title">PopupEvents</li>
  </ol></nav>
      </div>

      <!-- heading -->
      <div id="wiki-document-head" class="document-head">
          <span class="from-search-previous-box">
            <a class="button from-search-previous only-icon disabled" title="Previous Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-left"></i></a>
          </span>
          <span class="from-search-navigate-wrap">
            <a href="#" class="from-search-navigate"><span class="from-search-navigate-up"><i aria-hidden="true" class="icon-double-angle-up"></i></span><span class="from-search-navigate-down"><i aria-hidden="true" class="icon-double-angle-down"></i></span></a>
          </span>
          <div class="from-search-toc submenu">
            <span class="title">Your Search Results</span>
            <ol></ol>
          </div>
          <span class="from-search-next-box">
            <a class="button from-search-next only-icon disabled" title="Next Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-right"></i></a>
          </span>

        
        <div class="contributor-avatars" data-all-text="see all contributors" data-alternate-message="hide contributors">
            <ul>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/Sheppy" title="View profile: Sheppy">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="Sheppy" data-src="../../../../../../../secure.gravatar.com/avatar/945076feb88f2d7003891ffbf06f32bf6c02.jpeg?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">Sheppy</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/ethertank" title="View profile: ethertank">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="ethertank" data-src="../../../../../../../secure.gravatar.com/avatar/abac73ba2093b500bf7599c76d80280c6c02.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">ethertank</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/kiteroa" title="View profile: kiteroa">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="kiteroa" data-src="../../../../../../../secure.gravatar.com/avatar/3b9e623b6fef6384713081da67dbdf296c02.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">kiteroa</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/SylvainPasche" title="View profile: SylvainPasche">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="SylvainPasche" data-src="../../../../../../../i2.wp.com/developer.cdn.mozilla.net/media/img/avatareb45.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">SylvainPasche</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/Enn" title="View profile: Enn">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="Enn" data-src="../../../../../../../i2.wp.com/developer.cdn.mozilla.net/media/img/avatareb45.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">Enn</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/Shoot" title="View profile: Shoot">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="Shoot" data-src="../../../../../../../i2.wp.com/developer.cdn.mozilla.net/media/img/avatareb45.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">Shoot</noscript></a>
                </li>
            
            </ul>
        </div>
        

        <h1>PopupEvents</h1>

      </div>
      

      <!-- start the main content container -->
        <div id="wiki-column-container" class="wiki-right-present wiki-left-closed wiki-left-none">

          <!-- content row with three strips -->
          <div class="column-container column-container-reverse">

            
              <!-- TOC, approvals, etc -->
              <div class="column-strip wiki-column" id="wiki-right">
              
              <!-- table of contents -->
              <div id="toc" class="toc toggleable" data-closed="true">
                <a href="#toc" class="title toggler" data-open-icon="icon-plus" data-closed-icon="icon-minus">In This Article<i></i></a>
                <ol class="toggle-container">
                  <li><ol><li><a href="#Popup_Events" rel="internal">Popup Events</a><ol><li><a href="#The_popupshowing_event" rel="internal">The popupshowing event</a><code></code><code></code><code></code><code></code></li><li><a href="#The_popupshown_event" rel="internal">The popupshown event</a><code></code><code></code><code></code></li><li><a href="#The_popuphiding_event" rel="internal">The popuphiding event</a></li><li><a href="#The_popuphidden_event" rel="internal">The popuphidden event</a></li></ol></li></ol></li>
                </ol>
              </div>
              
              </div>
            

            
            
              
            

            <!-- center: main article content -->
            <div id="wiki-content" class="column-main wiki-column text-content">

              

              

              
                
                
                
              
              

              <!-- just the article content -->
              <article id="wikiArticle">
                
                  
                    <h3 id="Popup_Events" name="Popup_Events">Popup Events</h3>
<p>There are several events related to popups and menus.</p>
<p>An overview of these is listed below:</p>
<table>
  <tbody>
    <tr>
      <td>contextmenu</td>
      <td>This event is fired when a request is made to open a context menu, whether by the keyboard or mouse. This event will be fired even for elements that don't have a context menu associated with them. For more information about how to use this event, see <a href="https://developer.mozilla.org/en/XUL/PopupGuide/ContextMenus#Context_Menu_Events" title="en/XUL/PopupGuide/ContextMenus#Context_Menu_Events">Context Menu Events</a>.</td>
    </tr>
    <tr>
      <td>popupshowing</td>
      <td>This event is fired on a menupopup, panel or tooltip just before it is made visible. This event is most commonly used to add or adjust items on the popup based on the context.</td>
    </tr>
    <tr>
      <td>popupshown</td>
      <td>This event is fired on a menupopup, panel or tooltip once it is visible on screen.</td>
    </tr>
    <tr>
      <td>
        <p>popuphiding</p>
      </td>
      <td>This event is fired on a menupopup, panel or tooltip once it is about to be hidden. This may happen because the user selected an item from the menu, or it may be because the popup was closed by clicking elsewhere.</td>
    </tr>
    <tr>
      <td>popuphidden</td>
      <td>This event is fired on a menupopup, panel or tooltip once it has been hidden.</td>
    </tr>
  </tbody>
</table>
<h4 id="The_popupshowing_event" name="The_popupshowing_event">The popupshowing event</h4>
<p>Just before a popup is about to be displayed, a popupshowing event will fired on the popup. This will occur regardless of how the popup is opened, either from user interaction or from a script calling the <span id="m-openPopup"><code><a href="https://developer.mozilla.org/en-US/docs/XUL/Method/openPopup">openPopup</a></code></span> or <span id="m-openPopupAtScreen"><code><a href="https://developer.mozilla.org/en-US/docs/XUL/Method/openPopupAtScreen">openPopupAtScreen</a></code></span> methods. The typical usage of a listener of the popupshowing event is to adjust the content of the popup based on context. For instance, right clicking on an image might display items on a context menu pertaining to images, whereas clicking on a link would display only those items pertaining to links. Within the listener for the popupshowing event, you can append to or modify the menu as needed before it is displayed. For examples of the use of the popupshowing event when used with context menus, see <a href="https://developer.mozilla.org/en/XUL/PopupGuide/ContextMenus#Hiding_and_Showing_Menu_Items_based_on_Context" title="en/XUL/PopupGuide/ContextMenus#Hiding_and_Showing_Menu_Items_based_on_Context">Hiding and Showing Menu Items based on Context</a>.</p>
<p>However, this technique can be applied to any type of popup. In this example, a label within a panel is initialized with the current time.</p>
<pre>&lt;panel id="time-panel" onpopupshowing="this.lastChild.value = (new Date()).toLocaleFormat('%T')"&gt;
  &lt;label value="Time:"/&gt;
  &lt;label id="time"/&gt;
&lt;/panel&gt;

&lt;toolbarbutton label="Show Time" popup="time-panel"/&gt;
</pre>
<p><img alt="Image:Popupguide-popupshowing.png" class="internal" src="../../../../../../../mdn.mozillademos.org/files/614/Popupguide-popupshowing.png"></p>
<p>You can prevent a menu or popup from appearing by calling the <a href="../../../../../../en/DOM/event-2.html" title="en/DOM/event.preventDefault">preventDefault</a> method of the event from within a popupshowing listener. The default operation of the popupshowing event is to continue showing the popup. The preventDefault method will stop this from happening and the popup will not be opened.</p>
<pre>&lt;menu label="Edit"&gt;
  &lt;menupopup onpopupshowing="if (gDisallowed) event.preventDefault();"&gt;
    &lt;menuitem label="Undo"/&gt;
    &lt;menuitem label="Redo"/&gt;
  &lt;/menupopup&gt;
&lt;/menu&gt;
</pre>
<p>In this example, a global variable <code>gDisallowed</code> is checked and the <a href="../../../../../../en/DOM/event-2.html" title="en/DOM/event.preventDefault">preventDefault</a> method is called. If you want to prevent a context menu from opening it is better to call <code>preventDefault</code> with a handler for the contextmenu event instead, to avoid the extra steps necessary to fire the popupshowing event if it isn't needed.</p>
<p>When using nested submenus, make sure to check in the popupshowing event that the event corresponds to the right popup. This is because the popup events bubble so the parent menu will receieve a popupshowing event whenever it opens, or any submenus open. For example:</p>
<pre>&lt;menu label="File"&gt;
  &lt;menupopup onpopupshowing="if (event.target == this) adjustFileMenu(this);"&gt;
    &lt;menu label="Open"&gt;
      &lt;menupopup&gt;
        &lt;menuitem label="File..."/&gt;
        &lt;menuitem label="Page"/&gt;
      &lt;/menupopup&gt;
    &lt;/menu&gt;
  &lt;/menupopup&gt;
&lt;/menu&gt;
</pre>
<p>The target of the event is examined to ensure that the event is for the desired menupopup. Otherwise, the adjustFileMenu function would be called whenever the outer menupopup is opened and when the inner menupopup is opened. The bubbling of events applies to all popup events.</p>
<h4 id="The_popupshown_event" name="The_popupshown_event">The popupshown event</h4>
<p>The popupshown event is fired once a popup is already visible. When calling either the <span id="m-openPopup"><code><a href="https://developer.mozilla.org/en-US/docs/XUL/Method/openPopup">openPopup</a></code></span> or <span id="m-openPopupAtScreen"><code><a href="https://developer.mozilla.org/en-US/docs/XUL/Method/openPopupAtScreen">openPopupAtScreen</a></code></span> methods, the popup will not actually be open before that method returns. The popupshown event will be fired when the UI is updated and the popup is visible.&nbsp;</p>
<p>One possible use of the popupshown event is to open another menu. This technique, as shown in the following example, is needed if you wish to open a submenu programmatically. This is because you cannot open a submenu directly without first opening the parent menu.</p>
<pre>&lt;script&gt;
function openFileMenu()
{
  var filemenu = document.getElementById("file-menu");
  filemenu.addEventListener("popupshown", fileMenuOpened, false);
  filemenu.open = true;
}

function fileMenuOpened(event)
{
  if (event.target&nbsp;!= document.getElementById("file-menupopup"))
    return;

  var filemenu = document.getElementById("file-menu");
  filemenu.removeEventListener("popupshown", fileMenuOpened, false);

  var openmenu = document.getElementById("open-menu");
  openmenu.open = true;
}

&lt;/script&gt;
&lt;menu id="file-menu" label="File"&gt;
  &lt;menupopup id="file-menupopup"&gt;
    &lt;menu id="open-menu" label="Open"&gt;
      &lt;menupopup&gt;
        &lt;menuitem label="File..."/&gt;
        &lt;menuitem label="Page"/&gt;
      &lt;/menupopup&gt;
    &lt;/menu&gt;
  &lt;/menupopup&gt;
&lt;/menu&gt;

&lt;button label="Open" oncommand="openFileMenu();"/&gt;
</pre>
<p>When the button is pressed, the openFileMenu function is called. Within this function, a popupshown event listener is attached to the 'File' menu using the <a href="../../../../Web/API/EventTarget/addEventListener.html" title="en/DOM/element.addEventListener">addEventListener</a> method. This will cause the fileMenuOpened function to be called when the popupshown event is fired on the 'File' menu.</p>
<p>The fileMenuOpened function first checks that the target of the event is the right popup and returns early if not. Next, the popupshown event listener is removed again. We need to make sure to do this to ensure that the event listener isn't added multiple times. Finally, we use a similar technique as the <code>openFileMenu</code> function to open the 'Open' submenu. The result is a button that opens both the outer menu and the inner menu.</p>
<h4 id="The_popuphiding_event" name="The_popuphiding_event">The popuphiding event</h4>
<p>When a popup is closed, the popuphiding event is fired on the popup just before it is removed from the screen. A listener for the popuphiding event can be used to remove or hide items on the popup again, the reverse of the popupshowing event. The popuphiding event is fired regardless of how the popup was hidden, whether because the user selected an item from a menu, or if the user clicked outside the popup, or if the user pressed Escape to cancel the menu. The popupshowing and popuphiding event will also be fired as the user rolls the mouse around on a menu bar, showing and hiding different menus and submenus.</p>
<p>In this example, the contents of a textbox are cleared whenever a popup is hidden.</p>
<pre>&lt;panel onpopuphiding="document.getElementById('search').value = '';"&gt;
  &lt;textbox id="search"/&gt;
  &lt;button label="Search" oncommand="doSearch();"/&gt;
&lt;/panel&gt;
</pre>
<p>You can prevent a popup from hiding by calling the event's <a href="../../../../../../en/DOM/event-2.html" title="en/DOM/event.preventDefault">preventDefault</a> method. This way, the popup will not be closed. Usually, you should not do this. If you wanted to ensure that a value was entered for instance, it is much better to rework the UI such that the code can handle no value being entered instead. Otherwise, the user will be distracted with a popup that they cannot close.</p>
<p>You also cannot cancel the hiding of a menupopup when a user has made a selection from a menu, as it is already too late to do so. In this situation the command event has already been sent to the selected menuitem and the operation already carried out. This is one special case in which the popuphiding event is fired after the popup has been removed from the screen. The reason for this is if, as is quite common, the menu item's action is to open a modal dialog. Here, the menu would need to be removed first, before the dialog can be opened. Otherwise, the user would have a menu for a parent window that is no longer active. So instead, the popup is removed first. Note that this means that the popuphiding event doesn't fire until after the modal dialog has been closed.</p>
<p>There are situations when the popuphiding event will not fire when a menu is closed so you should make sure not to call any necessary code there. A better way is to just reinitialize the menu or popup in the popupshowing event. One such situation when the hiding events are not sent is when the menu is removed from the document. This is because there is no longer an element to send the events to. Another situation is when the document is being unloaded.</p>
<h4 id="The_popuphidden_event" name="The_popuphidden_event">The popuphidden event</h4>
<p>The popuphidden event is fired after a popup has been closed.</p>
<p>When a chain of menus is opened, that is, when a menu and at least one level of submenus is opened, first the popuphiding event will be fired on the lowest level of submenu. Then that menu will be closed and the popuphidden event will be fired. This process will then repeat for the next highest level of menu until all the menus are closed. This means that when a long chain of submenus is opened, a number of popuphiding and popuphidden events will be fired in sequence. You can tell that the entire chain is closed when the topmost menu receives a popuphidden event.</p>
                  
                
              </article>

              

                <!-- contributors -->
                <div class="wiki-block contributors">
                  <h2 class="offscreen">Document Tags and Contributors</h2>
                  
                  
  <div class="tag-attach-list contributors-sub">
    <i aria-hidden="true" class="icon-tags icon-fw"></i>
    <strong>Tags:</strong>&nbsp;
    <ul class="tags tags-small">
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/XUL">XUL</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/XUL Popup Guide">XUL Popup Guide</a></li>
      
    </ul>
  </div>

                  
                    <div class="contributors-sub">
                      <i aria-hidden="true" class="icon-group icon-fw"></i>&nbsp;<strong>Contributors to this page:</strong> 
        <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/ethertank">ethertank</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/kiteroa">kiteroa</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/SylvainPasche">SylvainPasche</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/Enn">Enn</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/Shoot">Shoot</a>
    
                    </div>
                  

                  
                    <div class="contributors-sub">
                      <i aria-hidden="true" class="icon-clock-o icon-fw"></i>&nbsp;<strong>Last updated by:</strong>
                      <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>,
                      <time datetime="2014-04-14T10:36:16-07:00">Apr 14, 2014, 10:36:16 AM</time>
                    </div>
                  
                </div>
              

              
                  <div class="newsletter-box">
                    <div class="newsletter">
    <form id="newsletterForm" name="newsletter-form" class="nodisable" action="https://www.mozilla.org/en-US/newsletter/" method="post">
        <h2 class="newsletter-teaser">Learn the best of web development</h2>
        <p class="newsletter-description">Sign up for our newsletter:</p>
        <input type="hidden" id="fmt" name="fmt" value="H">
        <input type="hidden" id="newsletterNewslettersInput" name="newsletters" value="app-dev">

        <div id="newsletterErrors" class="newsletter-errors"></div>

        <div id="newsletterEmail" class="form-group">
            <label for="newsletterEmailInput" class="form-label offscreen">E-mail</label>
            <input type="email" id="newsletterEmailInput" name="email" class="form-input newsletter-input-email" required="" placeholder="you@example.com" size="30">
        </div>

        <div id="newsletterPrivacy" class="form-group form-group-agree hidden">
            <input type="checkbox" id="newsletterPrivacyInput" name="privacy" required="">
            <label for="newsletterPrivacyInput">
            I'm okay with Mozilla handling my info as explained in this <a href="https://www.mozilla.org/privacy/">Privacy Policy</a>.
            </label>
        </div>
        <div id="newsletterSubmit">
            <button id="newsletter-submit" type="submit" class="button positive">Sign up now</button>
        </div>
        
    </form>
    <div id="newsletterThanks" class="newsletter-thanks hidden">
        <h2>Thanks! Please check your inbox to confirm your subscription.</h2>
        <p>If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an email from us.
        </p>
    </div>
    <button id="newsletterHide" type="button" class="only-icon newsletter-hide hidden"><span>Hide Newsletter Sign-up</span><i aria-hidden="true" class="icon-times"></i></button>
</div>
                  </div>
              
            </div>

            
          </div>
        </div>
      </div>
    </div> <!-- ends "main-content" -->

  <menu type="context" id="edit-history-menu">
    <menuitem data-action="/en-US/docs/Mozilla/Tech/XUL/PopupGuide/PopupEvents$edit" label="Edit page"></menuitem>
    <menuitem data-action="/en-US/docs/Mozilla/Tech/XUL/PopupGuide/PopupEvents$history" label="View page history"></menuitem>
  </menu>

  </div></main>

  <!-- Footer -->
  <footer id="main-footer"><div class="center">
    <div class="column-container">
      <div class="column-main">
        
        <div class="contentinfo">
          <p>© 2005-2017 Mozilla Developer Network and individual contributors.</p> <p>Content is available under <a href="https://developer.mozilla.org/en-US/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p>
          <ul>
            <li><a href="https://developer.mozilla.org/docs/MDN/About">About MDN</a></li>
            <li><a href="http://www.mozilla.org/about/legal/terms/mozilla">Terms</a></li>
            <li><a href="http://www.mozilla.org/privacy/websites/">Privacy</a></li>
            <li><a href="http://www.mozilla.org/privacy/websites/#cookies">Cookies</a></li>
            <li><a href="http://github.com/mozilla/kuma">Contribute to the code</a></li>
          </ul>
        </div>
        
      </div>
      <div class="column-strip">
        
          
  
    <form class="languages go" method="get" action="https://developer.mozilla.org/en-US/docs/Web">
      <label for="language">Other languages:</label>
      <select id="language" class="wiki-l10n" name="next" dir="ltr">
        <option title="English (US)" value="/en-US/docs/Mozilla/Tech/XUL/PopupGuide/PopupEvents" selected="">
          English (US) (en-US)
        </option>
        
          <option title="Japanese" value="/ja/docs/XUL/PopupGuide/PopupEvents">
            日本語 (ja)
          </option>
      </select>
      <noscript>&lt;button type="submit"&gt;Go&lt;/button&gt;</noscript>
    </form>
  

        
      </div>
    </div>
  </div></footer>

  <!-- site js -->
  
    
    <!--[if lte IE 8]><script type="text/javascript" src="https://developer.cdn.mozilla.net/static/build/js/selectivizr.091e18cf669b.js" charset="utf-8"></script><![endif]-->

    
    <script async="" type="text/javascript" src="../../../../../../../developer.cdn.mozilla.net/static/build/js/main.69644b44d458.js" charset="utf-8"></script>
    
      <script>
        if(window.mdn && mdn.analytics) mdn.analytics.trackOutboundLinks();
      </script>
    
    
    <script type="text/javascript" src="../../../../../../../developer.cdn.mozilla.net/static/jsi18n/en-us/javascript.b28203373cc1.js"></script>
  
    <script async="" type="text/javascript" src="../../../../../../../developer.cdn.mozilla.net/static/build/js/syntax-prism-min.js" charset="utf-8"></script><script type="text/javascript" src="../../../../../../../developer.cdn.mozilla.net/static/build/js/main.69644b44d458.js" charset="utf-8"></script>
    
      <script>
        if(window.mdn && mdn.analytics) mdn.analytics.trackOutboundLinks();
      </script>
    
    
    <script type="text/javascript" src="../../../../../../../developer.cdn.mozilla.net/static/jsi18n/en-us/javascript.b28203373cc1.js"></script>
  
    <script async="" type="text/javascript" src="../../../../../../../developer.cdn.mozilla.net/static/build/js/wiki.d85ddd33511e.js" charset="utf-8" id="wikiscript"></script>

  

  

  

  
    <script async="" type="text/javascript" src="../../../../../../../developer.cdn.mozilla.net/static/build/js/newsletter.7cd3274169f2.js" charset="utf-8"></script>
  



<!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/PopupGuide/PopupEvents by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Jan 2017 21:38:19 GMT -->
</body></html>