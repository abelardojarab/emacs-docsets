<html><!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/Projects/Social_API/Service_worker_API_reference by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 02 Jan 2017 00:47:20 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <script async="" src="../../../../../../www.google-analytics.com/analytics.js"></script><script>(function(d) { d.className = d.className.replace(/\bno-js/, ''); })(document.documentElement);</script>
  
    
  

  
  <title>Social service worker API reference</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="index, follow">
    <link rel="home" href="https://developer.mozilla.org/en-US/">
    <link rel="copyright" href="#copyright">
  

  
    
    
    <link href="../../../../../../developer.cdn.mozilla.net/static/build/styles/mdn.102019a5db43.css" rel="stylesheet" type="text/css">

    
  
    <link href="../../../../../../developer.cdn.mozilla.net/static/build/styles/wiki.d9818563511b.css" rel="stylesheet" type="text/css">

    

    <!-- common social tags -->
    
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://developer.cdn.mozilla.net/static/img/opengraph-logo.dc4e08e2f6af.png">
    <meta property="og:site_name" content="Mozilla Developer Network">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://developer.cdn.mozilla.net/static/img/opengraph-logo.dc4e08e2f6af.png">
    <meta name="twitter:site" content="@MozDevNet">
    <meta name="twitter:creator" content="@MozDevNet">
    <link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/en-US/search/xml" title="Mozilla Developer Network">
  

  <!-- third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon144.a6e4162070f4.png">
  <!-- iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon114.0e9fabd44f85.png">
  <!-- first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon72.8ff9d87c82a0.png">
  <!-- non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon57.a2490b9a2d76.png">
  <!-- basic favicon -->
  
    
  
  <link rel="shortcut icon" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon32.e02854fdcf73.png">
  <!--[if IE]>
  <meta http-equiv="imagetoolbar" content="no">
  <script type="text/javascript" src="https://developer.cdn.mozilla.net/static/build/js/html5shiv.3948ccddab6f.js" charset="utf-8"></script>
  <![endif]-->

  
  <link rel="alternate" type="application/json" href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Social_API/Service_worker_API_reference$json">
  <link rel="canonical" href="Service_worker_API_reference.html">

  
    
      <link rel="alternate" hreflang="es" href="https://developer.mozilla.org/es/docs/Social_API/Service_worker_API_reference" title="Service worker API reference">
    
  

  <!-- document-specific social tags -->
  <meta property="og:title" content="Social service worker API reference">
  <meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Social_API/Service_worker_API_reference">
  <meta name="twitter:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Social_API/Service_worker_API_reference">
  <meta name="twitter:title" content="Social service worker API reference">
  
  <meta property="og:description" content="A Service Worker inherits all the limitations and behaviors available to HTML5 Shared Workers. It can create XMLHttpRequests, use WebSockets, receive messages from windows and the browser, use IndexedDB, and post messages to other windows.">
  <meta name="description" content="A Service Worker inherits all the limitations and behaviors available to HTML5 Shared Workers. It can create XMLHttpRequests, use WebSockets, receive messages from windows and the browser, use IndexedDB, and post messages to other windows.">
  <meta name="twitter:description" content="A Service Worker inherits all the limitations and behaviors available to HTML5 Shared Workers. It can create XMLHttpRequests, use WebSockets, receive messages from windows and the browser, use IndexedDB, and post messages to other windows.">
  

  
  <script type="text/javascript">
    
      var document_saved = 0;
    
  </script>

  
    



  
</head>
<body data-slug="Mozilla/Projects/Social_API/Service_worker_API_reference" contextmenu="edit-history-menu" data-search-url="" class="document  ">

  <script type="text/javascript">
    (function(win) {
        'use strict';

        
            (function(){
  var FLAGS = {
    'compat_api': false,'kumaediting': false,'page_move': false,'registration_disabled': false,'search_suggestions': false,'section_edit': false,'sg_task_completion': false,'spam_admin_override': false,'spam_checks_enabled': true,'spam_spammer_override': false,'spam_submissions_enabled': false,'spam_testing_mode': false,'wiki_samples': true,'wiki_spam_exempted': false,'wiki_spam_training': false
    },
    SWITCHES = {
    'wiki_error_on_delete': false,'wiki_force_immediate_rendering': false,'enable_optimizely': false,'welcome_email': true,'application_ACAO': true,'store_revision_ips': true,'dumb_doc_urls': true,'newsletter': true,'newsletter_article': true,'foundation_callout': true
    },
    SAMPLES = {
    
    };
  window.waffle = {
    "flag_is_active": function waffle_flag(flag_name) {
      
      return !!FLAGS[flag_name];
    },
    "switch_is_active": function waffle_switch(switch_name) {
      
      return !!SWITCHES[switch_name];
    },
    "sample_is_active": function waffle_sample(sample_name) {
      
      return !!SAMPLES[sample_name];
    },
    "FLAGS": FLAGS,
    "SWITCHES": SWITCHES,
    "SAMPLES": SAMPLES
  };
})();

        

        // This needs to be set before ckeditor.js loads
        window.CKEDITOR_BASEPATH = 'https://developer.mozilla.org/static/js/libs/ckeditor/build/ckeditor/';

        // This represents the site configuration
        win.mdn = {
            // Properties and settings for CKEditor will go here
            ckeditor: {},
            // Feature test results and methods will be placed here
            features: {},
            // The path to static assets (images, CSS, JS) in MDN
            staticPath: 'https://developer.cdn.mozilla.net/static/',
            // Optimizely API
            optimizely: win['optimizely'] || [],
            // Site notifications
            
            notifications: [],
            
            // Wiki-specific settings will be placed here
            wiki: {
                autosuggestTitleUrl: '/en-US/docs/get-documents'
            },
            // Assets that need to be dynamically injected
            assets_disabled: {
                css: {
                    'editor-content': ['https://developer.cdn.mozilla.net/static/build/styles/editor-content.e79881a73508.css',],
                    'wiki-compat-tables': ['https://developer.cdn.mozilla.net/static/build/styles/wiki-compat-tables.a042fac0d66c.css',]
                },
                js: {
                    'syntax-prism': ['https://developer.cdn.mozilla.net/static/build/js/syntax-prism.7a66ddfa68bf.js',],
                    'wiki-compat-tables': ['https://developer.cdn.mozilla.net/static/build/js/wiki-compat-tables.14ce5dcb2c3d.js',]
                }
            }
        };
    })(this);
</script>

  

  <ul id="nav-access">
    <li><a href="#document-main" id="skip-main">Skip to main content</a></li>
    <li><a id="skip-language" href="#language">Select language</a></li>
    <li><a href="#q" id="skip-search">Skip to search</a></li>
  </ul>

  <!-- Header -->
  <header id="main-header"><div class="center">

    <div id="tabzilla">
        <a href="http://www.mozilla.org/" class="no-track">mozilla</a>
    </div>

    <div class="clear header-clear"></div>

    <a href="https://developer.mozilla.org/en-US/" class="logo">Mozilla Developer Network</a>

    <div id="nav-sec">
        
                  <ul>
                  <li><div class="login">
    
      
       <a href="https://developer.mozilla.org/users/github/login/?next=%2Fen-US%2Fdocs%2FMozilla%2FProjects%2FSocial_API%2FService_worker_API_reference" class="login-link js-login-link" data-service="GitHub">
        Sign in
        <i class="icon-github" aria-hidden="true"></i>
      </a>
    
</div></li>
                </ul>
        
    </div>

    <nav id="main-nav" role="navigation"><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web">Web Technologies<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu submenu-cols-2 js-submenu" id="nav-platform-submenu">
          <div class="submenu-column">
            <div class="title">Technologies</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Graphics">Graphics</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP">HTTP</a></li>
              <li><a href="../../../Web/API.html">APIs / DOM</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions">WebExtensions</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/MathML">MathML</a></li>
            </ul>
          </div><div class="submenu-column last">
            <div class="title">References &amp; Guides</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Learn">Learning web development</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Tutorials">Tutorials</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Reference">References</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide">Developer Guides</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility">Accessibility</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games">Game development</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web">...more docs</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Zones">Mozilla Docs<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu js-submenu" id="nav-zones-submenu">
          <div class="submenu-column">
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons">Add-ons</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox">Firefox</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Tools">Developer Tools</a></li><li><a href="https://developer.mozilla.org/en-US/docs/MDN/Feedback">Feedback<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu js-submenu" id="nav-contact-submenu">
          <div class="submenu-column">
            <ul>
                <li><a href="https://support.mozilla.org/">Get Firefox help<i aria-hidden="true" class="icon-external-link"></i></a></li>
                <li><a href="http://stackoverflow.com/">Get web development help<i aria-hidden="true" class="icon-external-link"></i></a></li>
            </ul>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/MDN/Community">Join the MDN community</a></li>
              <li><a target="_blank" href="https://bugzilla.mozilla.org/form.doc?bug_file_loc=https%3A//developer.mozilla.org/en-US/docs/Mozilla/Projects/Social_API/Service_worker_API_reference">Report a content problem<i aria-hidden="true" class="icon-external-link"></i></a></li>
              <li><a target="_blank" href="https://bugzilla.mozilla.org/form.mdn">Report a bug<i aria-hidden="true" class="icon-external-link"></i></a></li>
            </ul>
          </div>
        </div>

      </li><li class="nav-search-link"><a href="https://developer.mozilla.org/en-US/search" title="Search"><i aria-hidden="true" class="icon-search"></i></a></li><li class="main-nav-search"><form action="https://developer.mozilla.org/en-US/search" method="get" role="search">
        <div class="search-wrap">
          <label for="main-q" class="offscreen">Search</label>
          <input type="search" id="main-q" name="q" placeholder="Search" data-value="" value="">
          <span class="search-trigger"><i aria-hidden="true" class="icon-search"></i></span>&nbsp;
          <button type="submit" class="offscreen">Search</button>
        </div>
      </form></li></ul></nav>
  </div></header>

  <!-- Content will go here -->
  <main id="content"><div class="center clear">
  

   <!-- end is_zone -->

    <div class="wiki-main-content" id="document-main"><div class="center">
      
      <div class="article-meta">
        <!-- action buttons -->
        

  
    
  

  
    
  

  

  <ul class="page-buttons" data-sticky="false">
      
      <li><button id="languages-menu" class="transparent" aria-haspopup="true" aria-owns="languages-menu-submenu" aria-expanded="false"><span>Languages</span><i aria-hidden="true" class="icon-language"></i></button>

        <div class="submenu js-submenu" id="languages-menu-submenu">
          <div class="submenu-column">
            <ul id="translations">
              
                
                
                
                  <li><bdi><a rel="internal" href="https://developer.mozilla.org/es/docs/Social_API/Service_worker_API_reference" title="Spanish">Español (es)</a></bdi></li>
                
              

              
                <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Social_API/Service_worker_API_reference$locales" rel="nofollow, noindex" id="translations-add">Add a translation</a></li>
              
            </ul>
          </div>
        </div>
      </li>

      
      <li class="page-buttons-edit"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Social_API/Service_worker_API_reference$edit" class="button" data-optimizely-hook="button-edit-doc" id="edit-button">Edit<i aria-hidden="true" class="icon-pencil"></i></a></li>
      

        

        <li><button id="advanced-menu" class="only-icon" aria-haspopup="true" aria-owns="advanced-menu-submenu" aria-expanded="false"><span>Advanced</span><i aria-hidden="true" class="icon-cog"></i></button>
        <div class="submenu js-submenu" id="advanced-menu-submenu">
          <!-- this page -->
          <div class="submenu-column">
            <div class="title">Advanced</div>
            <ul>
                <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Social_API/Service_worker_API_reference$history" rel="nofollow, noindex">History</a></li>
                
                
                

                

                
                
                
                <li class="page-print"><a href="#" onclick="return window.print();">Print this article</a></li>
            </ul>
          </div>
        </div>
  </li></ul>

        <!-- crumbs -->
        
  <nav class="crumbs" role="navigation"><ol xmlns:v="http://rdf.data-vocabulary.org/#" aria-label="breadcrumbs">
    <li typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US" rel="v:url" property="v:title">MDN</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla" rel="v:url" property="v:title">Mozilla</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects" rel="v:url" property="v:title">Projects</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="../Social_API.html" rel="v:url" property="v:title">Social API</a></li>
    
    <li class="crumb" typeof="v:Breadcrumb" property="v:title">Social service worker API reference</li>
  </ol></nav>
      </div>

      <!-- heading -->
      <div id="wiki-document-head" class="document-head">
          <span class="from-search-previous-box">
            <a class="button from-search-previous only-icon disabled" title="Previous Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-left"></i></a>
          </span>
          <span class="from-search-navigate-wrap">
            <a href="#" class="from-search-navigate"><span class="from-search-navigate-up"><i aria-hidden="true" class="icon-double-angle-up"></i></span><span class="from-search-navigate-down"><i aria-hidden="true" class="icon-double-angle-down"></i></span></a>
          </span>
          <div class="from-search-toc submenu">
            <span class="title">Your Search Results</span>
            <ol></ol>
          </div>
          <span class="from-search-next-box">
            <a class="button from-search-next only-icon disabled" title="Next Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-right"></i></a>
          </span>

        
        <div class="contributor-avatars" data-all-text="see all contributors" data-alternate-message="hide contributors" data-has-hidden="1">
            <ul>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/Sheppy" title="View profile: Sheppy">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="Sheppy" data-src="../../../../../../secure.gravatar.com/avatar/945076feb88f2d7003891ffbf06f32bf6c02.jpeg?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">Sheppy</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/Mixedpuppy" title="View profile: Mixedpuppy">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="Mixedpuppy" data-src="../../../../../../secure.gravatar.com/avatar/ac7c1cddbca70fa76d4f01c5e6e9ec326c02.jpeg?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">Mixedpuppy</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/Spence" title="View profile: Spence">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="Spence" data-src="../../../../../../secure.gravatar.com/avatar/cfa9c6401bd257fe9f49ca800afa0f196c02.jpeg?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">Spence</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/chrisdavidmills" title="View profile: chrisdavidmills">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="chrisdavidmills" data-src="../../../../../../secure.gravatar.com/avatar/deeea0ba82390bd5acc539703c4b0cfb6c02.jpeg?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">chrisdavidmills</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/DavidWalsh" title="View profile: DavidWalsh">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="DavidWalsh" data-src="../../../../../../secure.gravatar.com/avatar/e15d8725aa42ce94ff509dd9136284d86c02.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">DavidWalsh</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/Dmose" title="View profile: Dmose">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="Dmose" data-src="../../../../../../secure.gravatar.com/avatar/fb28834abf6757e9ffdcb4f2069201856c02.jpeg?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">Dmose</noscript></a>
                </li>
            
                <li class="hidden">
                <a href="https://developer.mozilla.org/en-US/profiles/Ametaireau" title="View profile: Ametaireau">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="Ametaireau" data-src="../../../../../../secure.gravatar.com/avatar/1b3ec4d4db1722e0459151ff9fd054f26c02.jpeg?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">Ametaireau</noscript></a>
                </li>
            
                <li class="hidden">
                <a href="https://developer.mozilla.org/en-US/profiles/tarek" title="View profile: tarek">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="tarek" data-src="../../../../../../secure.gravatar.com/avatar/1a38ce59a5c52dca67e4145b392078ab6c02.jpeg?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">tarek</noscript></a>
                </li>
            
                <li class="hidden">
                <a href="https://developer.mozilla.org/en-US/profiles/kscarfone" title="View profile: kscarfone">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="kscarfone" data-src="../../../../../../secure.gravatar.com/avatar/89c1e54a9703125168e40d22316d2b496c02.jpeg?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">kscarfone</noscript></a>
                </li>
            
                <li class="hidden">
                <a href="https://developer.mozilla.org/en-US/profiles/xanders" title="View profile: xanders">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="xanders" data-src="../../../../../../secure.gravatar.com/avatar/411f68c81baf1295b50179ad0156bb746c02.jpeg?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">xanders</noscript></a>
                </li>
            
            </ul>
        </div>
        

        <h1>Social service worker API reference</h1>

      </div>
      

      <!-- start the main content container -->
        <div id="wiki-column-container" class="wiki-right-present wiki-left-closed wiki-left-none">

          <!-- content row with three strips -->
          <div class="column-container column-container-reverse">

            
              <!-- TOC, approvals, etc -->
              <div class="column-strip wiki-column" id="wiki-right">
              
              <!-- table of contents -->
              <div id="toc" class="toc toggleable" data-closed="true">
                <a href="#toc" class="title toggler" data-open-icon="icon-plus" data-closed-icon="icon-minus">In This Article<i></i></a>
                <ol class="toggle-container">
                  <li><ol><li><a href="#Service_Worker_Reference" rel="internal">Service Worker Reference</a></li><li><a href="#Message_Serialization" rel="internal">Message Serialization</a></li><li><a href="#Control_Messages_sent_to_Service_Workers" rel="internal">Control Messages sent to Service Workers</a><ol><li><a href="#social.initialize" rel="internal"><code>social.initialize</code></a></li><li><a href="#social.port-closing" rel="internal"><code>social.port-closing</code></a></li></ol></li><li><a href="#Control_Messages_sent_from_Service_Workers_to_the_browser" rel="internal">Control Messages sent from Service Workers to the browser</a><ol><li><a href="#social.reload-worker" rel="internal"><code>social.reload-worker</code></a></li><li><a href="#social.cookies-get" rel="internal"><code>social.cookies-get</code></a></li><li><a href="#social.request-chat" rel="internal"><code>social.request-chat</code></a></li></ol></li><li><a href="#Ambient_Notification_Control" rel="internal">Ambient Notification Control</a><ol><li><a href="#social.user-profile" rel="internal"><code>social.user-profile</code></a></li><li><a href="#social.ambient-notification" rel="internal"><code>social.ambient-notification</code></a></li></ol></li><li><a href="#Active_Notification_Control" rel="internal">Active Notification Control</a><ol><li><a href="#social.notification-create" rel="internal"><code>social.notification-create</code></a></li><li><a href="#social.notification-action" rel="internal"><code>social.notification-action</code></a></li></ol></li><li><a href="#Upgrading_the_Manifest" rel="internal">Upgrading the Manifest</a><ol><li><a href="#social.manifest-get" rel="internal"><code>social.manifest-get</code></a></li><li><a href="#social.manifest-set" rel="internal"><code>social.manifest-set</code></a></li></ol></li><li><a href="#sect1" rel="internal">&nbsp;</a></li></ol></li>
                </ol>
              </div>
              
              </div>
            

            
            
              
            

            <!-- center: main article content -->
            <div id="wiki-content" class="column-main wiki-column text-content">

              

              

              
                
                
                
              
              

              <!-- just the article content -->
              <article id="wikiArticle">
                
                  
                    <p></p><div class="overheadIndicator nonStandard nonStandardHeader"> 
      <p><strong><span title="This API has not been standardized."><i class="icon-warning-sign"> </i></span> Non-standard</strong><br> 
      This feature is non-standard and is not on a standards track. Do not use it on production sites facing the Web: it will not work for every user. There may also be large incompatibilities between implementations and the behavior may change in the future.</p> 
      </div><p></p>

<p></p>

<p></p><div class="overheadIndicator obsolete obsoleteHeader"><p><strong><span title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span> Obsolete since Gecko 48 (Firefox 48 / Thunderbird 48 / SeaMonkey 2.45)</strong><br>This feature is obsolete. Although it may still work in some browsers, its use is discouraged since it could be removed at any time. Try to avoid using it.</p></div><p></p>

<div class="warning">
<p>Service Workers based on SocialAPI are deprecated, and were removed in Firefox 48.&nbsp; You can use <a href="../../../Web/API/Service_Worker_API.html">Service Workers</a> or <a href="../../../Web/API/SharedWorker.html">Shared Workers</a> to accomplish some of the same capabilities.</p>
</div>

<div class="note">
<p>This Service worker is part of Mozilla's Social API. If you are looking for information on the new W3C ServiceWorker proposal for caching, http response control , etc., go to the <a href="../../../Web/API/Service_Worker_API.html">ServiceWorker landing page</a> instead.</p>
</div>

<h3 id="Service_Worker_Reference">Service Worker Reference</h3>

<p>A Service Worker inherits all the limitations and behaviors available to HTML5 Shared Workers. It can create XMLHttpRequests, use WebSockets, receive messages from windows and the browser, use IndexedDB, and post messages to other windows.</p>

<p>The Worker can use the <code>ononline</code>, <code>onoffline</code>, and <code>navigator.online</code> methods and properties that are available to all Workers to obtain notification of the browser's online/offline status.</p>

<p>In addition to the standard methods, Service Workers have access to additional functionality, all of which is implemented using messages sent and received by worker "message ports". As message ports are inherently asynchronous, any message that requires a response will involve two messages - one for the request and one for the response. Not all messages require a response - this is part of the message specification. Messages that don't require a response are analogous to an unsolicited 'event'. If a message does require a response, then the response must always be sent on the same port as the request and in general, the 'topic' of the response will be the topic of the request with "-response" appended.</p>

<p>Service workers are expected to provide a function at global scope, named <code>onconnect</code>. The browser will invoke <code>onconnect</code> at startup time, passing in an event. The worker should access the <code>ports</code> property of this event to extract a stable communication port back to the browser, and persist it for the life of the worker, like this:</p>

<pre class="brush: js"><code>var apiPort;
var ports = [];
onconnect = function(e) {
    var port = e.ports[0];
    ports.push(port);
    port.onmessage = function (msgEvent)
    {
        var msg = msgEvent.data;
        if (msg.topic == "social.port-closing") {
            if (port == apiPort) {
                apiPort.close();
                apiPort = null;
            }
            return;
        }
        if (msg.topic == "social.initialize") {
            apiPort = port;
            initializeAmbientNotifications();
        }
    }
}

// send a message to all provider content
function broadcast(topic, data) {
  for (var i = 0; i &lt; ports.length; i++) {
    ports[i].postMessage({topic: topic, data: data});
  }
}
</code></pre>

<p>Every message has a data element with 2 fields; 'topic' and 'data'. The topic identifies which method or event is being used, and the data specifies additional data unique to the topic. All standardized methods and events have topics that begin with "social." - this means services are free to use topics without this prefix as a private implementation detail (for example, to communicate between some content from the service and the service's worker).</p>

<h3 id="Message_Serialization">Message Serialization</h3>

<p>For a message with topic <code>topic</code> and arguments (arg1:val1, arg2:val2), construct an object like:</p>

<pre><code>{ topic: topic, data: { arg1: val1, arg2: val2 } }
</code></pre>

<h3 id="Control_Messages_sent_to_Service_Workers">Control Messages sent to Service Workers</h3>

<h4 id="social.initialize"><code>social.initialize</code></h4>

<p>Sent by the browser during startup. When a worker's JavaScript has been successfully loaded and evaluated, the browser will send a message with this topic.&nbsp; When the worker receives the <code>social.initalize event</code>, it should send both the <code>social.user-profile</code> and, if Page Marks are supported [as of Fx23], the <code>social.page-mark-config</code> message.</p>

<h4 id="social.port-closing"><code>social.port-closing</code></h4>

<p>Sent by the browser during worker shutdown, when a MessagePort to the worker is about to be closed. This will be the last message the worker receives on the port.</p>

<h3 id="Control_Messages_sent_from_Service_Workers_to_the_browser">Control Messages sent from Service Workers to the browser</h3>

<h4 id="social.reload-worker"><code>social.reload-worker</code></h4>

<p>Sent by the worker to request the browser to reload the worker.</p>

<h4 id="social.cookies-get"><code>social.cookies-get</code></h4>

<p>Sent by the worker to request the browser to respond with a list of same-origin cookies for the provider. The browser will respond with a <code>social.cookies-get-response</code> message.</p>

<h4 id="social.request-chat"><code>social.request-chat</code></h4>

<p>Sent by the worker to request the browser to open a new floating chat panel with the specified url. Chat windows opened by the worker will be opened in a minimized mode.</p>

<p><em>Arguments:</em></p>

<p><strong>url</strong></p>

<blockquote>
<p>String, required.&nbsp; The url to the chat page to open in the window.</p>
</blockquote>

<h3 id="Ambient_Notification_Control">Ambient Notification Control</h3>

<h4 id="social.user-profile"><code>social.user-profile</code></h4>

<p>Sent by the worker to set the properties for the provider icon and user profile data used for the toolbar button. If the user's portrait and userName are absent, the button UI will indicate a logged out state. When indicating logged out state, status icons set via <code>social.ambient-notification</code> will be removed. A service that does not handle user login should send this message with values appropriate to the website, such as the site icon, home url, and brand name.</p>

<p><em>Arguments:</em></p>

<p><strong>iconURL</strong></p>

<blockquote>
<p>String, required. If supplied, specifies the URL to a 16x16 pixel image used for the status icon. The iconURL can be a data url with encoded image to avoid additional http requests (e.g., "data:image/png;base64,...data...").</p>
</blockquote>

<p><strong>portrait</strong></p>

<blockquote>
<p>String, optional. If supplied, specifies the URL to a 48x48 pixel image of the user. The portrait can be a data url with encoded image to avoid additional http requests.</p>
</blockquote>

<p><strong>userName</strong></p>

<blockquote>
<p>String, optional. Account name displayed with the portrait in the provider menu.</p>
</blockquote>

<p><strong>displayName</strong></p>

<blockquote>
<p>String, required. Real name of the user used for display purposes in various UI elements.</p>
</blockquote>

<p><strong>profileURL</strong></p>

<blockquote>
<p>String, required. URL to the logged in user's profile page. This will be opened in a normal browser tab when the username is clicked on.</p>
</blockquote>

<h4 id="social.ambient-notification"><code>social.ambient-notification</code></h4>

<p>Sent by the worker to update or create an ambient notification icon. One is sent for each icon. A user must be logged in to show status icons, and you must call <code>social.user-profile</code> prior to calling <code>social.ambient-notification</code> to set status icons.</p>

<p><em>Arguments:</em></p>

<p><strong>label</strong></p>

<blockquote>
<p>String, optional.&nbsp; An label for the icon tooltip, which otherwise defaults to the name given in the manifest.</p>
</blockquote>

<p><strong>iconURL</strong></p>

<blockquote>
<p>String, optional. If supplied, specifies the URL to a 16x16 pixel image used for the status icon. The iconURL can be a data url with encoded image to avoid additional http requests (e.g., "data:image/png;base64,...data...").</p>
</blockquote>

<p><strong>counter</strong></p>

<blockquote>
<p>Number, optional. Specifies a number that will be overlaid over the icon, typically used to convey an <code>unread</code> concept.</p>
</blockquote>

<p><strong>contentPanel</strong></p>

<blockquote>
<p>String, optional. Specifies the URL of content that will be displayed in the popup panel for the icon.</p>
</blockquote>

<h3 id="Active_Notification_Control">Active Notification Control</h3>

<h4 id="social.notification-create"><code>social.notification-create</code></h4>

<p>Sent by the worker to create and display a notification object. This requests that the browser notify the user of an immediately-relevant change in state. See <a href="../../../Web/API/Navigator/mozNotification.html">https://developer.mozilla.org/en/DOM/navigator.mozNotification</a> for more detail. When the user clicks on the notification, the <code>social.notification-action</code> message is sent to the worker. The title of the notification will always be the name of the provider.</p>

<p>NOTE: We want to augment the mozNotification object defined in the docs with an additional "type" field. Details TBD. NOTE: No way of allowing duration and no way exposed to "cancel" a notification (assumption is they are very short-lived). Is this OK?</p>

<p><em>Arguments:</em></p>

<p><strong>id</strong></p>

<blockquote>
<p>String: An ID for the notification. This ID will not be displayed but will be passed back via a <code>social.notification-action</code> event if the user clicks on the notification.</p>
</blockquote>

<p><strong>type</strong></p>

<blockquote>
<p>String: The Type string should be consistent for each <strong>type</strong> of notification. This may be used by some notification systems to provide user-level filtering of notifications. A provider may choose any string for the type, but should keep the type strings consistent and descriptive for each type of action. For example, chat notifications should always have the same type string. Suggested/example notifications include:</p>
</blockquote>

<ul>
 <li>social.providername.chat-request</li>
 <li>social.providername.friend-request</li>
 <li>social.providername.activity (e.g., someone posted to your activity stream)</li>
</ul>

<p><strong>icon</strong></p>

<blockquote>
<p>String/null. The URL of an image to be placed in the notification. While this can be any valid URL, implementers are strongly encouraged to use a data URL to minimize latency.</p>
</blockquote>

<p><strong>body</strong></p>

<blockquote>
<p>String: The body of the notification message. This body will be rendered as a hyperlink and may be clicked. HTML markup is not supported.</p>
</blockquote>

<p><strong>action</strong></p>

<blockquote>
<p>String: An action to perform when the user clicks on the notification. If no action is provided, the notification is not clickable. Currently the only actions supported are <strong><em>link</em></strong>, <strong><em>callback</em></strong>, and <strong><em>openServiceWindow</em></strong>. If the action is defined, actionArgs should also be defined.</p>
</blockquote>

<p><strong>actionArgs</strong></p>

<blockquote>
<p>Object: An object with arguments for actions (above). Supported actions and their actionArgs are:</p>
</blockquote>

<ul>
 <li>link
  <ul>
   <li>toURL: String: url to open in a new browser tab</li>
  </ul>
 </li>
</ul>

<h4 id="social.notification-action"><code>social.notification-action</code></h4>

<p>Sent to the worker as a response to a "callback" notification, after the user has clicked on the notification.</p>

<p><em>Arguments: None</em></p>

<p><strong>id</strong></p>

<blockquote>
<p>String: the ID of the notification that was clicked.</p>
</blockquote>

<p><strong>action</strong></p>

<blockquote>
<p>String: The <strong>action</strong> sent in <code>social.notification-create</code>.</p>
</blockquote>

<p><strong>actionArgs</strong></p>

<blockquote>
<p>Object: The <strong>actionArgs</strong> sent in <code>social.notification-create</code>.</p>
</blockquote>

<h3 id="Upgrading_the_Manifest">Upgrading the Manifest</h3>

<p><strong>Available starting Firefox 24</strong></p>

<p>You may fetch and set your manifest data. This allows you to check if the manifest for your provider in Firefox is up to date, and allows you to update the manifest if necessary. When you update your manifest, any content loaded from your provider will be reloaded automatically. It is recommended you use the version attribute on the manifest to track versioning of your provider.</p>

<h4 id="social.manifest-get"><code>social.manifest-get</code></h4>

<p>Sent by the worker to request the installed manifest data from Firefox. This message can be sent at any time. Firefox will respond with a social.manifest message containing the manifest data.</p>

<p><em>Arguments: None</em></p>

<h4 id="social.manifest-set"><code>social.manifest-set</code></h4>

<p>Sent by the worker to update the installed manifest data in Firefox. This message can be sent at any time. Firefox will reload the provider after saving the new manifest.</p>

<p><em>Arguments:</em></p>

<p><strong>data</strong></p>

<blockquote>
<p>JSON Object. The manifest data.</p>
</blockquote>

<h3 id="sect1">&nbsp;</h3>
                  
                
              </article>

              

                <!-- contributors -->
                <div class="wiki-block contributors">
                  <h2 class="offscreen">Document Tags and Contributors</h2>
                  
                  
  <div class="tag-attach-list contributors-sub">
    <i aria-hidden="true" class="icon-tags icon-fw"></i>
    <strong>Tags:</strong>&nbsp;
    <ul class="tags tags-small">
      
        <li><a href="../../../tag/API.html">API</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/Mozilla">Mozilla</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/Non Standard">Non Standard</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/Non-standard">Non-standard</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/Reference">Reference</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/Social">Social</a></li>
      
    </ul>
  </div>

                  
                    <div class="contributors-sub">
                      <i aria-hidden="true" class="icon-group icon-fw"></i>&nbsp;<strong>Contributors to this page:</strong> 
        <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/Mixedpuppy">Mixedpuppy</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/Spence">Spence</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/chrisdavidmills">chrisdavidmills</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/DavidWalsh">DavidWalsh</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/Dmose">Dmose</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/Ametaireau">Ametaireau</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/tarek">tarek</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/kscarfone">kscarfone</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/xanders">xanders</a>
    
                    </div>
                  

                  
                    <div class="contributors-sub">
                      <i aria-hidden="true" class="icon-clock-o icon-fw"></i>&nbsp;<strong>Last updated by:</strong>
                      <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>,
                      <time datetime="2016-08-10T11:44:45-07:00">Aug 10, 2016, 11:44:45 AM</time>
                    </div>
                  
                </div>
              

              
                  <div class="newsletter-box">
                    <div class="newsletter">
    <form id="newsletterForm" name="newsletter-form" class="nodisable" action="https://www.mozilla.org/en-US/newsletter/" method="post">
        <h2 class="newsletter-teaser">Learn the best of web development</h2>
        <p class="newsletter-description">Sign up for our newsletter:</p>
        <input type="hidden" id="fmt" name="fmt" value="H">
        <input type="hidden" id="newsletterNewslettersInput" name="newsletters" value="app-dev">

        <div id="newsletterErrors" class="newsletter-errors"></div>

        <div id="newsletterEmail" class="form-group">
            <label for="newsletterEmailInput" class="form-label offscreen">E-mail</label>
            <input type="email" id="newsletterEmailInput" name="email" class="form-input newsletter-input-email" required="" placeholder="you@example.com" size="30">
        </div>

        <div id="newsletterPrivacy" class="form-group form-group-agree hidden">
            <input type="checkbox" id="newsletterPrivacyInput" name="privacy" required="">
            <label for="newsletterPrivacyInput">
            I'm okay with Mozilla handling my info as explained in this <a href="https://www.mozilla.org/privacy/">Privacy Policy</a>.
            </label>
        </div>
        <div id="newsletterSubmit">
            <button id="newsletter-submit" type="submit" class="button positive">Sign up now</button>
        </div>
        
    </form>
    <div id="newsletterThanks" class="newsletter-thanks hidden">
        <h2>Thanks! Please check your inbox to confirm your subscription.</h2>
        <p>If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an email from us.
        </p>
    </div>
    <button id="newsletterHide" type="button" class="only-icon newsletter-hide hidden"><span>Hide Newsletter Sign-up</span><i aria-hidden="true" class="icon-times"></i></button>
</div>
                  </div>
              
            </div>

            
          </div>
        </div>
      </div>
    </div> <!-- ends "main-content" -->

  <menu type="context" id="edit-history-menu">
    <menuitem data-action="/en-US/docs/Mozilla/Projects/Social_API/Service_worker_API_reference$edit" label="Edit page"></menuitem>
    <menuitem data-action="/en-US/docs/Mozilla/Projects/Social_API/Service_worker_API_reference$history" label="View page history"></menuitem>
  </menu>

  </div></main>

  <!-- Footer -->
  <footer id="main-footer"><div class="center">
    <div class="column-container">
      <div class="column-main">
        
        <div class="contentinfo">
          <p>© 2005-2017 Mozilla Developer Network and individual contributors.</p> <p>Content is available under <a href="https://developer.mozilla.org/en-US/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p>
          <ul>
            <li><a href="https://developer.mozilla.org/docs/MDN/About">About MDN</a></li>
            <li><a href="http://www.mozilla.org/about/legal/terms/mozilla">Terms</a></li>
            <li><a href="http://www.mozilla.org/privacy/websites/">Privacy</a></li>
            <li><a href="http://www.mozilla.org/privacy/websites/#cookies">Cookies</a></li>
            <li><a href="http://github.com/mozilla/kuma">Contribute to the code</a></li>
          </ul>
        </div>
        
      </div>
      <div class="column-strip">
        
          
  
    <form class="languages go" method="get" action="https://developer.mozilla.org/en-US/docs/Web">
      <label for="language">Other languages:</label>
      <select id="language" class="wiki-l10n" name="next" dir="ltr">
        <option title="English (US)" value="/en-US/docs/Mozilla/Projects/Social_API/Service_worker_API_reference" selected="">
          English (US) (en-US)
        </option>
        
          <option title="Spanish" value="/es/docs/Social_API/Service_worker_API_reference">
            Español (es)
          </option>
      </select>
      <noscript>&lt;button type="submit"&gt;Go&lt;/button&gt;</noscript>
    </form>
  

        
      </div>
    </div>
  </div></footer>

  <!-- site js -->
  
    
    <!--[if lte IE 8]><script type="text/javascript" src="https://developer.cdn.mozilla.net/static/build/js/selectivizr.091e18cf669b.js" charset="utf-8"></script><![endif]-->

    
    <script async="" type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/build/js/main.69644b44d458.js" charset="utf-8"></script>
    
      <script>
        if(window.mdn && mdn.analytics) mdn.analytics.trackOutboundLinks();
      </script>
    
    
    <script type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/jsi18n/en-us/javascript.b28203373cc1.js"></script>
  
    <script async="" type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/build/js/syntax-prism-min.js" charset="utf-8"></script><script type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/build/js/main.69644b44d458.js" charset="utf-8"></script>
    
      <script>
        if(window.mdn && mdn.analytics) mdn.analytics.trackOutboundLinks();
      </script>
    
    
    <script type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/jsi18n/en-us/javascript.b28203373cc1.js"></script>
  
    <script async="" type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/build/js/wiki.d85ddd33511e.js" charset="utf-8" id="wikiscript"></script>

  

  

  

  
    <script async="" type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/build/js/newsletter.7cd3274169f2.js" charset="utf-8"></script>
  



<!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/Projects/Social_API/Service_worker_API_reference by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 02 Jan 2017 00:47:22 GMT -->
</body></html>