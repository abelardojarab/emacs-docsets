<html><!-- Mirrored from developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Jan 2017 23:04:59 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <script async="" src="../../../../../../www.google-analytics.com/analytics.js"></script><script>(function(d) { d.className = d.className.replace(/\bno-js/, ''); })(document.documentElement);</script>
  
    
  

  
  <title>Bounding volume collision detection with THREE.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="index, follow">
    <link rel="home" href="https://developer.mozilla.org/en-US/">
    <link rel="copyright" href="#copyright">
  

  
    
    
    <link href="../../../../../../developer.cdn.mozilla.net/static/build/styles/mdn.102019a5db43.css" rel="stylesheet" type="text/css">

    
  
    <link href="../../../../../../developer.cdn.mozilla.net/static/build/styles/wiki.d9818563511b.css" rel="stylesheet" type="text/css">

    
      
        <link rel="stylesheet" type="text/css" href="https://developer.mozilla.org/en-US/docs/Games$styles">
      
    

    <!-- common social tags -->
    
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://developer.cdn.mozilla.net/static/img/opengraph-logo.dc4e08e2f6af.png">
    <meta property="og:site_name" content="Mozilla Developer Network">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://developer.cdn.mozilla.net/static/img/opengraph-logo.dc4e08e2f6af.png">
    <meta name="twitter:site" content="@MozDevNet">
    <meta name="twitter:creator" content="@MozDevNet">
    <link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/en-US/search/xml" title="Mozilla Developer Network">
  

  <!-- third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon144.a6e4162070f4.png">
  <!-- iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon114.0e9fabd44f85.png">
  <!-- first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon72.8ff9d87c82a0.png">
  <!-- non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon57.a2490b9a2d76.png">
  <!-- basic favicon -->
  
    
  
  <link rel="shortcut icon" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon32.e02854fdcf73.png">
  <!--[if IE]>
  <meta http-equiv="imagetoolbar" content="no">
  <script type="text/javascript" src="https://developer.cdn.mozilla.net/static/build/js/html5shiv.3948ccddab6f.js" charset="utf-8"></script>
  <![endif]-->

  
  <link rel="alternate" type="application/json" href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js$json">
  <link rel="canonical" href="Bounding_volume_collision_detection_with_THREE.html">

  

  <!-- document-specific social tags -->
  <meta property="og:title" content="Bounding volume collision detection with THREE.js">
  <meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js">
  <meta name="twitter:url" content="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js">
  <meta name="twitter:title" content="Bounding volume collision detection with THREE.js">
  
  <meta property="og:description" content="This article shows how to implement collision detection between bounding boxes and spheres using the Three.js library. It is assumed that before reading this you have read our 3D collision detection introductory article first, and have basic knowledge about Three.js.">
  <meta name="description" content="This article shows how to implement collision detection between bounding boxes and spheres using the Three.js library. It is assumed that before reading this you have read our 3D collision detection introductory article first, and have basic knowledge about Three.js.">
  <meta name="twitter:description" content="This article shows how to implement collision detection between bounding boxes and spheres using the Three.js library. It is assumed that before reading this you have read our 3D collision detection introductory article first, and have basic knowledge about Three.js.">
  

  
  <script type="text/javascript">
    
      var document_saved = 0;
    
  </script>

  
    



  
</head>
<body data-slug="Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js" contextmenu="edit-history-menu" data-search-url="" class="document zone ">

  <script type="text/javascript">
    (function(win) {
        'use strict';

        
            (function(){
  var FLAGS = {
    'compat_api': false,'kumaediting': false,'page_move': false,'registration_disabled': false,'search_suggestions': false,'section_edit': false,'sg_task_completion': false,'spam_admin_override': false,'spam_checks_enabled': true,'spam_spammer_override': false,'spam_submissions_enabled': false,'spam_testing_mode': false,'wiki_samples': true,'wiki_spam_exempted': false,'wiki_spam_training': false
    },
    SWITCHES = {
    'wiki_error_on_delete': false,'wiki_force_immediate_rendering': false,'enable_optimizely': false,'welcome_email': true,'application_ACAO': true,'store_revision_ips': true,'dumb_doc_urls': true,'newsletter': true,'newsletter_article': true,'foundation_callout': true
    },
    SAMPLES = {
    
    };
  window.waffle = {
    "flag_is_active": function waffle_flag(flag_name) {
      
      return !!FLAGS[flag_name];
    },
    "switch_is_active": function waffle_switch(switch_name) {
      
      return !!SWITCHES[switch_name];
    },
    "sample_is_active": function waffle_sample(sample_name) {
      
      return !!SAMPLES[sample_name];
    },
    "FLAGS": FLAGS,
    "SWITCHES": SWITCHES,
    "SAMPLES": SAMPLES
  };
})();

        

        // This needs to be set before ckeditor.js loads
        window.CKEDITOR_BASEPATH = 'https://developer.mozilla.org/static/js/libs/ckeditor/build/ckeditor/';

        // This represents the site configuration
        win.mdn = {
            // Properties and settings for CKEditor will go here
            ckeditor: {},
            // Feature test results and methods will be placed here
            features: {},
            // The path to static assets (images, CSS, JS) in MDN
            staticPath: 'https://developer.cdn.mozilla.net/static/',
            // Optimizely API
            optimizely: win['optimizely'] || [],
            // Site notifications
            
            notifications: [],
            
            // Wiki-specific settings will be placed here
            wiki: {
                autosuggestTitleUrl: '/en-US/docs/get-documents'
            },
            // Assets that need to be dynamically injected
            assets_disabled: {
                css: {
                    'editor-content': ['https://developer.cdn.mozilla.net/static/build/styles/editor-content.e79881a73508.css',],
                    'wiki-compat-tables': ['https://developer.cdn.mozilla.net/static/build/styles/wiki-compat-tables.a042fac0d66c.css',]
                },
                js: {
                    'syntax-prism': ['https://developer.cdn.mozilla.net/static/build/js/syntax-prism.7a66ddfa68bf.js',],
                    'wiki-compat-tables': ['https://developer.cdn.mozilla.net/static/build/js/wiki-compat-tables.14ce5dcb2c3d.js',]
                }
            }
        };
    })(this);
</script>

  

  <ul id="nav-access">
    <li><a href="#document-main" id="skip-main">Skip to main content</a></li>
    <li><a id="skip-language" href="#language">Select language</a></li>
    <li><a href="#q" id="skip-search">Skip to search</a></li>
  </ul>

  <!-- Header -->
  <header id="main-header"><div class="center">

    <div id="tabzilla">
        <a href="http://www.mozilla.org/" class="no-track">mozilla</a>
    </div>

    <div class="clear header-clear"></div>

    <a href="https://developer.mozilla.org/en-US/" class="logo">Mozilla Developer Network</a>

    <div id="nav-sec">
        
                  <ul>
                  <li><div class="login">
    
      
       <a href="../../../../../users/github/login/index94a9.html?next=%2Fen-US%2Fdocs%2FGames%2FTechniques%2F3D_collision_detection%2FBounding_volume_collision_detection_with_THREE.js" class="login-link js-login-link" data-service="GitHub">
        Sign in
        <i class="icon-github" aria-hidden="true"></i>
      </a>
    
</div></li>
                </ul>
        
    </div>

    <nav id="main-nav" role="navigation"><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web">Web Technologies<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu submenu-cols-2 js-submenu" id="nav-platform-submenu">
          <div class="submenu-column">
            <div class="title">Technologies</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Graphics">Graphics</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP">HTTP</a></li>
              <li><a href="../../../Web/API.html">APIs / DOM</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions">WebExtensions</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/MathML">MathML</a></li>
            </ul>
          </div><div class="submenu-column last">
            <div class="title">References &amp; Guides</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Learn">Learning web development</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Tutorials">Tutorials</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Reference">References</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide">Developer Guides</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility">Accessibility</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games">Game development</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web">...more docs</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Zones">Mozilla Docs<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu js-submenu" id="nav-zones-submenu">
          <div class="submenu-column">
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons">Add-ons</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox">Firefox</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Tools">Developer Tools</a></li><li><a href="https://developer.mozilla.org/en-US/docs/MDN/Feedback">Feedback<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu js-submenu" id="nav-contact-submenu">
          <div class="submenu-column">
            <ul>
                <li><a href="https://support.mozilla.org/">Get Firefox help<i aria-hidden="true" class="icon-external-link"></i></a></li>
                <li><a href="http://stackoverflow.com/">Get web development help<i aria-hidden="true" class="icon-external-link"></i></a></li>
            </ul>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/MDN/Community">Join the MDN community</a></li>
              <li><a target="_blank" href="../../../../../../bugzilla.mozilla.org/form6ee6.html?bug_file_loc=https%3A//developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js">Report a content problem<i aria-hidden="true" class="icon-external-link"></i></a></li>
              <li><a target="_blank" href="https://bugzilla.mozilla.org/form.mdn">Report a bug<i aria-hidden="true" class="icon-external-link"></i></a></li>
            </ul>
          </div>
        </div>

      </li><li class="nav-search-link"><a href="https://developer.mozilla.org/en-US/search" title="Search"><i aria-hidden="true" class="icon-search"></i></a></li><li class="main-nav-search"><form action="https://developer.mozilla.org/en-US/search" method="get" role="search">
        <div class="search-wrap">
          <label for="main-q" class="offscreen">Search</label>
          <input type="search" id="main-q" name="q" placeholder="Search" data-value="" value="">
          <span class="search-trigger"><i aria-hidden="true" class="icon-search"></i></span>&nbsp;
          <button type="submit" class="offscreen">Search</button>
        </div>
      </form></li></ul></nav>
  </div></header>

  <!-- Content will go here -->
  <main id="content"><div class="center clear">
  

  
      
        <div class="zone-article-header" id="document-main"><div class="center">
          <!-- zone title -->
          <div class="zone-title"><a href="https://developer.mozilla.org/en-US/docs/Games">Game development</a></div>
          <!-- zone image -->
          <div class="zone-image"></div>
        </div></div>
      

     <!-- end is_zone -->

    <div class="wiki-main-content"><div class="center">
      
      <div class="article-meta">
        <!-- action buttons -->
        

  
    
  

  
    
  

  

  <ul class="page-buttons" data-sticky="false">
      
      <li><button id="languages-menu" class="transparent" aria-haspopup="true" aria-owns="languages-menu-submenu" aria-expanded="false"><span>Languages</span><i aria-hidden="true" class="icon-language"></i></button>

        <div class="submenu js-submenu" id="languages-menu-submenu">
          <div class="submenu-column">
            <ul id="translations">
              
                <li class="smaller">No translations exist for this article.</li>
              

              
                <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js$locales" rel="nofollow, noindex" id="translations-add">Add a translation</a></li>
              
            </ul>
          </div>
        </div>
      </li>

      
      <li class="page-buttons-edit"><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js$edit" class="button" data-optimizely-hook="button-edit-doc" id="edit-button">Edit<i aria-hidden="true" class="icon-pencil"></i></a></li>
      

        

        <li><button id="advanced-menu" class="only-icon" aria-haspopup="true" aria-owns="advanced-menu-submenu" aria-expanded="false"><span>Advanced</span><i aria-hidden="true" class="icon-cog"></i></button>
        <div class="submenu js-submenu" id="advanced-menu-submenu">
          <!-- this page -->
          <div class="submenu-column">
            <div class="title">Advanced</div>
            <ul>
                <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js$history" rel="nofollow, noindex">History</a></li>
                
                
                

                

                
                
                
                <li class="page-print"><a href="#" onclick="return window.print();">Print this article</a></li>
            </ul>
          </div>
        </div>
  </li></ul>

        <!-- crumbs -->
        
  <nav class="crumbs" role="navigation"><ol xmlns:v="http://rdf.data-vocabulary.org/#" aria-label="breadcrumbs">
    <li typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US" rel="v:url" property="v:title">MDN</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Games" rel="v:url" property="v:title">Game development</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques" rel="v:url" property="v:title">Techniques for game development</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection" rel="v:url" property="v:title">3D collision detection</a></li>
    
    <li class="crumb" typeof="v:Breadcrumb" property="v:title">Bounding volume collision detection with THREE.js</li>
  </ol></nav>
      </div>

      <!-- heading -->
      <div id="wiki-document-head" class="document-head">
          <span class="from-search-previous-box">
            <a class="button from-search-previous only-icon disabled" title="Previous Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-left"></i></a>
          </span>
          <span class="from-search-navigate-wrap">
            <a href="#" class="from-search-navigate"><span class="from-search-navigate-up"><i aria-hidden="true" class="icon-double-angle-up"></i></span><span class="from-search-navigate-down"><i aria-hidden="true" class="icon-double-angle-down"></i></span></a>
          </span>
          <div class="from-search-toc submenu">
            <span class="title">Your Search Results</span>
            <ol></ol>
          </div>
          <span class="from-search-next-box">
            <a class="button from-search-next only-icon disabled" title="Next Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-right"></i></a>
          </span>

        
        <div class="contributor-avatars" data-all-text="see all contributors" data-alternate-message="hide contributors">
            <ul>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/chrisdavidmills" title="View profile: chrisdavidmills">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="chrisdavidmills" data-src="../../../../../../secure.gravatar.com/avatar/deeea0ba82390bd5acc539703c4b0cfb6c02.jpeg?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">chrisdavidmills</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/ladybenko" title="View profile: ladybenko">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="ladybenko" data-src="../../../../../../secure.gravatar.com/avatar/79da6f98785139726c7c9a5f8abba32f6c02.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">ladybenko</noscript></a>
                </li>
            
            </ul>
        </div>
        

        <h1>Bounding volume collision detection with THREE.js</h1>

      </div>
      

      <!-- start the main content container -->
        <div id="wiki-column-container" class="wiki-right-present wiki-left-present">

          <!-- content row with three strips -->
          <div class="column-container column-container-reverse">

            
              <!-- TOC, approvals, etc -->
              <div class="column-strip wiki-column" id="wiki-right">
              
              <!-- table of contents -->
              <div id="toc" class="toc toggleable" data-closed="true">
                <a href="#toc" class="title toggler" data-open-icon="icon-plus" data-closed-icon="icon-minus">In This Article<i></i></a>
                <ol class="toggle-container">
                  <li><a href="#Using_Box3_and_Sphere" rel="internal">Using <code>Box3</code> and <code>Sphere</code></a><ol><li><a href="#Instantiating_boxes" rel="internal">Instantiating boxes</a></li><li><a href="#Instantiating_spheres" rel="internal">Instantiating spheres</a></li><li><a href="#Intersection_tests" rel="internal">Intersection tests</a><ol><li><a href="#Point_versus_Box3_Sphere" rel="internal">Point versus <code>Box3</code> / <code>Sphere</code></a></li><li><a href="#Box3_versus_Box3" rel="internal"><code>Box3</code> versus <code>Box3</code></a></li><li><a href="#Sphere_versus_Sphere" rel="internal"><code>Sphere</code> versus <code>Sphere</code></a></li><li><a href="#Sphere_versus_Box3" rel="internal"><code>Sphere</code> versus <code>Box3</code></a></li></ol></li><li><a href="#Demos" rel="internal">Demos</a></li></ol></li><li><a href="#Using_BoundingBoxHelper" rel="internal">Using <code>BoundingBoxHelper</code></a><ol><li><a href="#Demos_2" rel="internal">Demos</a></li></ol></li>
                </ol>
              </div>
              
              </div>
            

            
            
              
            

            <!-- center: main article content -->
            <div id="wiki-content" class="column-half wiki-column text-content">

              

              

              
                
                
                
              
              

              <!-- just the article content -->
              <article id="wikiArticle">
                
                  
                    <p class="summary">This article shows how to implement <strong>collision detection between bounding boxes and spheres using the Three.js</strong> library. It is assumed that before reading this you have read our <a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection">3D collision detection</a> introductory article first, and have basic knowledge about Three.js.</p>

<h2 id="Using_Box3_and_Sphere">Using <code>Box3</code> and <code>Sphere</code></h2>

<p>Three.js has objects that represent <strong>mathematical volumes</strong> and shapes — for 3D AABB and bounding spheres we can use the <strong><code><a href="http://threejs.org/docs/#Reference/Math/Box3" class="external">Box3</a></code></strong> and <strong><code><a href="http://threejs.org/docs/#Reference/Math/Sphere" class="external">Sphere</a></code></strong> objects. Once instantiated, they have methods available to do intersection tests against other volumes.</p>

<h3 id="Instantiating_boxes">Instantiating boxes</h3>

<p>To create a <strong><code>Box3</code> instance</strong>, we need to provide the <strong>lower and upper boundaries</strong> of the box. Usually we will want this AABB to be "linked" to an object in our 3D world (like a character.) In Three.js, <code>Geometry</code> instances have a <code>boundingBox</code> property with <code>min</code> and <code>max</code> boundaries for the object. Keep in mind that in order for this property to be defined, you need to manually call <code>Geometry.computeBoundingBox</code> beforehand.</p>

<pre class="brush: js">var knot = new THREE.Mesh(
  new THREE.TorusKnotGeometry(0.5, 0.1),
  new MeshNormalMaterial({}));

knot.geometry.computeBoundingBox();
var knotBBox = new Box3(
  knot.geometry.boundingBox.min,
  knot.geometry.boundingBox.max);
</pre>

<div class="note">
<p><strong>Note</strong>: The <code>boundingBox</code> property takes the <code>Geometry</code> itself as reference, and not the <code>Mesh</code>. So any transformations such as scale, position, etc. applied to the <code>Mesh</code> will be ignored while computing the calculating box.</p>
</div>

<p>A more simple alternative that fixes the previous issue is to set those boundaries later on with <code>Box3.setFromObject</code>, which will compute the dimensions taking into account a 3D entity's<strong> transformations <em>and</em> any child meshes</strong> as well.</p>

<pre class="brush: js">var knot = new THREE.Mesh(
  new THREE.TorusKnotGeometry(0.5, 0.1),
  new MeshNormalMaterial({}));

var knotBBox = new Box3(new THREE.Vector3(), new THREE.Vector3());
knotBBox.setFromObject(knot);</pre>

<h3 id="Instantiating_spheres">Instantiating spheres</h3>

<p>Instantiating<strong> <code>Sphere</code> objects</strong> is similar. We need to provide the sphere's center and radius, which can be added to the <code>boundingSphere</code> property available in <code>Geometry</code>.</p>

<pre class="brush: js">var knot = new THREE.Mesh(
  new THREE.TorusKnotGeometry(0.5, 0.1),
  new MeshNormalMaterial({}));

var knotBSphere = new Sphere(
  knot.position,
  knot.geometry.boundingSphere.radius);
</pre>

<p>Unfortunately, there is no equivalent of <code>Box3.setFromObject</code> for Sphere instances. So if we apply transformations or change the position of the <code>Mesh</code>, we need to manually update the bounding sphere. For instance:</p>

<pre>knot.scale.set(2, 2, 2);
knotBSphere.radius = knot.geometry.radius * 2;
</pre>

<h3 id="Intersection_tests">Intersection tests</h3>

<h4 id="Point_versus_Box3_Sphere">Point versus <code>Box3</code> / <code>Sphere</code></h4>

<p>Both <code>Box3</code> and <code>Sphere</code> have a <strong><code>containsPoint</code></strong> method to do this test.</p>

<pre class="brush: js">var point = new THREE.Vector3(2, 4, 7);
knotBBox.containsPoint(point);</pre>

<h4 id="Box3_versus_Box3"><code>Box3</code> versus <code>Box3</code></h4>

<p>The <strong><code>Box3.isIntersectionBox</code></strong> method is available for performing this test.</p>

<pre class="brush: js">knotBbox.isIntersectionBox(otherBox);</pre>

<div class="note">
<p><strong>Note</strong>: This is different from the <code>Box3.containsBox</code> method, which checks whether the Box3 <em>fully</em> wraps another one.</p>
</div>

<h4 id="Sphere_versus_Sphere"><code>Sphere</code> versus <code>Sphere</code></h4>

<p>In a similar fashion as before, there is a <code><strong>Sphere.intersectsSphere</strong></code> method to perform this test.</p>

<pre class="brush: js">knotBSphere.intersectsSphere(otherSphere);</pre>

<h4 id="Sphere_versus_Box3"><code>Sphere</code> versus <code>Box3</code></h4>

<p>Unfortunately this test is not implemented in Three.js, but we can patch Sphere to implement a <a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection">Sphere versus AABB intersection</a> algorithm.</p>

<pre class="brush: js">// expand THREE.js Sphere to support collision tests vs Box3
// we are creating a vector outside the method scope to
// avoid spawning a new instance of Vector3 on every check

THREE.Sphere.__closest = new THREE.Vector3();
THREE.Sphere.prototype.intersectsBox = function (box) {
    // get box closest point to sphere center by clamping
    THREE.Sphere.__closest.set(this.center.x, this.center.y, this.center.z);
    THREE.Sphere.__closest.clamp(box.min, box.max);

    var distance =  this.center.distanceToSquared(THREE.Sphere.__closest);
    return distance &lt; (this.radius * this.radius);
};</pre>

<h3 id="Demos">Demos</h3>

<p>We have prepared some <a href="http://mozdevs.github.io/gamedev-js-3d-aabb/" class="external">live demos</a> to demonstrate these techniques, with <a href="https://github.com/mozdevs/gamedev-js-3d-aabb" class="external">source code</a> to examine.</p>

<ul>
 <li><a href="http://mozdevs.github.io/gamedev-js-3d-aabb/raw_point.html" class="external">Point versus Box and Sphere</a></li>
 <li><a href="http://mozdevs.github.io/gamedev-js-3d-aabb/raw_box.html" class="external">Box versus Box and Sphere</a></li>
 <li><a href="http://mozdevs.github.io/gamedev-js-3d-aabb/raw_sphere.html" class="external">Sphere versus Box and Sphere</a></li>
</ul>

<p><img src="../../../../../../mdn.mozillademos.org/files/11825/Screen%20Shot%202015-10-20%20at%2015.19.16.png" style="display: block; height: 256px; margin: 0px auto; width: 256px;" alt=""></p>

<h2 id="Using_BoundingBoxHelper">Using <code>BoundingBoxHelper</code></h2>

<p>As an alternative to using raw <code>Box3</code> and <code>Sphere</code> objects, Three.js has a useful object to make handling <strong>bounding boxes easier: <code><a href="http://threejs.org/docs/#Reference/Extras.Helpers/BoundingBoxHelper" class="external">BoundingBoxHelper</a></code>.</strong> This helper takes a Mesh and calculates a bounding box volume for it (including its child meshes.) This results in a new box <code>Mesh</code> representing the bounding box and a <code>Box3</code> object, which is the actual bounding box.</p>

<div>
<p><code>BoundingBoxHelper</code> is the <strong>recommended</strong> way to handle 3D collisions with bounding volumes in Three.js. You will miss sphere tests, but the tradeoffs are well worth it.</p>
</div>

<p>The advantages of using this helper are:</p>

<ul>
 <li>It has an <code>update()</code> method that will <strong>resize</strong> the bounding box if the linked Mesh rotates or changes its dimensions, and update its <strong>position</strong>.</li>
 <li>It <strong>takes into account the child meshes</strong> when computing the size of the bounding box, so the original mesh and all its children are wrapped.</li>
 <li>We can easily debug collisions by <strong>rendering</strong> the <code>Mesh</code>es that <code>BoundingBoxHelper</code> creates. By default they are created with a wireframe material.</li>
</ul>

<p>The main disadvantage is that it <strong>only creates box bounding volumes</strong>, so if you need spheres vs AABB tests you need to create your own <code>Sphere</code> objects.</p>

<p>To use it, we need to create a<strong> </strong>new <code>BoundingBoxHelper</code> instance and supply the geometry and — optionally — a color that will be used for the wireframe material.</p>

<pre class="brush: js">var knot = new THREE.Mesh(
  new THREE.TorusKnotGeometry(0.5, 0.1),
  new THREE.MeshNormalMaterial({})
);
var knotBBox = new THREE.BoundingBoxHelper(knot, 0x00ff00);
</pre>

<p>If we change the <code>Mesh</code> position, rotation, scale, etc. we need to call the <code>update()</code> method so the <code>BoundingBoxHelper</code> instance matches its linked <code>Mesh</code>.</p>

<pre class="brush: js">knot.position.set(-3, 2, 1);
knot.rotation.x = -Math.PI / 4;
// update the bounding box so it stills wraps the knot
knotBBox.update(); </pre>

<p>Performing <strong>collision tests</strong> is done in the same way as explained in the above section — a <code>BoundingBoxHelper</code> contains a <code>Box3</code> instance in its <code>box</code> property, whihc is ideal for performing the test.</p>

<pre class="brush: js">// box vs box
knotBBox.box.isIntersectionBox(otherBBox.box);
// box vs point
knotBBox.box.containsPoint(point.position);</pre>

<h3 id="Demos_2">Demos</h3>

<p>There are <strong>two demos</strong> you can take a look at on our <a href="http://mozdevs.github.io/gamedev-js-3d-aabb/" class="external">live demos page</a>. The <a href="http://mozdevs.github.io/gamedev-js-3d-aabb/api_point.html" class="external">first one</a> showcases point versus box collisions using <code>BoundingBoxHelper</code>. The <a href="http://mozdevs.github.io/gamedev-js-3d-aabb/api_box.html" class="external">second one</a> performs box versus box tests.</p>

<p><img src="../../../../../../mdn.mozillademos.org/files/11821/Screen%20Shot%202015-10-19%20at%2012.10.06.png" style="display: block; height: 256px; margin: 0px auto; width: 256px;" alt=""></p>

<p>&nbsp;</p>

<p>&nbsp;</p>
                  
                
              </article>

              

                <!-- contributors -->
                <div class="wiki-block contributors">
                  <h2 class="offscreen">Document Tags and Contributors</h2>
                  
                  
  <div class="tag-attach-list contributors-sub">
    <i aria-hidden="true" class="icon-tags icon-fw"></i>
    <strong>Tags:</strong>&nbsp;
    <ul class="tags tags-small">
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/3D">3D</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/bounding boxes">bounding boxes</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/collision detection">collision detection</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/Games">Games</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/JavaScript">JavaScript</a></li>
      
        <li><a href="../../../tag/three.html">three.js</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/WebGL">WebGL</a></li>
      
    </ul>
  </div>

                  
                    <div class="contributors-sub">
                      <i aria-hidden="true" class="icon-group icon-fw"></i>&nbsp;<strong>Contributors to this page:</strong> 
        <a href="https://developer.mozilla.org/en-US/profiles/chrisdavidmills">chrisdavidmills</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/ladybenko">ladybenko</a>
    
                    </div>
                  

                  
                    <div class="contributors-sub">
                      <i aria-hidden="true" class="icon-clock-o icon-fw"></i>&nbsp;<strong>Last updated by:</strong>
                      <a href="https://developer.mozilla.org/en-US/profiles/chrisdavidmills">chrisdavidmills</a>,
                      <time datetime="2015-11-09T03:46:17-08:00">Nov 9, 2015, 3:46:17 AM</time>
                    </div>
                  
                </div>
              

              
                  <div class="newsletter-box">
                    <div class="newsletter">
    <form id="newsletterForm" name="newsletter-form" class="nodisable" action="https://www.mozilla.org/en-US/newsletter/" method="post">
        <h2 class="newsletter-teaser">Learn the best of web development</h2>
        <p class="newsletter-description">Sign up for our newsletter:</p>
        <input type="hidden" id="fmt" name="fmt" value="H">
        <input type="hidden" id="newsletterNewslettersInput" name="newsletters" value="app-dev">

        <div id="newsletterErrors" class="newsletter-errors"></div>

        <div id="newsletterEmail" class="form-group">
            <label for="newsletterEmailInput" class="form-label offscreen">E-mail</label>
            <input type="email" id="newsletterEmailInput" name="email" class="form-input newsletter-input-email" required="" placeholder="you@example.com" size="30">
        </div>

        <div id="newsletterPrivacy" class="form-group form-group-agree hidden">
            <input type="checkbox" id="newsletterPrivacyInput" name="privacy" required="">
            <label for="newsletterPrivacyInput">
            I'm okay with Mozilla handling my info as explained in this <a href="https://www.mozilla.org/privacy/">Privacy Policy</a>.
            </label>
        </div>
        <div id="newsletterSubmit">
            <button id="newsletter-submit" type="submit" class="button positive">Sign up now</button>
        </div>
        
    </form>
    <div id="newsletterThanks" class="newsletter-thanks hidden">
        <h2>Thanks! Please check your inbox to confirm your subscription.</h2>
        <p>If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an email from us.
        </p>
    </div>
    <button id="newsletterHide" type="button" class="only-icon newsletter-hide hidden"><span>Hide Newsletter Sign-up</span><i aria-hidden="true" class="icon-times"></i></button>
</div>
                  </div>
              
            </div>

            
              <!-- quick links and zone subnav strip -->
              <div id="wiki-left" class="column-strip wiki-column">

              

                
                  <!-- zone subnav -->
                  
  <nav class="zone-subnav-container" role="navigation">
    <div class="subnav" id="Subnav">
      

<ol>
 <li><a href="#">Introduction</a>

  <ol>
   <li><a title="An introduction to the technologies useful for game developers and how to get started developing games using Web technologies. This article also looks at the business case for why it makes sense to create games for the Web" href="https://developer.mozilla.org/en-US/docs/Games/Introduction">Introduction to game development for the Web</a></li>
   <li><a title="What is a video game, really? There are certain parts that are common between games (even if it doesn't seem like it). This article looks to explain concepts like main loops in a completely general context. When it does focus, it does so toward web standards." href="https://developer.mozilla.org/en-US/docs/Games/Anatomy">Anatomy of a video game</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Examples">Examples</a></li>
  </ol>
 </li>
 <li><a href="#">APIs for game development</a>
  <ol>
   <li><a href="../../../Web/API/Canvas_API.html">Canvas</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a></li>
   <li><a href="../../../../Apps/Fundamentals/User_notifications/Full_screen_api.html">Full Screen</a></li>
   <li><a href="../../../Web/API/Gamepad_API.html">Gamepad</a></li>
   <li><a href="../../../Web/API/IndexedDB_API.html">IndexedDB</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a></li>
   <li><a href="../../../Web/API/Pointer_Lock_API.html">Pointer Lock</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Web/SVG">SVG</a></li>
   <li><a href="../../../Web/JavaScript/Reference/Global_Objects/TypedArray.html">Typed Arrays</a></li>
   <li><a href="../../../Web/API/Web_Audio_API.html">Web Audio</a></li>
   <li><a href="../../../Web/API/WebGL_API.html">WebGL</a></li>
   <li><a href="../../../Web/API/WebRTC_API.html">WebRTC</a></li>
   <li><a href="../../../Web/API/WebSockets_API.html">Web Sockets</a></li>
   <li><a href="../../../Web/API/WebVR_API.html">WebVR</a></li>
   <li><a href="../../../Web/API/Web_Workers_API.html">Web Workers</a></li>
   <li><a href="../../../Web/API/XMLHttpRequest.html">XmlHttpRequest</a></li>
  </ol>
 </li>
 <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques">Techniques</a>
  <ol>
   <li><a title="Especially when creating medium to large-sized games, async scripts are an essential technique to take advantage of, so that your game's JavaScript can be compiled off the main thread and be cached for future game running" href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Async_scripts">Using async scripts for asm.js</a></li>
   <li><a title="How to make sure your game starts up quickly, smoothly, and without appearing to lock up the user's browser or device." href="https://developer.mozilla.org/en-US/docs/Apps/Developing/Optimizing_startup_performance">Optimizing startup performance</a></li>
   <li><a title="In addition to providing support for audio and video communication, WebRTC lets you set up peer-to-peer data channels to exchange text or binary data actively between your players." href="https://developer.mozilla.org/en-US/docs/Games/Techniques/WebRTC_data_channels">Using WebRTC peer-to-peer data channels</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Efficient_animation_for_web_games">Efficient animation for web games</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_on_the_web">3D games on the Web</a>
    <ol>
     <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_on_the_web">3D games on the Web overview</a></li>
     <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_on_the_web/Basic_theory">Explaining basic 3D theory</a></li>
     <li><a href="../3D_on_the_web/Building_up_a_basic_demo_with_Three.html">Building up a basic demo with Three.js</a></li>
     <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_PlayCanvas">Building up a basic demo with PlayCanvas</a></li>
     <li><a href="../3D_on_the_web/Building_up_a_basic_demo_with_Whitestorm.html">Building up a basic demo with Whitestorm.js</a></li>
     <li>
      <p><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_on_the_web/WebVR">WebVR</a></p>
     </li>
    </ol>
   </li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Audio_for_Web_Games">Audio for Web Games</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/2D_collision_detection">2D collision detection</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection">3D collision detection</a>
    <ol>
     <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection">3D collision detection overview</a></li>
     <li><a href="Bounding_volume_collision_detection_with_THREE.html">Bounding volume collision detection with THREE.js</a></li>
    </ol>
   </li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Tilemaps">Tiles and tilemaps</a>
    <ol>
     <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Tilemaps">Tiles and tilemaps overview</a></li>
     <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Tilemaps/Square_tilemaps_implementation%3A_Static_maps">Static maps</a></li>
     <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Tilemaps/Square_tilemaps_implementation%3A_Scrolling_maps">Scrolling maps</a></li>
    </ol>
   </li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Control_mechanisms">Implementing game control mechanisms</a>
    <ol>
     <li><strong><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Control_mechanisms">Game control mechanisms overview</a></strong></li>
     <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Control_mechanisms/Mobile_touch">Mobile touch controls</a></li>
     <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Control_mechanisms/Desktop_with_mouse_and_keyboard">Desktop mouse and keyboard controls</a></li>
     <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Control_mechanisms/Desktop_with_gamepad">Desktop gamepad controls</a></li>
     <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Control_mechanisms/Other">Unconventional controls</a></li>
    </ol>
   </li>
  </ol>
 </li>
 <li><a href="https://developer.mozilla.org/en-US/docs/Games/Tutorials">Tutorials</a>
  <ol>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript">2D breakout game using pure JavaScript</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Tutorials/2D_breakout_game_Phaser">2D breakout game using Phaser</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Tutorials/HTML5_Gamedev_Phaser_Device_Orientation">2D maze game with device orientation</a></li>
  </ol>
 </li>
 <li><a href="https://developer.mozilla.org/en-US/docs/Games/Publishing_games">Publishing games</a>
  <ol>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Publishing_games">Publishing games overview</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Publishing_games/Game_distribution">Game distribution</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Publishing_games/Game_promotion">Game promotion</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Games/Publishing_games/Game_monetization">Game monetization</a></li>
  </ol>
 </li>
</ol>
    </div>
  </nav>&nbsp;
                

                

                <!-- approvals -->
                

              

              </div>
            
          </div>
        </div>
      </div>
    </div> <!-- ends "main-content" -->

  <menu type="context" id="edit-history-menu">
    <menuitem data-action="/en-US/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js$edit" label="Edit page"></menuitem>
    <menuitem data-action="/en-US/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js$history" label="View page history"></menuitem>
  </menu>

  </div></main>

  <!-- Footer -->
  <footer id="main-footer"><div class="center">
    <div class="column-container">
      <div class="column-main">
        
        <div class="contentinfo">
          <p>© 2005-2017 Mozilla Developer Network and individual contributors.</p> <p>Content is available under <a href="https://developer.mozilla.org/en-US/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p>
          <ul>
            <li><a href="https://developer.mozilla.org/docs/MDN/About">About MDN</a></li>
            <li><a href="http://www.mozilla.org/about/legal/terms/mozilla">Terms</a></li>
            <li><a href="http://www.mozilla.org/privacy/websites/">Privacy</a></li>
            <li><a href="http://www.mozilla.org/privacy/websites/#cookies">Cookies</a></li>
            <li><a href="http://github.com/mozilla/kuma">Contribute to the code</a></li>
          </ul>
        </div>
        
      </div>
      <div class="column-strip">
        
          
  

        
      </div>
    </div>
  </div></footer>

  <!-- site js -->
  
    
    <!--[if lte IE 8]><script type="text/javascript" src="https://developer.cdn.mozilla.net/static/build/js/selectivizr.091e18cf669b.js" charset="utf-8"></script><![endif]-->

    
    <script async="" type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/build/js/main.69644b44d458.js" charset="utf-8"></script>
    
      <script>
        if(window.mdn && mdn.analytics) mdn.analytics.trackOutboundLinks();
      </script>
    
    
    <script type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/jsi18n/en-us/javascript.b28203373cc1.js"></script>
  
    <script async="" type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/build/js/syntax-prism-min.js" charset="utf-8"></script><script type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/build/js/main.69644b44d458.js" charset="utf-8"></script>
    
      <script>
        if(window.mdn && mdn.analytics) mdn.analytics.trackOutboundLinks();
      </script>
    
    
    <script type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/jsi18n/en-us/javascript.b28203373cc1.js"></script>
  
    <script async="" type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/build/js/wiki.d85ddd33511e.js" charset="utf-8" id="wikiscript"></script>

  

  

  

  
    <script async="" type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/build/js/newsletter.7cd3274169f2.js" charset="utf-8"></script>
  



<!-- Mirrored from developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Jan 2017 23:05:00 GMT -->
</body></html>